<!--
  SPDX-FileCopyrightText: 2025 (C) 2025 Siemens AG
  SPDX-License-Identifier: MIT
-->

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../favicon.ico">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.5.0">
    
    
      
        <title>Gpuruntime Component - AI Software Development Kit</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.2e8b5541.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../styles.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#module-simaticaideploygpuruntime_component" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../index.html" title="AI Software Development Kit" class="md-header__button md-logo" aria-label="AI Software Development Kit" data-md-component="logo">
      
  <img src="../../../Sie_logo_white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AI Software Development Kit
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Gpuruntime Component
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../index.html" title="AI Software Development Kit" class="md-nav__button md-logo" aria-label="AI Software Development Kit" data-md-component="logo">
      
  <img src="../../../Sie_logo_white.svg" alt="logo">

    </a>
    AI Software Development Kit
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../CHANGELOG.html" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../Readme.html" class="md-nav__link">
        Readme
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../user_manual.html" class="md-nav__link">
        User Manual
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1" type="checkbox" id="__nav_5_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_1">
          Log Module
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Log Module" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          Log Module
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../log_module/index.html" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../log_module/mock_logger.html" class="md-nav__link">
        Mock Logger
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_2">
          Simaticai
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Simaticai" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Simaticai
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deployment.html" class="md-nav__link">
        Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../model_config_pb2.html" class="md-nav__link">
        Model Config Pb2
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2_4" type="checkbox" id="__nav_5_2_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_2_4">
          Data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_2_4">
          <span class="md-nav__icon md-icon"></span>
          Data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data/index.html" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data/schemas.html" class="md-nav__link">
        Schemas
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2_5" type="checkbox" id="__nav_5_2_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_2_5">
          Deploy
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Deploy" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_2_5">
          <span class="md-nav__icon md-icon"></span>
          Deploy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="component.html" class="md-nav__link">
        Component
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Gpuruntime Component
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="gpuruntime_component.html" class="md-nav__link md-nav__link--active">
        Gpuruntime Component
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_validate_gpuruntime_config" class="md-nav__link">
    _validate_gpuruntime_config
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gpuruntimecomponent" class="md-nav__link">
    GPURuntimeComponent
  </a>
  
    <nav class="md-nav" aria-label="GPURuntimeComponent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#attributes" class="md-nav__link">
    Attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-variables" class="md-nav__link">
    Class variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_input" class="md-nav__link">
    add_input
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_output" class="md-nav__link">
    add_output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change_input" class="md-nav__link">
    change_input
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change_output" class="md-nav__link">
    change_output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete_input" class="md-nav__link">
    delete_input
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete_output" class="md-nav__link">
    delete_output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#save" class="md-nav__link">
    save
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use_config" class="md-nav__link">
    use_config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use_model" class="md-nav__link">
    use_model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validate" class="md-nav__link">
    validate
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="pipeline.html" class="md-nav__link">
        Pipeline
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="pipeline_data.html" class="md-nav__link">
        Pipeline Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="pipeline_page.html" class="md-nav__link">
        Pipeline Page
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="python_component.html" class="md-nav__link">
        Python Component
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2_6" type="checkbox" id="__nav_5_2_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_2_6">
          Helpers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Helpers" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_2_6">
          <span class="md-nav__icon md-icon"></span>
          Helpers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helpers/index.html" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helpers/model_config.html" class="md-nav__link">
        Model Config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helpers/pep508.html" class="md-nav__link">
        Pep508
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helpers/reporter.html" class="md-nav__link">
        Reporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helpers/tempfiles.html" class="md-nav__link">
        Tempfiles
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helpers/yaml_helper.html" class="md-nav__link">
        Yaml Helper
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2_7" type="checkbox" id="__nav_5_2_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_2_7">
          Packaging
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Packaging" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_2_7">
          <span class="md-nav__icon md-icon"></span>
          Packaging
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../packaging/constants.html" class="md-nav__link">
        Constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../packaging/index.html" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../packaging/python_dependencies.html" class="md-nav__link">
        Python Dependencies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../packaging/wheelhouse.html" class="md-nav__link">
        Wheelhouse
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2_8" type="checkbox" id="__nav_5_2_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_2_8">
          Testing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Testing" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_2_8">
          <span class="md-nav__icon md-icon"></span>
          Testing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/component_runner.html" class="md-nav__link">
        Component Runner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/data_stream.html" class="md-nav__link">
        Data Stream
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/docker_venv.html" class="md-nav__link">
        Docker Venv
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/index.html" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/pipeline_runner.html" class="md-nav__link">
        Pipeline Runner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/pipeline_validator.html" class="md-nav__link">
        Pipeline Validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/run_component.html" class="md-nav__link">
        Run Component
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/run_gpuruntime_component.html" class="md-nav__link">
        Run Gpuruntime Component
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/runner_config.html" class="md-nav__link">
        Runner Config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/timeseries_stream.html" class="md-nav__link">
        Timeseries Stream
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/vca_stream.html" class="md-nav__link">
        Vca Stream
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_validate_gpuruntime_config" class="md-nav__link">
    _validate_gpuruntime_config
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gpuruntimecomponent" class="md-nav__link">
    GPURuntimeComponent
  </a>
  
    <nav class="md-nav" aria-label="GPURuntimeComponent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#attributes" class="md-nav__link">
    Attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-variables" class="md-nav__link">
    Class variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_input" class="md-nav__link">
    add_input
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_output" class="md-nav__link">
    add_output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change_input" class="md-nav__link">
    change_input
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change_output" class="md-nav__link">
    change_output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete_input" class="md-nav__link">
    delete_input
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete_output" class="md-nav__link">
    delete_output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#save" class="md-nav__link">
    save
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use_config" class="md-nav__link">
    use_config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use_model" class="md-nav__link">
    use_model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validate" class="md-nav__link">
    validate
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="module-simaticaideploygpuruntime_component">Module simaticai.deploy.gpuruntime_component</h1>
<p>None</p>
<p>None</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="c1"># Copyright (C) Siemens AG 2021. All Rights Reserved. Confidential.</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">shutil</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Union</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">google.protobuf</span><span class="w"> </span><span class="kn">import</span> <span class="n">text_format</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">simaticai.deploy.component</span><span class="w"> </span><span class="kn">import</span> <span class="n">Component</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">simaticai</span><span class="w"> </span><span class="kn">import</span> <span class="n">model_config_pb2</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">simaticai.helpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">model_config</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">()</span>

<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span><span class="o">.</span><span class="n">handlers</span> <span class="o">=</span> <span class="p">[</span><span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)]</span>

<span class="n">_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">_logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GPURuntimeComponent&#39;</span><span class="p">,</span> <span class="s1">&#39;_validate_gpuruntime_config&#39;</span><span class="p">]</span>

<span class="k">class</span><span class="w"> </span><span class="nc">GPURuntimeComponent</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    The GPURuntimeComponent is used to define a component that runs on a GPU device.</span>

<span class="sd">    The component works only with ONNX models and can be used in an Inference Pipeline.</span>

<span class="sd">    Attributes:</span>

<span class="sd">        name (str): Component name.</span>

<span class="sd">        version (str): Component version.</span>

<span class="sd">        desc (str): Component description.</span>

<span class="sd">    Methods:</span>

<span class="sd">        use_model(self,</span>

<span class="sd">                    path: Union[Path, str], max_batch_size: int,</span>

<span class="sd">                    optimization: Optional[model_config.TensorRTOptimization] = None,</span>

<span class="sd">                    warmup: model_config.Warmup = None)</span>

<span class="sd">            Add an ONNX model file for the component.</span>

<span class="sd">        use_config(self, path: Union[Path, str])</span>

<span class="sd">            Use a custom config.pbtxt file instead of the autogenerated one.</span>

<span class="sd">        save(self, destination: Union[Path, str], validate = False)</span>

<span class="sd">            Saves the component to a folder structure, so it can be used as part of a pipeline configuration package.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;inference&quot;</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">desc</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Creates a new, empty GPU Runtime component.</span>

<span class="sd">        Args:</span>

<span class="sd">            name (str): Component name. (default: inference)</span>

<span class="sd">            version (str): Component version. (default: 1)</span>

<span class="sd">            desc (str): Component description (optional)</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">version</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">model_path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">model_version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">auto_config</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="p">{</span>

            <span class="o">**</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_to_dict</span><span class="p">(),</span>

            <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>

            <span class="s1">&#39;entrypoint&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">model_version</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">entrypoint</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>

            <span class="s1">&#39;hwType&#39;</span><span class="p">:</span> <span class="s1">&#39;GPU&#39;</span><span class="p">,</span>

            <span class="s1">&#39;runtime&#39;</span><span class="p">:</span> <span class="p">{</span>

                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;gpuruntime&#39;</span><span class="p">,</span>

                <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="s1">&#39;0.1.0&#39;</span><span class="p">,</span>

            <span class="p">}</span>

        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">use_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>

                  <span class="n">max_batch_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>

                  <span class="n">optimization</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">model_config</span><span class="o">.</span><span class="n">TensorRTOptimization</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>

                  <span class="n">warmup</span><span class="p">:</span> <span class="n">model_config</span><span class="o">.</span><span class="n">Warmup</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Add the ONNX model file for the component.</span>

<span class="sd">        Args:</span>

<span class="sd">            path (Union[Path, str]): The path to the ONNX model file.</span>

<span class="sd">            max_batch_size (int): The maximum batch size for the model.</span>

<span class="sd">            optimization (model_config.TensorRTOptimization, optional): The optimization configuration for the model. Defaults to None.</span>

<span class="sd">            warmup (model_config.Warmup, optional): The warmup configuration for the model. Defaults to None.</span>

<span class="sd">        Raises:</span>

<span class="sd">            AssertionError: If the specified model file is not found, has an invalid extension, or if max_batch_size is less than 0.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>

            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;specified model file not found: &#39;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">suffix</span> <span class="o">!=</span> <span class="s2">&quot;.onnx&quot;</span><span class="p">:</span>

            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;model file extension is not &#39;.onnx&#39;: &#39;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">max_batch_size</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>

            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;max_batch_size must be greater or equal to 0&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;model.onnx&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">model_path</span> <span class="o">=</span> <span class="n">path</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

            <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Previously added configuration was removed. Component will use the default configuration unless you specify your own.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Remove old automatic variables</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">auto_config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

            <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">auto_config</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">delete_input</span><span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>

            <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">auto_config</span><span class="o">.</span><span class="n">outputs</span><span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">delete_output</span><span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">auto_config</span> <span class="o">=</span> <span class="n">model_config</span><span class="o">.</span><span class="n">ModelConfig</span><span class="p">(</span><span class="n">onnx_path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>

                                                    <span class="n">max_batch_size</span><span class="o">=</span><span class="n">max_batch_size</span><span class="p">,</span>

                                                    <span class="n">warmup</span><span class="o">=</span><span class="n">warmup</span><span class="p">,</span>

                                                    <span class="n">optimization</span><span class="o">=</span><span class="n">optimization</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">auto_config</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">])</span>

        <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">auto_config</span><span class="o">.</span><span class="n">outputs</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">])</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">use_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Sets the configuration file to be used for inference.</span>

<span class="sd">        Intended usage is to use a custom configuration file instead of the autogenerated one.</span>

<span class="sd">        This way extra configurations can be added to the component, such as the execution accelerator.</span>

<span class="sd">        Args:</span>

<span class="sd">            path (Union[Path, str]): The path to the configuration file.</span>

<span class="sd">        Raises:</span>

<span class="sd">            AssertionError: If the specified config file is not found or has an invalid extension.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>

            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;specified config file not found: &#39;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">suffix</span> <span class="o">!=</span> <span class="s2">&quot;.pbtxt&quot;</span><span class="p">:</span>

            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;config file extension is not &#39;.pbtxt&#39;: &#39;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

        <span class="n">_validate_gpuruntime_config</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">path</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">destination</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">validate</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Saves the component to a folder structure, so it can be used as part of a pipeline configuration package.</span>

<span class="sd">        The component folder contains the following:</span>

<span class="sd">        - An `.onnx` model file</span>

<span class="sd">        - A `.pbtxt` configuration file</span>

<span class="sd">        Args:</span>

<span class="sd">            destination (path-like): Target directory to which the component will be saved.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;An ONNX model file must be specified before the component can be saved.&quot;</span><span class="p">)</span>

        <span class="n">component_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

        <span class="n">component_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

        <span class="n">model_dir</span> <span class="o">=</span> <span class="n">component_dir</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_version</span>

        <span class="n">model_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">exist_ok</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

        <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_path</span><span class="p">,</span> <span class="n">model_dir</span> <span class="o">/</span> <span class="s2">&quot;model.onnx&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

            <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Configuration was not specified. Model will be saved with default configuration.&quot;</span><span class="p">)</span>

            <span class="p">(</span><span class="n">component_dir</span> <span class="o">/</span> <span class="s2">&quot;config.pbtxt&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">auto_config</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">component_dir</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">_validate_gpuruntime_config</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>

        <span class="n">text_format</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">model_config_pb2</span><span class="o">.</span><span class="n">ModelConfig</span><span class="p">())</span>
</code></pre></div>

</details>
<h2 id="functions">Functions</h2>
<h3 id="_validate_gpuruntime_config">_validate_gpuruntime_config</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_validate_gpuruntime_config</span><span class="p">(</span>
    <span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code>def _validate_gpuruntime_config(path: Union[Path, str]):

    with open(path, &#39;r&#39;) as file:

        text_format.Parse(file.read(), model_config_pb2.ModelConfig())
</code></pre></div>

</details>
<h2 id="classes">Classes</h2>
<h3 id="gpuruntimecomponent">GPURuntimeComponent</h3>
<p>The GPURuntimeComponent is used to define a component that runs on a GPU device.</p>
<p>The component works only with ONNX models and can be used in an Inference Pipeline.</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">GPURuntimeComponent</span><span class="p">(</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;inference&#39;</span><span class="p">,</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>
    <span class="n">desc</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="p">)</span>
</code></pre></div>

<h4 id="attributes">Attributes</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>str</td>
<td>Component name.</td>
<td>None</td>
</tr>
<tr>
<td>version</td>
<td>str</td>
<td>Component version.</td>
<td>None</td>
</tr>
<tr>
<td>desc</td>
<td>str</td>
<td>Component description.</td>
<td>None</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nx">GPURuntimeComponent</span><span class="p">(</span><span class="nx">Component</span><span class="p">):</span>

<span class="w">    </span><span class="s">&quot;&quot;&quot;</span>

<span class="s">    The GPURuntimeComponent is used to define a component that runs on a GPU device.</span>

<span class="s">    The component works only with ONNX models and can be used in an Inference Pipeline.</span>

<span class="s">    Attributes:</span>

<span class="s">        name (str): Component name.</span>

<span class="s">        version (str): Component version.</span>

<span class="s">        desc (str): Component description.</span>

<span class="s">    Methods:</span>

<span class="s">        use_model(self,</span>

<span class="s">                    path: Union[Path, str], max_batch_size: int,</span>

<span class="s">                    optimization: Optional[model_config.TensorRTOptimization] = None,</span>

<span class="s">                    warmup: model_config.Warmup = None)</span>

<span class="s">            Add an ONNX model file for the component.</span>

<span class="s">        use_config(self, path: Union[Path, str])</span>

<span class="s">            Use a custom config.pbtxt file instead of the autogenerated one.</span>

<span class="s">        save(self, destination: Union[Path, str], validate = False)</span>

<span class="s">            Saves the component to a folder structure, so it can be used as part of a pipeline configuration package.</span>

<span class="s">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="nx">def</span><span class="w"> </span><span class="nx">__init__</span><span class="p">(</span><span class="kp">self</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">str</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;inference&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">version</span><span class="p">:</span><span class="w"> </span><span class="nx">str</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">desc</span><span class="p">:</span><span class="w"> </span><span class="nx">str</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">):</span>

<span class="w">        </span><span class="s">&quot;&quot;&quot;</span>

<span class="s">        Creates a new, empty GPU Runtime component.</span>

<span class="s">        Args:</span>

<span class="s">            name (str): Component name. (default: inference)</span>

<span class="s">            version (str): Component version. (default: 1)</span>

<span class="s">            desc (str): Component description (optional)</span>

<span class="s">        &quot;&quot;&quot;</span>

<span class="w">        </span><span class="nx">super</span><span class="p">().</span><span class="nx">__init__</span><span class="p">(</span><span class="nx">name</span><span class="p">=</span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="nx">desc</span><span class="p">=</span><span class="nx">desc</span><span class="p">)</span>

<span class="w">        </span><span class="kp">self</span><span class="p">.</span><span class="nx">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">version</span>

<span class="w">        </span><span class="kp">self</span><span class="p">.</span><span class="nx">entrypoint</span><span class="p">:</span><span class="w"> </span><span class="nx">Union</span><span class="p">[</span><span class="nx">Path</span><span class="p">,</span><span class="w"> </span><span class="nx">None</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">None</span>

<span class="w">        </span><span class="kp">self</span><span class="p">.</span><span class="nx">model_path</span><span class="p">:</span><span class="w"> </span><span class="nx">Union</span><span class="p">[</span><span class="nx">Path</span><span class="p">,</span><span class="w"> </span><span class="nx">None</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">None</span>

<span class="w">        </span><span class="kp">self</span><span class="p">.</span><span class="nx">model_version</span><span class="p">:</span><span class="w"> </span><span class="nx">str</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;1&quot;</span>

<span class="w">        </span><span class="kp">self</span><span class="p">.</span><span class="nx">config</span><span class="p">:</span><span class="w"> </span><span class="nx">Union</span><span class="p">[</span><span class="nx">Path</span><span class="p">,</span><span class="w"> </span><span class="nx">None</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">None</span>

<span class="w">        </span><span class="kp">self</span><span class="p">.</span><span class="nx">auto_config</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">None</span>

<span class="w">    </span><span class="nx">def</span><span class="w"> </span><span class="nx">_to_dict</span><span class="p">(</span><span class="kp">self</span><span class="p">):</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>

<span class="w">            </span><span class="o">**</span><span class="nx">super</span><span class="p">().</span><span class="nx">_to_dict</span><span class="p">(),</span>

<span class="w">            </span><span class="err">&#39;</span><span class="nx">version</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="kp">self</span><span class="p">.</span><span class="nx">version</span><span class="p">,</span>

<span class="w">            </span><span class="err">&#39;</span><span class="nx">entrypoint</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="nx">f</span><span class="s">&quot;{self.model_version}/{self.entrypoint.name}&quot;</span><span class="p">,</span>

<span class="w">            </span><span class="err">&#39;</span><span class="nx">hwType</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">GPU</span><span class="err">&#39;</span><span class="p">,</span>

<span class="w">            </span><span class="err">&#39;</span><span class="nx">runtime</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>

<span class="w">                </span><span class="err">&#39;</span><span class="k">type</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">gpuruntime</span><span class="err">&#39;</span><span class="p">,</span>

<span class="w">                </span><span class="err">&#39;</span><span class="nx">version</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="m m-Double">0.1.0</span><span class="err">&#39;</span><span class="p">,</span>

<span class="w">            </span><span class="p">}</span>

<span class="w">        </span><span class="p">}</span>

<span class="w">    </span><span class="nx">def</span><span class="w"> </span><span class="nx">use_model</span><span class="p">(</span><span class="kp">self</span><span class="p">,</span><span class="w"> </span><span class="nx">path</span><span class="p">:</span><span class="w"> </span><span class="nx">Union</span><span class="p">[</span><span class="nx">Path</span><span class="p">,</span><span class="w"> </span><span class="nx">str</span><span class="p">],</span>

<span class="w">                  </span><span class="nx">max_batch_size</span><span class="p">:</span><span class="w"> </span><span class="nx">int</span><span class="p">,</span>

<span class="w">                  </span><span class="nx">optimization</span><span class="p">:</span><span class="w"> </span><span class="nx">Optional</span><span class="p">[</span><span class="nx">model_config</span><span class="p">.</span><span class="nx">TensorRTOptimization</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">None</span><span class="p">,</span>

<span class="w">                  </span><span class="nx">warmup</span><span class="p">:</span><span class="w"> </span><span class="nx">model_config</span><span class="p">.</span><span class="nx">Warmup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">None</span><span class="p">):</span>

<span class="w">        </span><span class="s">&quot;&quot;&quot;</span>

<span class="s">        Add the ONNX model file for the component.</span>

<span class="s">        Args:</span>

<span class="s">            path (Union[Path, str]): The path to the ONNX model file.</span>

<span class="s">            max_batch_size (int): The maximum batch size for the model.</span>

<span class="s">            optimization (model_config.TensorRTOptimization, optional): The optimization configuration for the model. Defaults to None.</span>

<span class="s">            warmup (model_config.Warmup, optional): The warmup configuration for the model. Defaults to None.</span>

<span class="s">        Raises:</span>

<span class="s">            AssertionError: If the specified model file is not found, has an invalid extension, or if max_batch_size is less than 0.</span>

<span class="s">        &quot;&quot;&quot;</span>

<span class="w">        </span><span class="nx">path</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">Path</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">is_file</span><span class="p">():</span>

<span class="w">            </span><span class="nx">raise</span><span class="w"> </span><span class="nx">AssertionError</span><span class="p">(</span><span class="nx">f</span><span class="s">&quot;specified model file not found: &#39;{path}&#39;&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">suffix</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s">&quot;.onnx&quot;</span><span class="p">:</span>

<span class="w">            </span><span class="nx">raise</span><span class="w"> </span><span class="nx">AssertionError</span><span class="p">(</span><span class="nx">f</span><span class="s">&quot;model file extension is not &#39;.onnx&#39;: &#39;{path}&#39;&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">max_batch_size</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">:</span>

<span class="w">            </span><span class="nx">raise</span><span class="w"> </span><span class="nx">AssertionError</span><span class="p">(</span><span class="s">&quot;max_batch_size must be greater or equal to 0&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="kp">self</span><span class="p">.</span><span class="nx">entrypoint</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">Path</span><span class="p">(</span><span class="s">&quot;model.onnx&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="kp">self</span><span class="p">.</span><span class="nx">model_path</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">path</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="kp">self</span><span class="p">.</span><span class="nx">config</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">None</span><span class="p">:</span>

<span class="w">            </span><span class="nx">_logger</span><span class="p">.</span><span class="nx">warning</span><span class="p">(</span><span class="s">&quot;Previously added configuration was removed. Component will use the default configuration unless you specify your own.&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="kp">self</span><span class="p">.</span><span class="nx">config</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">None</span>

<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="nx">Remove</span><span class="w"> </span><span class="nx">old</span><span class="w"> </span><span class="nx">automatic</span><span class="w"> </span><span class="nx">variables</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="kp">self</span><span class="p">.</span><span class="nx">auto_config</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">None</span><span class="p">:</span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="kd">var</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kp">self</span><span class="p">.</span><span class="nx">auto_config</span><span class="p">.</span><span class="nx">inputs</span><span class="p">:</span>

<span class="w">                </span><span class="kp">self</span><span class="p">.</span><span class="nx">delete_input</span><span class="p">(</span><span class="kd">var</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">])</span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="kd">var</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kp">self</span><span class="p">.</span><span class="nx">auto_config</span><span class="p">.</span><span class="nx">outputs</span><span class="p">:</span>

<span class="w">                </span><span class="kp">self</span><span class="p">.</span><span class="nx">delete_output</span><span class="p">(</span><span class="kd">var</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">])</span>

<span class="w">        </span><span class="kp">self</span><span class="p">.</span><span class="nx">auto_config</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">model_config</span><span class="p">.</span><span class="nx">ModelConfig</span><span class="p">(</span><span class="nx">onnx_path</span><span class="p">=</span><span class="nx">path</span><span class="p">,</span>

<span class="w">                                                    </span><span class="nx">max_batch_size</span><span class="p">=</span><span class="nx">max_batch_size</span><span class="p">,</span>

<span class="w">                                                    </span><span class="nx">warmup</span><span class="p">=</span><span class="nx">warmup</span><span class="p">,</span>

<span class="w">                                                    </span><span class="nx">optimization</span><span class="p">=</span><span class="nx">optimization</span><span class="p">)</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="kd">var</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kp">self</span><span class="p">.</span><span class="nx">auto_config</span><span class="p">.</span><span class="nx">inputs</span><span class="p">:</span>

<span class="w">            </span><span class="kp">self</span><span class="p">.</span><span class="nx">add_input</span><span class="p">(</span><span class="kd">var</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">],</span><span class="w"> </span><span class="kd">var</span><span class="p">[</span><span class="s">&quot;type&quot;</span><span class="p">])</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="kd">var</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kp">self</span><span class="p">.</span><span class="nx">auto_config</span><span class="p">.</span><span class="nx">outputs</span><span class="p">:</span>

<span class="w">            </span><span class="kp">self</span><span class="p">.</span><span class="nx">add_output</span><span class="p">(</span><span class="kd">var</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">],</span><span class="w"> </span><span class="kd">var</span><span class="p">[</span><span class="s">&quot;type&quot;</span><span class="p">])</span>

<span class="w">    </span><span class="nx">def</span><span class="w"> </span><span class="nx">use_config</span><span class="p">(</span><span class="kp">self</span><span class="p">,</span><span class="w"> </span><span class="nx">path</span><span class="p">:</span><span class="w"> </span><span class="nx">Union</span><span class="p">[</span><span class="nx">Path</span><span class="p">,</span><span class="w"> </span><span class="nx">str</span><span class="p">]):</span>

<span class="w">        </span><span class="s">&quot;&quot;&quot;</span>

<span class="s">        Sets the configuration file to be used for inference.</span>

<span class="s">        Intended usage is to use a custom configuration file instead of the autogenerated one.</span>

<span class="s">        This way extra configurations can be added to the component, such as the execution accelerator.</span>

<span class="s">        Args:</span>

<span class="s">            path (Union[Path, str]): The path to the configuration file.</span>

<span class="s">        Raises:</span>

<span class="s">            AssertionError: If the specified config file is not found or has an invalid extension.</span>

<span class="s">        &quot;&quot;&quot;</span>

<span class="w">        </span><span class="nx">path</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">Path</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">is_file</span><span class="p">():</span>

<span class="w">            </span><span class="nx">raise</span><span class="w"> </span><span class="nx">AssertionError</span><span class="p">(</span><span class="nx">f</span><span class="s">&quot;specified config file not found: &#39;{path}&#39;&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">suffix</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s">&quot;.pbtxt&quot;</span><span class="p">:</span>

<span class="w">            </span><span class="nx">raise</span><span class="w"> </span><span class="nx">AssertionError</span><span class="p">(</span><span class="nx">f</span><span class="s">&quot;config file extension is not &#39;.pbtxt&#39;: &#39;{path}&#39;&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="nx">_validate_gpuruntime_config</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>

<span class="w">        </span><span class="kp">self</span><span class="p">.</span><span class="nx">config</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">path</span>

<span class="w">    </span><span class="nx">def</span><span class="w"> </span><span class="nx">save</span><span class="p">(</span><span class="kp">self</span><span class="p">,</span><span class="w"> </span><span class="nx">destination</span><span class="p">:</span><span class="w"> </span><span class="nx">Union</span><span class="p">[</span><span class="nx">Path</span><span class="p">,</span><span class="w"> </span><span class="nx">str</span><span class="p">],</span><span class="w"> </span><span class="nx">validate</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">False</span><span class="p">):</span>

<span class="w">        </span><span class="s">&quot;&quot;&quot;</span>

<span class="s">        Saves the component to a folder structure, so it can be used as part of a pipeline configuration package.</span>

<span class="s">        The component folder contains the following:</span>

<span class="s">        - An `.onnx` model file</span>

<span class="s">        - A `.pbtxt` configuration file</span>

<span class="s">        Args:</span>

<span class="s">            destination (path-like): Target directory to which the component will be saved.</span>

<span class="s">        &quot;&quot;&quot;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="kp">self</span><span class="p">.</span><span class="nx">entrypoint</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">None</span><span class="p">:</span>

<span class="w">            </span><span class="nx">raise</span><span class="w"> </span><span class="nx">AssertionError</span><span class="p">(</span><span class="s">&quot;An ONNX model file must be specified before the component can be saved.&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="nx">component_dir</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">Path</span><span class="p">(</span><span class="nx">destination</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="kp">self</span><span class="p">.</span><span class="nx">name</span>

<span class="w">        </span><span class="nx">component_dir</span><span class="p">.</span><span class="nx">mkdir</span><span class="p">(</span><span class="nx">parents</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">True</span><span class="p">,</span><span class="w"> </span><span class="nx">exist_ok</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">True</span><span class="p">)</span>

<span class="w">        </span><span class="nx">model_dir</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">component_dir</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="kp">self</span><span class="p">.</span><span class="nx">model_version</span>

<span class="w">        </span><span class="nx">model_dir</span><span class="p">.</span><span class="nx">mkdir</span><span class="p">(</span><span class="nx">exist_ok</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">True</span><span class="p">)</span>

<span class="w">        </span><span class="nx">shutil</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="kp">self</span><span class="p">.</span><span class="nx">model_path</span><span class="p">,</span><span class="w"> </span><span class="nx">model_dir</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;model.onnx&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="kp">self</span><span class="p">.</span><span class="nx">config</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">None</span><span class="p">:</span>

<span class="w">            </span><span class="nx">_logger</span><span class="p">.</span><span class="nx">warning</span><span class="p">(</span><span class="s">&quot;Configuration was not specified. Model will be saved with default configuration.&quot;</span><span class="p">)</span>

<span class="w">            </span><span class="p">(</span><span class="nx">component_dir</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;config.pbtxt&quot;</span><span class="p">).</span><span class="nx">write_text</span><span class="p">(</span><span class="nx">f</span><span class="s">&quot;{self.auto_config}&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="k">else</span><span class="p">:</span>

<span class="w">            </span><span class="nx">shutil</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="kp">self</span><span class="p">.</span><span class="nx">config</span><span class="p">,</span><span class="w"> </span><span class="nx">component_dir</span><span class="p">)</span>
</code></pre></div>

</details>
<hr />
<h4 id="ancestors-in-mro">Ancestors (in MRO)</h4>
<ul>
<li>simaticai.deploy.component.Component</li>
</ul>
<h4 id="class-variables">Class variables</h4>
<div class="codehilite"><pre><span></span><code><span class="n">BatchInfo</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">reserved_names</span>
</code></pre></div>

<h4 id="methods">Methods</h4>
<h4 id="add_input">add_input</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_input</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">desc</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span>
</code></pre></div>

<p>Adds a new input to the component with its type.</p>
<p>Name of the variables cannot be reserved name like 'timestamp'.
Input variable 'timestamp' is a prebuilt key in the payload and its value contains the timestamp when the payload is created by AI Inference Server.</p>
<p>Types supported by AI Inference Server version 1.6 are contained in the <code>type_dictionary</code>. Newer AI Inference server version may support additional types.
In case the type is not known by the AI SDK, a warning message will be printed.
The most frequently used types are
- String:
    Typically used for data received from Databus
- Object:
    Object type variables are designed to receive from Vision Connect or transfer images between components
- Numeric scalar types:
    Typically used for data received from S7 Connector</p>
<p>The example payload below shows the format of image received from VCA Connector</p>
<div class="codehilite"><pre><span></span><code>    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;image&quot;</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="s2">&quot;resolutionWidth&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
            <span class="s2">&quot;resolutionHeight&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
            <span class="s2">&quot;mimeType&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;image/raw&quot;</span><span class="p">],</span>
            <span class="s2">&quot;dataType&quot;</span><span class="p">:</span> <span class="s2">&quot;uint8&quot;</span><span class="p">,</span>
            <span class="s2">&quot;channelsPerPixel&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="n">_swap_bytes</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">tobytes</span><span class="p">())</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div>

<p>Between components the format is the same format as the format of Object as an output.</p>
<div class="codehilite"><pre><span></span><code>    <span class="s2">&quot;processedImage&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span> <span class="p">{</span>
                        <span class="s2">&quot;resolutionWidth&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
                        <span class="s2">&quot;resolutionHeight&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">height</span>
                        <span class="p">}</span>
                    <span class="p">),</span>
        <span class="s2">&quot;bytes&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">tobytes</span><span class="p">()</span>
    <span class="p">}</span>
</code></pre></div>

<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>str</td>
<td>Name of the new input.</td>
<td>None</td>
</tr>
<tr>
<td>_type</td>
<td>str</td>
<td>Type of the new input.</td>
<td>None</td>
</tr>
<tr>
<td>desc</td>
<td>str</td>
<td>Description of the input. (optional)</td>
<td>None</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">add_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="nb">str</span><span class="p">,</span><span class="w"> </span><span class="n">_type</span><span class="p">:</span><span class="w"> </span><span class="nb">str</span><span class="p">,</span><span class="w"> </span><span class="n">desc</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Adds a new input to the component with its type.</span>

<span class="sd">        Name of the variables cannot be reserved name like &#39;timestamp&#39;.</span>

<span class="sd">        Input variable &#39;timestamp&#39; is a prebuilt key in the payload and its value contains the timestamp when the payload is created by AI Inference Server.</span>

<span class="sd">        Types supported by AI Inference Server version 1.6 are contained in the `type_dictionary`. Newer AI Inference server version may support additional types.</span>

<span class="sd">        In case the type is not known by the AI SDK, a warning message will be printed.</span>

<span class="sd">        The most frequently used types are</span>

<span class="sd">        - String:</span>

<span class="sd">            Typically used for data received from Databus</span>

<span class="sd">        - Object:</span>

<span class="sd">            Object type variables are designed to receive from Vision Connect or transfer images between components</span>

<span class="sd">        - Numeric scalar types:</span>

<span class="sd">            Typically used for data received from S7 Connector</span>

<span class="sd">        The example payload below shows the format of image received from VCA Connector</span>

<span class="sd">        ```python</span>

<span class="sd">            payload = { &quot;image&quot;:</span>

<span class="sd">                {</span>

<span class="sd">                    &quot;resolutionWidth&quot;: image.width,</span>

<span class="sd">                    &quot;resolutionHeight&quot;: image.height,</span>

<span class="sd">                    &quot;mimeType&quot;: [&quot;image/raw&quot;],</span>

<span class="sd">                    &quot;dataType&quot;: &quot;uint8&quot;,</span>

<span class="sd">                    &quot;channelsPerPixel&quot;: 3,</span>

<span class="sd">                    &quot;image&quot;: _swap_bytes(image.tobytes())</span>

<span class="sd">                }</span>

<span class="sd">            }</span>

<span class="sd">        ```</span>

<span class="sd">        Between components the format is the same format as the format of Object as an output.</span>

<span class="sd">        ```python</span>

<span class="sd">            &quot;processedImage&quot;: {</span>

<span class="sd">                &quot;metadata&quot;: json.dumps( {</span>

<span class="sd">                                &quot;resolutionWidth&quot;: image.width,</span>

<span class="sd">                                &quot;resolutionHeight&quot;: image.height</span>

<span class="sd">                                }</span>

<span class="sd">                            ),</span>

<span class="sd">                &quot;bytes&quot;: image.tobytes()</span>

<span class="sd">            }</span>

<span class="sd">        ```</span>

<span class="sd">        Args:</span>

<span class="sd">            name (str): Name of the new input.</span>

<span class="sd">            _type (str): Type of the new input.</span>

<span class="sd">            desc (str): Description of the input. (optional)</span>

<span class="sd">        &quot;&quot;&quot;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">None</span><span class="p">:</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>

<span class="w">            </span><span class="n">raise</span><span class="w"> </span><span class="n">AssertionError</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Input &#39;{name}&#39; already exists.&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">reserved_names</span><span class="p">:</span>

<span class="w">            </span><span class="n">raise</span><span class="w"> </span><span class="n">AssertionError</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Input &#39;{name}&#39; is a reserved keyword.&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">_type</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">supported_types</span><span class="p">:</span>

<span class="w">            </span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;WARNING! Unknown type &#39;{_type}&#39; for input variable &#39;{name}&#39;. Please check if the target Inference Server supports this type.&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>

<span class="w">            </span><span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">_type</span><span class="p">,</span>

<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">desc</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">None</span><span class="p">:</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s1">&#39;desc&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">desc</span>
</code></pre></div>

</details>
<h4 id="add_output">add_output</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_output</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">desc</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span>
</code></pre></div>

<p>Adds a new output to the component.</p>
<p>Types supported by AI Inference Server version 1.6 are contained in the <code>type_dictionary</code>. Newer AI Inference server version may support additional types.
In case the type is not known by the AI SDK, a warning message will be printed.
The most frequently used types are
- String:
    Typically used for data to be sent to Databus
- Object:
    Typically used for images to be sent to ZMQ Connector
- Numeric scalar types:
    Typically used for data sent to S7 Connector</p>
<p>For outputs of type <code>Object</code> the entrypoint must return with a <code>dictionary</code> containing two fields, where one field has type <code>str</code> and the other field has type <code>bytes</code>.
The example below shows the required format, assuming that 'image' is a PIL Image.</p>
<div class="codehilite"><pre><span></span><code>    <span class="s2">&quot;processedImage&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span> <span class="p">{</span>
                        <span class="s2">&quot;resolutionWidth&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
                        <span class="s2">&quot;resolutionHeight&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">height</span>
                        <span class="p">}</span>
                    <span class="p">),</span>
        <span class="s2">&quot;bytes&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">tobytes</span><span class="p">()</span>
    <span class="p">}</span>
</code></pre></div>

<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>str</td>
<td>Name of the new output.</td>
<td>None</td>
</tr>
<tr>
<td>_type</td>
<td>str</td>
<td>Type of the new output.</td>
<td>None</td>
</tr>
<tr>
<td>desc</td>
<td>str</td>
<td>Description of the output. (optional)</td>
<td>None</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">add_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="nb">str</span><span class="p">,</span><span class="w"> </span><span class="n">_type</span><span class="p">:</span><span class="w"> </span><span class="nb">str</span><span class="p">,</span><span class="w"> </span><span class="n">desc</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Adds a new output to the component.</span>

<span class="sd">        Types supported by AI Inference Server version 1.6 are contained in the `type_dictionary`. Newer AI Inference server version may support additional types.</span>

<span class="sd">        In case the type is not known by the AI SDK, a warning message will be printed.</span>

<span class="sd">        The most frequently used types are</span>

<span class="sd">        - String:</span>

<span class="sd">            Typically used for data to be sent to Databus</span>

<span class="sd">        - Object:</span>

<span class="sd">            Typically used for images to be sent to ZMQ Connector</span>

<span class="sd">        - Numeric scalar types:</span>

<span class="sd">            Typically used for data sent to S7 Connector</span>

<span class="sd">        For outputs of type `Object` the entrypoint must return with a `dictionary` containing two fields, where one field has type `str` and the other field has type `bytes`.</span>

<span class="sd">        The example below shows the required format, assuming that &#39;image&#39; is a PIL Image.</span>

<span class="sd">        ```python</span>

<span class="sd">            &quot;processedImage&quot;: {</span>

<span class="sd">                &quot;metadata&quot;: json.dumps( {</span>

<span class="sd">                                &quot;resolutionWidth&quot;: image.width,</span>

<span class="sd">                                &quot;resolutionHeight&quot;: image.height</span>

<span class="sd">                                }</span>

<span class="sd">                            ),</span>

<span class="sd">                &quot;bytes&quot;: image.tobytes()</span>

<span class="sd">            }</span>

<span class="sd">        ```</span>

<span class="sd">        Args:</span>

<span class="sd">            name (str): Name of the new output.</span>

<span class="sd">            _type (str): Type of the new output.</span>

<span class="sd">            desc (str): Description of the output. (optional)</span>

<span class="sd">        &quot;&quot;&quot;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">None</span><span class="p">:</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">:</span>

<span class="w">            </span><span class="n">raise</span><span class="w"> </span><span class="n">AssertionError</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Output &#39;{name}&#39; already exists&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">reserved_names</span><span class="p">:</span>

<span class="w">            </span><span class="n">raise</span><span class="w"> </span><span class="n">AssertionError</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Output &#39;{name}&#39; is a reserved keyword.&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">_type</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">supported_types</span><span class="p">:</span>

<span class="w">            </span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;WARNING! Unknown type &#39;{_type}&#39; for input variable &#39;{name}&#39;. Please check if the target Inference Server supports this type.&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>

<span class="w">            </span><span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">_type</span><span class="p">,</span>

<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">desc</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">None</span><span class="p">:</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s1">&#39;desc&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">desc</span>
</code></pre></div>

</details>
<h4 id="change_input">change_input</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">change_input</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">desc</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span>
</code></pre></div>

<p>Changes one of the inputs of the component.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>str</td>
<td>Name of the input to be changed.</td>
<td>None</td>
</tr>
<tr>
<td>_type</td>
<td>str</td>
<td>New type of the input.</td>
<td>None</td>
</tr>
<tr>
<td>desc</td>
<td>str</td>
<td>Description of the input. (optional)</td>
<td>None</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">change_input</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="nf">str</span><span class="p">,</span><span class="w"> </span><span class="nl">_type</span><span class="p">:</span><span class="w"> </span><span class="nf">str</span><span class="p">,</span><span class="w"> </span><span class="k">desc</span><span class="err">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">str</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">)</span><span class="err">:</span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot;</span>

<span class="ss">        Changes one of the inputs of the component.</span>

<span class="ss">        Args:</span>

<span class="ss">            name (str): Name of the input to be changed.</span>

<span class="ss">            _type (str): New type of the input.</span>

<span class="ss">            desc (str): Description of the input. (optional)</span>

<span class="ss">        &quot;&quot;&quot;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">inputs</span><span class="p">:</span>

<span class="w">            </span><span class="n">raise</span><span class="w"> </span><span class="n">AssertionError</span><span class="p">(</span><span class="n">f</span><span class="ss">&quot;There is no input with name &#39;{name}&#39;&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">_type</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nl">supported_types</span><span class="p">:</span>

<span class="w">            </span><span class="n">_logger</span><span class="p">.</span><span class="n">warning</span><span class="p">(</span><span class="n">f</span><span class="ss">&quot;WARNING! Unknown type &#39;{_type}&#39; for input variable &#39;{name}&#39;. Please check if the target Inference Server supports this type.&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">inputs</span><span class="o">[</span><span class="n">name</span><span class="o">][</span><span class="n">&#39;type&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_type</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="k">None</span><span class="err">:</span>

<span class="w">            </span><span class="n">self</span><span class="p">.</span><span class="n">inputs</span><span class="o">[</span><span class="n">name</span><span class="o">][</span><span class="n">&#39;desc&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">desc</span>
</code></pre></div>

</details>
<h4 id="change_output">change_output</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">change_output</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">desc</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span>
</code></pre></div>

<p>Changes one of the outputs of the component.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>str</td>
<td>Name of the output to be changed.</td>
<td>None</td>
</tr>
<tr>
<td>_type</td>
<td>str</td>
<td>The new type of the output.</td>
<td>None</td>
</tr>
<tr>
<td>desc</td>
<td>str</td>
<td>Description of the output. (optional)</td>
<td>None</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">change_output</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="nf">str</span><span class="p">,</span><span class="w"> </span><span class="nl">_type</span><span class="p">:</span><span class="w"> </span><span class="nf">str</span><span class="p">,</span><span class="w"> </span><span class="k">desc</span><span class="err">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">str</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">)</span><span class="err">:</span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot;</span>

<span class="ss">        Changes one of the outputs of the component.</span>

<span class="ss">        Args:</span>

<span class="ss">            name (str): Name of the output to be changed.</span>

<span class="ss">            _type (str): The new type of the output.</span>

<span class="ss">            desc (str): Description of the output. (optional)</span>

<span class="ss">        &quot;&quot;&quot;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">outputs</span><span class="p">:</span>

<span class="w">            </span><span class="n">raise</span><span class="w"> </span><span class="n">AssertionError</span><span class="p">(</span><span class="n">f</span><span class="ss">&quot;There is no output with name &#39;{name}&#39;&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">_type</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nl">supported_types</span><span class="p">:</span>

<span class="w">            </span><span class="n">_logger</span><span class="p">.</span><span class="n">warning</span><span class="p">(</span><span class="n">f</span><span class="ss">&quot;WARNING! Unknown type &#39;{_type}&#39; for input variable &#39;{name}&#39;. Please check if the target Inference Server supports this type.&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">outputs</span><span class="o">[</span><span class="n">name</span><span class="o">][</span><span class="n">&#39;type&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_type</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="k">None</span><span class="err">:</span>

<span class="w">            </span><span class="n">self</span><span class="p">.</span><span class="n">inputs</span><span class="o">[</span><span class="n">name</span><span class="o">][</span><span class="n">&#39;desc&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">desc</span>
</code></pre></div>

</details>
<h4 id="delete_input">delete_input</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">delete_input</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span>
</code></pre></div>

<p>Deletes an input from the component by name.</p>
<p>Once the package has been created with the given component, it is recommended not to change the component directly.
Instead, all necessary methods to change it are available through the package to avoid component inconsistencies.
It is recommended to use <code>package.delete_input_wire(...)</code> with default parameter <code>with_input=True</code>.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>str</td>
<td>Name of the input to be deleted.</td>
<td>None</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="nx">def</span><span class="w"> </span><span class="nx">delete_input</span><span class="p">(</span><span class="kp">self</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">str</span><span class="p">):</span>

<span class="w">        </span><span class="s">&quot;&quot;&quot;</span>

<span class="s">        Deletes an input from the component by name.</span>

<span class="s">        Once the package has been created with the given component, it is recommended not to change the component directly.</span>

<span class="s">        Instead, all necessary methods to change it are available through the package to avoid component inconsistencies.</span>

<span class="s">        It is recommended to use `package.delete_input_wire(...)` with default parameter `with_input=True`.</span>

<span class="s">        Args:</span>

<span class="s">            name (str): Name of the input to be deleted.</span>

<span class="s">        &quot;&quot;&quot;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kp">self</span><span class="p">.</span><span class="nx">inputs</span><span class="p">:</span>

<span class="w">            </span><span class="nx">raise</span><span class="w"> </span><span class="nx">AssertionError</span><span class="p">(</span><span class="nx">f</span><span class="s">&quot;Component &#39;{self.name}&#39; has no input &#39;{name}&#39;&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="kp">self</span><span class="p">.</span><span class="nx">inputs</span><span class="p">.</span><span class="nx">pop</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>
</code></pre></div>

</details>
<h4 id="delete_output">delete_output</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">delete_output</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span>
</code></pre></div>

<p>Deletes an output from the component by name.</p>
<p>Once the package has been created with the given component, it is recommended not to change the component directly.
Instead, all necessary methods to change it are available through the package to avoid component inconsistencies.
Deleting an output which is represented in any wire will cause package inconsistency.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>str</td>
<td>Name of the output to be deleted.</td>
<td>None</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="nx">def</span><span class="w"> </span><span class="nx">delete_output</span><span class="p">(</span><span class="kp">self</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">str</span><span class="p">):</span>

<span class="w">        </span><span class="s">&quot;&quot;&quot;</span>

<span class="s">        Deletes an output from the component by name.</span>

<span class="s">        Once the package has been created with the given component, it is recommended not to change the component directly.</span>

<span class="s">        Instead, all necessary methods to change it are available through the package to avoid component inconsistencies.</span>

<span class="s">        Deleting an output which is represented in any wire will cause package inconsistency.</span>

<span class="s">        Args:</span>

<span class="s">            name (str): Name of the output to be deleted.</span>

<span class="s">        &quot;&quot;&quot;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kp">self</span><span class="p">.</span><span class="nx">outputs</span><span class="p">:</span>

<span class="w">            </span><span class="nx">raise</span><span class="w"> </span><span class="nx">AssertionError</span><span class="p">(</span><span class="nx">f</span><span class="s">&quot;Component &#39;{self.name}&#39; has no output &#39;{name}&#39;&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="kp">self</span><span class="p">.</span><span class="nx">outputs</span><span class="p">.</span><span class="nx">pop</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>
</code></pre></div>

</details>
<h4 id="save">save</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">destination</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">validate</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
</code></pre></div>

<p>Saves the component to a folder structure, so it can be used as part of a pipeline configuration package.</p>
<p>The component folder contains the following:</p>
<ul>
<li>An <code>.onnx</code> model file</li>
<li>A <code>.pbtxt</code> configuration file</li>
</ul>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>destination</td>
<td>path-like</td>
<td>Target directory to which the component will be saved.</td>
<td>None</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="nx">def</span><span class="w"> </span><span class="nx">save</span><span class="p">(</span><span class="kp">self</span><span class="p">,</span><span class="w"> </span><span class="nx">destination</span><span class="p">:</span><span class="w"> </span><span class="nx">Union</span><span class="p">[</span><span class="nx">Path</span><span class="p">,</span><span class="w"> </span><span class="nx">str</span><span class="p">],</span><span class="w"> </span><span class="nx">validate</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">False</span><span class="p">):</span>

<span class="w">        </span><span class="s">&quot;&quot;&quot;</span>

<span class="s">        Saves the component to a folder structure, so it can be used as part of a pipeline configuration package.</span>

<span class="s">        The component folder contains the following:</span>

<span class="s">        - An `.onnx` model file</span>

<span class="s">        - A `.pbtxt` configuration file</span>

<span class="s">        Args:</span>

<span class="s">            destination (path-like): Target directory to which the component will be saved.</span>

<span class="s">        &quot;&quot;&quot;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="kp">self</span><span class="p">.</span><span class="nx">entrypoint</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">None</span><span class="p">:</span>

<span class="w">            </span><span class="nx">raise</span><span class="w"> </span><span class="nx">AssertionError</span><span class="p">(</span><span class="s">&quot;An ONNX model file must be specified before the component can be saved.&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="nx">component_dir</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">Path</span><span class="p">(</span><span class="nx">destination</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="kp">self</span><span class="p">.</span><span class="nx">name</span>

<span class="w">        </span><span class="nx">component_dir</span><span class="p">.</span><span class="nx">mkdir</span><span class="p">(</span><span class="nx">parents</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">True</span><span class="p">,</span><span class="w"> </span><span class="nx">exist_ok</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">True</span><span class="p">)</span>

<span class="w">        </span><span class="nx">model_dir</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">component_dir</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="kp">self</span><span class="p">.</span><span class="nx">model_version</span>

<span class="w">        </span><span class="nx">model_dir</span><span class="p">.</span><span class="nx">mkdir</span><span class="p">(</span><span class="nx">exist_ok</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">True</span><span class="p">)</span>

<span class="w">        </span><span class="nx">shutil</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="kp">self</span><span class="p">.</span><span class="nx">model_path</span><span class="p">,</span><span class="w"> </span><span class="nx">model_dir</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;model.onnx&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="kp">self</span><span class="p">.</span><span class="nx">config</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">None</span><span class="p">:</span>

<span class="w">            </span><span class="nx">_logger</span><span class="p">.</span><span class="nx">warning</span><span class="p">(</span><span class="s">&quot;Configuration was not specified. Model will be saved with default configuration.&quot;</span><span class="p">)</span>

<span class="w">            </span><span class="p">(</span><span class="nx">component_dir</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;config.pbtxt&quot;</span><span class="p">).</span><span class="nx">write_text</span><span class="p">(</span><span class="nx">f</span><span class="s">&quot;{self.auto_config}&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="k">else</span><span class="p">:</span>

<span class="w">            </span><span class="nx">shutil</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="kp">self</span><span class="p">.</span><span class="nx">config</span><span class="p">,</span><span class="w"> </span><span class="nx">component_dir</span><span class="p">)</span>
</code></pre></div>

</details>
<h4 id="use_config">use_config</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">use_config</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
<span class="p">)</span>
</code></pre></div>

<p>Sets the configuration file to be used for inference.</p>
<p>Intended usage is to use a custom configuration file instead of the autogenerated one.
This way extra configurations can be added to the component, such as the execution accelerator.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>path</td>
<td>Union[Path, str]</td>
<td>The path to the configuration file.</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>Raises:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>AssertionError</td>
<td>If the specified config file is not found or has an invalid extension.</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code>    def use_config(self, path: Union[Path, str]):

        &quot;&quot;&quot;

        Sets the configuration file to be used for inference.

        Intended usage is to use a custom configuration file instead of the autogenerated one.

        This way extra configurations can be added to the component, such as the execution accelerator.

        Args:

            path (Union[Path, str]): The path to the configuration file.

        Raises:

            AssertionError: If the specified config file is not found or has an invalid extension.

        &quot;&quot;&quot;

        path = Path(path)

        if not path.is_file():

            raise AssertionError(f&quot;specified config file not found: &#39;{path}&#39;&quot;)

        if path.suffix != &quot;.pbtxt&quot;:

            raise AssertionError(f&quot;config file extension is not &#39;.pbtxt&#39;: &#39;{path}&#39;&quot;)

        _validate_gpuruntime_config(path)

        self.config = path
</code></pre></div>

</details>
<h4 id="use_model">use_model</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">use_model</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">max_batch_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">optimization</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">simaticai</span><span class="o">.</span><span class="n">helpers</span><span class="o">.</span><span class="n">model_config</span><span class="o">.</span><span class="n">TensorRTOptimization</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">warmup</span><span class="p">:</span> <span class="n">simaticai</span><span class="o">.</span><span class="n">helpers</span><span class="o">.</span><span class="n">model_config</span><span class="o">.</span><span class="n">Warmup</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span>
</code></pre></div>

<p>Add the ONNX model file for the component.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>path</td>
<td>Union[Path, str]</td>
<td>The path to the ONNX model file.</td>
<td>None</td>
</tr>
<tr>
<td>max_batch_size</td>
<td>int</td>
<td>The maximum batch size for the model.</td>
<td>None</td>
</tr>
<tr>
<td>optimization</td>
<td>model_config.TensorRTOptimization</td>
<td>The optimization configuration for the model. Defaults to None.</td>
<td>None</td>
</tr>
<tr>
<td>warmup</td>
<td>model_config.Warmup</td>
<td>The warmup configuration for the model. Defaults to None.</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>Raises:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>AssertionError</td>
<td>If the specified model file is not found, has an invalid extension, or if max_batch_size is less than 0.</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">use_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">path</span><span class="p">:</span><span class="w"> </span><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span><span class="w"> </span><span class="nb">str</span><span class="p">],</span>

<span class="w">                  </span><span class="n">max_batch_size</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="p">,</span>

<span class="w">                  </span><span class="n">optimization</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">model_config</span><span class="o">.</span><span class="n">TensorRTOptimization</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="p">,</span>

<span class="w">                  </span><span class="n">warmup</span><span class="p">:</span><span class="w"> </span><span class="n">model_config</span><span class="o">.</span><span class="n">Warmup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Add the ONNX model file for the component.</span>

<span class="sd">        Args:</span>

<span class="sd">            path (Union[Path, str]): The path to the ONNX model file.</span>

<span class="sd">            max_batch_size (int): The maximum batch size for the model.</span>

<span class="sd">            optimization (model_config.TensorRTOptimization, optional): The optimization configuration for the model. Defaults to None.</span>

<span class="sd">            warmup (model_config.Warmup, optional): The warmup configuration for the model. Defaults to None.</span>

<span class="sd">        Raises:</span>

<span class="sd">            AssertionError: If the specified model file is not found, has an invalid extension, or if max_batch_size is less than 0.</span>

<span class="sd">        &quot;&quot;&quot;</span>

<span class="w">        </span><span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>

<span class="w">            </span><span class="n">raise</span><span class="w"> </span><span class="n">AssertionError</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;specified model file not found: &#39;{path}&#39;&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">path</span><span class="o">.</span><span class="n">suffix</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s2">&quot;.onnx&quot;</span><span class="p">:</span>

<span class="w">            </span><span class="n">raise</span><span class="w"> </span><span class="n">AssertionError</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;model file extension is not &#39;.onnx&#39;: &#39;{path}&#39;&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">max_batch_size</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">:</span>

<span class="w">            </span><span class="n">raise</span><span class="w"> </span><span class="n">AssertionError</span><span class="p">(</span><span class="s2">&quot;max_batch_size must be greater or equal to 0&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">entrypoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;model.onnx&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">model_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">None</span><span class="p">:</span>

<span class="w">            </span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Previously added configuration was removed. Component will use the default configuration unless you specify your own.&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span>

<span class="w">        </span><span class="c1"># Remove old automatic variables</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">auto_config</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">None</span><span class="p">:</span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">auto_config</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>

<span class="w">                </span><span class="bp">self</span><span class="o">.</span><span class="n">delete_input</span><span class="p">(</span><span class="k">var</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">auto_config</span><span class="o">.</span><span class="n">outputs</span><span class="p">:</span>

<span class="w">                </span><span class="bp">self</span><span class="o">.</span><span class="n">delete_output</span><span class="p">(</span><span class="k">var</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>

<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">auto_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">model_config</span><span class="o">.</span><span class="n">ModelConfig</span><span class="p">(</span><span class="n">onnx_path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>

<span class="w">                                                    </span><span class="n">max_batch_size</span><span class="o">=</span><span class="n">max_batch_size</span><span class="p">,</span>

<span class="w">                                                    </span><span class="n">warmup</span><span class="o">=</span><span class="n">warmup</span><span class="p">,</span>

<span class="w">                                                    </span><span class="n">optimization</span><span class="o">=</span><span class="n">optimization</span><span class="p">)</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">auto_config</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="k">var</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span><span class="w"> </span><span class="k">var</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">])</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">auto_config</span><span class="o">.</span><span class="n">outputs</span><span class="p">:</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="k">var</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span><span class="w"> </span><span class="k">var</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">])</span>
</code></pre></div>

</details>
<h4 id="validate">validate</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">validate</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span>
</code></pre></div>

<p>Empty method for child classess to implement.</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="nx">def</span><span class="w"> </span><span class="nx">validate</span><span class="p">(</span><span class="kp">self</span><span class="p">):</span>

<span class="w">        </span><span class="s">&quot;&quot;&quot;</span>

<span class="s">        Empty method for child classess to implement.</span>

<span class="s">        &quot;&quot;&quot;</span>

<span class="w">        </span><span class="nx">pass</span>
</code></pre></div>

</details>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="component.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Component" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Component
            </div>
          </div>
        </a>
      
      
        
        <a href="index.html" class="md-footer__link md-footer__link--next" aria-label="Next: Index" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Index
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright (C) Siemens AG 2021. All Rights Reserved.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.48f2be22.min.js"></script>
      
    
  </body>
</html>