
<!doctype html>
<!-- 
  SPDX-FileCopyrightText: Copyright 2024 Siemens AG
  SPDX-License-Identifier: MIT
-->
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../favicon.ico">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.5.0">
    
    
      
        <title>Reporter - AI Software Development Kit</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.2e8b5541.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../styles.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#module-simaticaihelpersreporter" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../index.html" title="AI Software Development Kit" class="md-header__button md-logo" aria-label="AI Software Development Kit" data-md-component="logo">
      
  <img src="../../../Sie_logo_white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AI Software Development Kit
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Reporter
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../index.html" title="AI Software Development Kit" class="md-nav__button md-logo" aria-label="AI Software Development Kit" data-md-component="logo">
      
  <img src="../../../Sie_logo_white.svg" alt="logo">

    </a>
    AI Software Development Kit
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../CHANGELOG.html" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../user_manual.html" class="md-nav__link">
        User Manual
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_1">
          Log Module
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Log Module" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          Log Module
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../log_module/index.html" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../log_module/mock_logger.html" class="md-nav__link">
        Mock Logger
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2">
          Simaticai
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Simaticai" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Simaticai
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deployment.html" class="md-nav__link">
        Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../model_config_pb2.html" class="md-nav__link">
        Model Config Pb2
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_4" type="checkbox" id="__nav_4_2_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2_4">
          Data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data" data-md-level="3">
        <label class="md-nav__title" for="__nav_4_2_4">
          <span class="md-nav__icon md-icon"></span>
          Data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data/index.html" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data/schemas.html" class="md-nav__link">
        Schemas
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_5" type="checkbox" id="__nav_4_2_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2_5">
          Deploy
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Deploy" data-md-level="3">
        <label class="md-nav__title" for="__nav_4_2_5">
          <span class="md-nav__icon md-icon"></span>
          Deploy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deploy/component.html" class="md-nav__link">
        Component
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deploy/gpuruntime_component.html" class="md-nav__link">
        Gpuruntime Component
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deploy/index.html" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deploy/pipeline.html" class="md-nav__link">
        Pipeline
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deploy/pipeline_data.html" class="md-nav__link">
        Pipeline Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deploy/pipeline_page.html" class="md-nav__link">
        Pipeline Page
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deploy/python_component.html" class="md-nav__link">
        Python Component
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_6" type="checkbox" id="__nav_4_2_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2_6">
          Helpers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Helpers" data-md-level="3">
        <label class="md-nav__title" for="__nav_4_2_6">
          <span class="md-nav__icon md-icon"></span>
          Helpers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="model_config.html" class="md-nav__link">
        Model Config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="pep508.html" class="md-nav__link">
        Pep508
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Reporter
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="reporter.html" class="md-nav__link md-nav__link--active">
        Reporter
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    Variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pipelinereportwriter" class="md-nav__link">
    PipelineReportWriter
  </a>
  
    <nav class="md-nav" aria-label="PipelineReportWriter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#static-methods" class="md-nav__link">
    Static methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transform_package_name" class="md-nav__link">
    transform_package_name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_direct_dependencies" class="md-nav__link">
    add_direct_dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_full_dependency_set" class="md-nav__link">
    add_full_dependency_set
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_warning" class="md-nav__link">
    add_warning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set_path" class="md-nav__link">
    set_path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set_pipeline_config" class="md-nav__link">
    set_pipeline_config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#write_report" class="md-nav__link">
    write_report
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pipelinerunnerreportwriter" class="md-nav__link">
    PipelineRunnerReportWriter
  </a>
  
    <nav class="md-nav" aria-label="PipelineRunnerReportWriter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro_1" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#static-methods_1" class="md-nav__link">
    Static methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#format_size" class="md-nav__link">
    format_size
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods_1" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_installed_packages" class="md-nav__link">
    add_installed_packages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_warning_1" class="md-nav__link">
    add_warning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set_input_payload_length" class="md-nav__link">
    set_input_payload_length
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set_output_payload_length" class="md-nav__link">
    set_output_payload_length
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set_package_zip_path" class="md-nav__link">
    set_package_zip_path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set_path_1" class="md-nav__link">
    set_path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#write_report_1" class="md-nav__link">
    write_report
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reportwriter" class="md-nav__link">
    ReportWriter
  </a>
  
    <nav class="md-nav" aria-label="ReportWriter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#descendants" class="md-nav__link">
    Descendants
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods_2" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_warning_2" class="md-nav__link">
    add_warning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set_path_2" class="md-nav__link">
    set_path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#write_report_2" class="md-nav__link">
    write_report
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reportwriterhandler" class="md-nav__link">
    ReportWriterHandler
  </a>
  
    <nav class="md-nav" aria-label="ReportWriterHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro_2" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-variables" class="md-nav__link">
    Instance variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods_3" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acquire" class="md-nav__link">
    acquire
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addfilter" class="md-nav__link">
    addFilter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#close" class="md-nav__link">
    close
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createlock" class="md-nav__link">
    createLock
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#emit" class="md-nav__link">
    emit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filter" class="md-nav__link">
    filter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flush" class="md-nav__link">
    flush
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#format" class="md-nav__link">
    format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_name" class="md-nav__link">
    get_name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handle" class="md-nav__link">
    handle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handleerror" class="md-nav__link">
    handleError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#release" class="md-nav__link">
    release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removefilter" class="md-nav__link">
    removeFilter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setformatter" class="md-nav__link">
    setFormatter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setlevel" class="md-nav__link">
    setLevel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set_name" class="md-nav__link">
    set_name
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ziptreeelement" class="md-nav__link">
    ZipTreeElement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tempfiles.html" class="md-nav__link">
        Tempfiles
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="yaml_helper.html" class="md-nav__link">
        Yaml Helper
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_7" type="checkbox" id="__nav_4_2_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2_7">
          Packaging
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Packaging" data-md-level="3">
        <label class="md-nav__title" for="__nav_4_2_7">
          <span class="md-nav__icon md-icon"></span>
          Packaging
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../packaging/constants.html" class="md-nav__link">
        Constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../packaging/index.html" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../packaging/python_dependencies.html" class="md-nav__link">
        Python Dependencies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../packaging/wheelhouse.html" class="md-nav__link">
        Wheelhouse
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_8" type="checkbox" id="__nav_4_2_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2_8">
          Testing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Testing" data-md-level="3">
        <label class="md-nav__title" for="__nav_4_2_8">
          <span class="md-nav__icon md-icon"></span>
          Testing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/component_runner.html" class="md-nav__link">
        Component Runner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/data_stream.html" class="md-nav__link">
        Data Stream
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/docker_venv.html" class="md-nav__link">
        Docker Venv
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/index.html" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/pipeline_runner.html" class="md-nav__link">
        Pipeline Runner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/pipeline_validator.html" class="md-nav__link">
        Pipeline Validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/run_component.html" class="md-nav__link">
        Run Component
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/run_gpuruntime_component.html" class="md-nav__link">
        Run Gpuruntime Component
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/runner_config.html" class="md-nav__link">
        Runner Config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/timeseries_stream.html" class="md-nav__link">
        Timeseries Stream
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/vca_stream.html" class="md-nav__link">
        Vca Stream
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    Variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pipelinereportwriter" class="md-nav__link">
    PipelineReportWriter
  </a>
  
    <nav class="md-nav" aria-label="PipelineReportWriter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#static-methods" class="md-nav__link">
    Static methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transform_package_name" class="md-nav__link">
    transform_package_name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_direct_dependencies" class="md-nav__link">
    add_direct_dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_full_dependency_set" class="md-nav__link">
    add_full_dependency_set
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_warning" class="md-nav__link">
    add_warning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set_path" class="md-nav__link">
    set_path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set_pipeline_config" class="md-nav__link">
    set_pipeline_config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#write_report" class="md-nav__link">
    write_report
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pipelinerunnerreportwriter" class="md-nav__link">
    PipelineRunnerReportWriter
  </a>
  
    <nav class="md-nav" aria-label="PipelineRunnerReportWriter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro_1" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#static-methods_1" class="md-nav__link">
    Static methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#format_size" class="md-nav__link">
    format_size
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods_1" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_installed_packages" class="md-nav__link">
    add_installed_packages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_warning_1" class="md-nav__link">
    add_warning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set_input_payload_length" class="md-nav__link">
    set_input_payload_length
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set_output_payload_length" class="md-nav__link">
    set_output_payload_length
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set_package_zip_path" class="md-nav__link">
    set_package_zip_path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set_path_1" class="md-nav__link">
    set_path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#write_report_1" class="md-nav__link">
    write_report
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reportwriter" class="md-nav__link">
    ReportWriter
  </a>
  
    <nav class="md-nav" aria-label="ReportWriter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#descendants" class="md-nav__link">
    Descendants
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods_2" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_warning_2" class="md-nav__link">
    add_warning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set_path_2" class="md-nav__link">
    set_path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#write_report_2" class="md-nav__link">
    write_report
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reportwriterhandler" class="md-nav__link">
    ReportWriterHandler
  </a>
  
    <nav class="md-nav" aria-label="ReportWriterHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro_2" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-variables" class="md-nav__link">
    Instance variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods_3" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acquire" class="md-nav__link">
    acquire
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addfilter" class="md-nav__link">
    addFilter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#close" class="md-nav__link">
    close
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createlock" class="md-nav__link">
    createLock
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#emit" class="md-nav__link">
    emit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filter" class="md-nav__link">
    filter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flush" class="md-nav__link">
    flush
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#format" class="md-nav__link">
    format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_name" class="md-nav__link">
    get_name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handle" class="md-nav__link">
    handle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handleerror" class="md-nav__link">
    handleError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#release" class="md-nav__link">
    release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removefilter" class="md-nav__link">
    removeFilter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setformatter" class="md-nav__link">
    setFormatter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setlevel" class="md-nav__link">
    setLevel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set_name" class="md-nav__link">
    set_name
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ziptreeelement" class="md-nav__link">
    ZipTreeElement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="module-simaticaihelpersreporter">Module simaticai.helpers.reporter</h1>
<p>Classes to generate a report for a dataflow pipeline and local pipeline runner.</p>
<p>None</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="c1"># Copyright (C) Siemens AG 2025. All Rights Reserved. Confidential.</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="sd">Classes to generate a report for a dataflow pipeline and local pipeline runner.</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">zipfile</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">io</span>

<span class="n">WARNINGS_HEADLINE</span> <span class="o">=</span> <span class="s2">&quot;## Warnings</span><span class="se">\n\n</span><span class="s2">&quot;</span>

<span class="n">WARNING_LINE</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{name}</span><span class="s2">:</span><span class="si">{filename}</span><span class="s2">:</span><span class="si">{line_number}</span><span class="s2"> (W) </span><span class="si">{warning_msg}</span><span class="se">\n\n</span><span class="s2">&quot;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ReportWriter</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    Base class for report writers.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">report_path</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">warnings_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">report_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">report_path</span> <span class="o">=</span> <span class="n">report_path</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">line_number</span><span class="p">,</span> <span class="n">warning_msg</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">warnings_text</span> <span class="o">+=</span> <span class="n">WARNING_LINE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">line_number</span><span class="o">=</span><span class="n">line_number</span><span class="p">,</span> <span class="n">warning_msg</span><span class="o">=</span><span class="n">warning_msg</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">write_report</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Subclasses should implement this method&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_write_warnings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>

        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">WARNINGS_HEADLINE</span><span class="p">)</span>

        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">warnings_text</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ReportWriterHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">Handler</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    A handler that can be given to a logger, so the report writer can capture logged warning messages</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">report_writer</span><span class="p">:</span> <span class="n">ReportWriter</span><span class="p">):</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">report_writer</span> <span class="o">=</span> <span class="n">report_writer</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">emit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">levelno</span> <span class="o">==</span> <span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">report_writer</span><span class="o">.</span><span class="n">add_warning</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">record</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="n">record</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">record</span><span class="o">.</span><span class="n">getMessage</span><span class="p">())</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ZipTreeElement</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    A class to represent a file or folder in a zip file. During the recursive traversal of the zip file,</span>

<span class="sd">    the full name and file size are stored in this class.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">full_name</span><span class="p">,</span> <span class="n">file_size</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">full_name</span> <span class="o">=</span> <span class="n">full_name</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">file_size</span> <span class="o">=</span> <span class="n">file_size</span>

<span class="n">PL_REPORT_HEADLINE</span> <span class="o">=</span> <span class="s2">&quot;# Report on `</span><span class="si">{pipeline_name}</span><span class="s2">`</span><span class="se">\n\n</span><span class="s2">&quot;</span>

<span class="n">PL_INFO_HEADLINE</span> <span class="o">=</span> <span class="s2">&quot;## Pipeline info</span><span class="se">\n\n</span><span class="s2">&quot;</span>

<span class="n">PL_INFO</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;- Author: </span><span class="si">{author}</span>

<span class="s2">- Created on: </span><span class="si">{created_on}</span>

<span class="s2">- Dataflow Pipeline version: </span><span class="si">{pipeline_version}</span>

<span class="s2">- Package ID: </span><span class="si">{package_id}</span>

<span class="s2">- Project name: </span><span class="si">{project_name}</span>

<span class="s2">Description: </span><span class="si">{description}</span>

<span class="s2">&quot;&quot;&quot;</span>

<span class="c1"># TODO: check other type of PlantUML diagrams if they look better or generating images into the markdown file</span>

<span class="n">PL_STRUCTURE_HEADLINE</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;## Pipeline structure</span>

<span class="s2">The pipeline structure is visualized using PlantUML. The components are connected by arrows. Metrics are drawn with dashed arrows.</span>

<span class="s2">&quot;&quot;&quot;</span>

<span class="n">PL_STRUCTURE</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{source_component}</span><span class="s2"> </span><span class="si">{arrow}</span><span class="s2"> </span><span class="si">{target_component}</span><span class="s2">: </span><span class="si">{variable_name}</span><span class="s2"> (</span><span class="si">{variable_type}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>

<span class="n">PL_PACKAGE_VULNERABILITIES_HEADLINE</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;## Package vulnerabilities</span>

<span class="s2">Package vulnerability information is collected from the [PyPI repository](https://pypi.org/).</span>

<span class="s2">| Package name | Package version | Vulnerability | Link | Details | Fixed in | In pipeline components |</span>

<span class="s2">|--------------|-----------------|---------------|------|---------|----------|------------------------|</span>

<span class="s2">&quot;&quot;&quot;</span>

<span class="n">PL_PACKAGE_VULNERABILITY_CANNOT_BE_CHECKED</span> <span class="o">=</span> <span class="s2">&quot;| </span><span class="si">{package_name}</span><span class="s2"> | </span><span class="si">{package_version}</span><span class="s2"> | Can not be checked | - | - | - | </span><span class="si">{components}</span><span class="s2"> |</span><span class="se">\n</span><span class="s2">&quot;</span>

<span class="n">PL_PACKAGE_VULNERABILITY_NOT_KNOWN</span> <span class="o">=</span> <span class="s2">&quot;| </span><span class="si">{package_name}</span><span class="s2"> | </span><span class="si">{package_version}</span><span class="s2"> | No known vulnerability | - | - | - | </span><span class="si">{components}</span><span class="s2"> |</span><span class="se">\n</span><span class="s2">&quot;</span>

<span class="n">PL_PACKAGE_VULNERABILITY</span> <span class="o">=</span> <span class="s2">&quot;| </span><span class="si">{package_name}</span><span class="s2"> | </span><span class="si">{package_version}</span><span class="s2"> | </span><span class="si">{vulnerability_aliases}</span><span class="s2"> | </span><span class="si">{vulnerability_link}</span><span class="s2"> | </span><span class="si">{vulnerability_details}</span><span class="s2"> | </span><span class="si">{vulnerability_fixed_in}</span><span class="s2"> | </span><span class="si">{components}</span><span class="s2"> |</span><span class="se">\n</span><span class="s2">&quot;</span>

<span class="n">PL_COMPONMENT_DEPENDENCIES_HEADLINE</span> <span class="o">=</span> <span class="s2">&quot;## Component dependencies for `</span><span class="si">{component_name}</span><span class="s2">`</span><span class="se">\n\n</span><span class="s2">&quot;</span>

<span class="n">PL_COMPONENT_DIRECT_DEPENDENCIES_HEADLINE</span> <span class="o">=</span> <span class="s2">&quot;### Direct dependencies</span><span class="se">\n\n</span><span class="s2">&quot;</span>

<span class="n">PL_COMPONENT_DIRECT_DEPENDENCY</span> <span class="o">=</span> <span class="s2">&quot;- </span><span class="si">{dependency_name}</span><span class="s2"> </span><span class="si">{dependency_version}</span><span class="se">\n</span><span class="s2">&quot;</span>

<span class="n">PL_COMPONENT_TRANSITIVE_DEPENDENCIES_HEADLINE</span> <span class="o">=</span> <span class="s2">&quot;### Transitive dependencies</span><span class="se">\n\n</span><span class="s2">&quot;</span>

<span class="n">PL_COMPONENT_TRANSITIVE_DEPENDENCY</span> <span class="o">=</span> <span class="s2">&quot;- </span><span class="si">{dependency_name}</span><span class="s2"> </span><span class="si">{dependency_version}</span><span class="se">\n</span><span class="s2">&quot;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">PipelineReportWriter</span><span class="p">(</span><span class="n">ReportWriter</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    A class to generate a report for a dataflow pipeline, including pipeline structure, component dependencies,</span>

<span class="sd">    and package vulnerabilities.</span>

<span class="sd">    Methods:</span>

<span class="sd">        set_path(report_path: Path):</span>

<span class="sd">            Sets the path where the report will be saved.</span>

<span class="sd">        set_pipeline_config(pipeline_config: dict):</span>

<span class="sd">            Sets the pipeline configuration and updates the pipeline info and structure.</span>

<span class="sd">        add_full_dependency_set(component_name: str, dependency_set: set[tuple]):</span>

<span class="sd">            Adds a full set of dependencies for a component and updates the vulnerability dictionary.</span>

<span class="sd">        add_direct_dependencies(component_name: str, direct_dependencies: dict):</span>

<span class="sd">            Adds direct dependencies for a component.</span>

<span class="sd">        add_warning(name, filename, line_number, warning_msg):</span>

<span class="sd">            Adds a warning to the report.</span>

<span class="sd">        write_report():</span>

<span class="sd">            Writes the report to the specified path.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_config</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># pipeline config json</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_name</span> <span class="o">=</span> <span class="s2">&quot;Unnamed pipeline&quot;</span>

        <span class="c1"># dependency_names and package_names are transformed dependency names (lowercase, underscore instead of dash)</span>

        <span class="c1"># set from outside</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">component_direct_dependency_namelist</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># component -&gt; list of dependency_names (with NO version)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">component_all_dependencies</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># component -&gt; set of tuples of (dependency_name, dependency_version)</span>

        <span class="c1"># collected before writing</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">component_direct_dependencies</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># component -&gt; set of dependency_names</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">component_transitive_dependencies</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># component -&gt; set of tuples of (dependency_name, dependency_version)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">vulnerability_dict</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># (package_name, package_version) -&gt; vulnerabilities (None | list of dictionaries)</span>

        <span class="c1"># report text sections to fill</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_structure_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_info_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">warnings_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_pipeline_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pipeline_config</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_config</span> <span class="o">=</span> <span class="n">pipeline_config</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_set_pipeline_info</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_set_pipeline_structure</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_sort_pipeline_dag</span><span class="p">(</span><span class="n">pipeline_dag</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Sorts a pipeline DAG in order to show dataflow from Pipeline Inputs to Pipeline Outputs.</span>

<span class="sd">        Databus component is a privileged source, and it is always the first component in the report.</span>

<span class="sd">        Args:</span>

<span class="sd">            pipeline_dag (list): The pipeline DAG is a list of dictionaries with &quot;source&quot; and &quot;target&quot; keys.</span>

<span class="sd">        Returns:</span>

<span class="sd">            A sorted list of dictionaries representing the pipeline DAG.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">pipeline_dag</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]))</span>

        <span class="n">sorted_dag</span> <span class="o">=</span> <span class="p">[</span><span class="n">edge</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">pipeline_dag</span> <span class="k">if</span> <span class="s2">&quot;Databus&quot;</span> <span class="ow">in</span> <span class="n">edge</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]]</span>

        <span class="k">if</span> <span class="n">sorted_dag</span> <span class="o">==</span> <span class="p">[]:</span>

            <span class="k">return</span> <span class="n">pipeline_dag</span>

        <span class="n">pipeline_dag</span> <span class="o">=</span> <span class="p">[</span><span class="n">edge</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">pipeline_dag</span> <span class="k">if</span> <span class="s2">&quot;Databus&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">edge</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]]</span>

        <span class="c1"># Extracts name of the target or source component from the edge</span>

        <span class="n">name_of_component</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">edge</span><span class="p">,</span> <span class="n">target_or_source</span><span class="p">:</span> <span class="n">edge</span><span class="p">[</span><span class="n">target_or_source</span><span class="p">]</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">pipeline_dag</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>

            <span class="n">sorted_targets</span> <span class="o">=</span> <span class="p">[</span><span class="n">name_of_component</span><span class="p">(</span><span class="n">edge</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">sorted_dag</span><span class="p">]</span>

            <span class="n">sorted_dag</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>

                <span class="n">edge</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">pipeline_dag</span>

                <span class="k">if</span> <span class="n">name_of_component</span><span class="p">(</span><span class="n">edge</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">sorted_targets</span>

            <span class="p">])</span>

            <span class="n">pipeline_dag</span> <span class="o">=</span> <span class="p">[</span><span class="n">edge</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">pipeline_dag</span> <span class="k">if</span> <span class="n">edge</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sorted_dag</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">sorted_dag</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_pipeline_structure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dataFlowPipelineInfo&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;projectName&quot;</span><span class="p">,</span> <span class="s2">&quot;n/a&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_structure_text</span> <span class="o">=</span> <span class="s2">&quot;```plantuml</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="n">components</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dataFlowPipeline&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;components&quot;</span><span class="p">,</span> <span class="p">[])</span>

        <span class="n">variables</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># name: (type, is_metric)</span>

        <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">components</span><span class="p">:</span>

            <span class="n">input_variables</span>  <span class="o">=</span> <span class="p">{</span><span class="n">_input</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]:</span> <span class="p">(</span><span class="n">_input</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span> <span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">_input</span> <span class="ow">in</span> <span class="n">component</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;inputType&quot;</span><span class="p">)}</span>

            <span class="n">output_variables</span> <span class="o">=</span> <span class="p">{</span><span class="n">_output</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]:</span> <span class="p">(</span><span class="n">_output</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span> <span class="n">_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;metric&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span> <span class="k">for</span> <span class="n">_output</span> <span class="ow">in</span> <span class="n">component</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;outputType&quot;</span><span class="p">)}</span>

            <span class="n">variables</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="o">**</span><span class="n">input_variables</span><span class="p">,</span> <span class="o">**</span><span class="n">output_variables</span><span class="p">})</span>

        <span class="n">pipeline_dag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dataFlowPipeline&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pipelineDag&quot;</span><span class="p">,</span> <span class="p">[])</span>

        <span class="n">sorted_pipeline_dag</span> <span class="o">=</span> <span class="n">PipelineReportWriter</span><span class="o">.</span><span class="n">_sort_pipeline_dag</span><span class="p">(</span><span class="n">pipeline_dag</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">transition</span> <span class="ow">in</span> <span class="n">sorted_pipeline_dag</span><span class="p">:</span>

            <span class="n">source_component_name</span><span class="p">,</span> <span class="n">source_variable_name</span> <span class="o">=</span> <span class="n">transition</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

            <span class="n">target_component_name</span><span class="p">,</span> <span class="n">target_variable_name</span> <span class="o">=</span> <span class="n">transition</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

            <span class="n">variable_name_to_show</span> <span class="o">=</span> <span class="n">source_variable_name</span> <span class="k">if</span> <span class="n">source_variable_name</span> <span class="o">==</span> <span class="n">target_variable_name</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">source_variable_name</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">target_variable_name</span><span class="si">}</span><span class="s2">&quot;</span>

            <span class="n">source_component_name</span> <span class="o">=</span> <span class="n">source_component_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Databus&quot;</span><span class="p">,</span> <span class="s2">&quot;AIIS&quot;</span><span class="p">)</span>

            <span class="n">target_component_name</span> <span class="o">=</span> <span class="n">target_component_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Databus&quot;</span><span class="p">,</span> <span class="s2">&quot;AIIS&quot;</span><span class="p">)</span>

            <span class="n">variable_type</span><span class="p">,</span> <span class="n">is_metric</span> <span class="o">=</span> <span class="n">variables</span><span class="p">[</span><span class="n">source_variable_name</span><span class="p">]</span>

            <span class="n">arrow</span> <span class="o">=</span> <span class="s2">&quot;--&gt;&quot;</span> <span class="k">if</span> <span class="n">is_metric</span> <span class="k">else</span> <span class="s2">&quot;-&gt;&quot;</span>  <span class="c1"># metric variables are drawn with a dashed line</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_structure_text</span> <span class="o">+=</span> <span class="n">PL_STRUCTURE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">source_component</span><span class="o">=</span><span class="n">source_component_name</span><span class="p">,</span>

                                                                <span class="n">arrow</span><span class="o">=</span><span class="n">arrow</span><span class="p">,</span>

                                                                <span class="n">target_component</span><span class="o">=</span><span class="n">target_component_name</span><span class="p">,</span>

                                                                <span class="n">variable_name</span><span class="o">=</span><span class="n">variable_name_to_show</span><span class="p">,</span>

                                                                <span class="n">variable_type</span><span class="o">=</span><span class="n">variable_type</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_structure_text</span> <span class="o">+=</span> <span class="s2">&quot;```</span><span class="se">\n\n</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_pipeline_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">dataflow_pipeline_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dataFlowPipelineInfo&quot;</span><span class="p">,</span> <span class="p">{})</span>

        <span class="n">author</span> <span class="o">=</span> <span class="n">dataflow_pipeline_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;author&quot;</span><span class="p">,</span> <span class="s2">&quot;n/a&quot;</span><span class="p">)</span>

        <span class="n">created_on</span> <span class="o">=</span> <span class="n">dataflow_pipeline_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;createdOn&quot;</span><span class="p">,</span> <span class="s2">&quot;n/a&quot;</span><span class="p">)</span>

        <span class="n">pipeline_version</span> <span class="o">=</span> <span class="n">dataflow_pipeline_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dataFlowPipelineVersion&quot;</span><span class="p">,</span> <span class="s2">&quot;n/a&quot;</span><span class="p">)</span>

        <span class="n">description</span> <span class="o">=</span> <span class="n">dataflow_pipeline_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="s2">&quot;n/a&quot;</span><span class="p">)</span>

        <span class="n">package_id</span> <span class="o">=</span> <span class="n">dataflow_pipeline_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;packageId&quot;</span><span class="p">,</span> <span class="s2">&quot;n/a&quot;</span><span class="p">)</span>

        <span class="n">project_name</span> <span class="o">=</span> <span class="n">dataflow_pipeline_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;projectName&quot;</span><span class="p">,</span> <span class="s2">&quot;n/a&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_info_text</span> <span class="o">=</span> <span class="n">PL_INFO</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">author</span><span class="o">=</span><span class="n">author</span><span class="p">,</span>

                                                 <span class="n">created_on</span><span class="o">=</span><span class="n">created_on</span><span class="p">,</span>

                                                 <span class="n">pipeline_version</span><span class="o">=</span><span class="n">pipeline_version</span><span class="p">,</span>

                                                 <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>

                                                 <span class="n">package_id</span><span class="o">=</span><span class="n">package_id</span><span class="p">,</span>

                                                 <span class="n">project_name</span><span class="o">=</span><span class="n">project_name</span><span class="p">)</span>

    <span class="c1"># Transform every dependency and package name for consistency; i.e.,</span>

    <span class="c1"># opencv-python-headless -&gt; opencv_python_headless; Django -&gt; django</span>

    <span class="nd">@staticmethod</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">transform_package_name</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>

        <span class="n">new_name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">new_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="c1"># A full dependency set is a set of (package_name, package_version) tuples</span>

    <span class="c1"># and contains all the dependencies installed for a component</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_full_dependency_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">component_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dependency_set</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">tuple</span><span class="p">]):</span>

        <span class="n">dependency_list</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">dependency_set</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_expand_component_all_dependencies</span><span class="p">(</span><span class="n">component_name</span><span class="p">,</span> <span class="n">dependency_list</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_vulnerability_dict</span><span class="p">(</span><span class="n">dependency_list</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_expand_component_all_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">component_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dependency_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">]):</span>

        <span class="k">if</span> <span class="n">component_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component_all_dependencies</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">component_all_dependencies</span><span class="p">[</span><span class="n">component_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">package_name</span><span class="p">,</span> <span class="n">package_version</span> <span class="ow">in</span> <span class="n">dependency_list</span><span class="p">:</span>

            <span class="n">transformed_package_name</span> <span class="o">=</span> <span class="n">PipelineReportWriter</span><span class="o">.</span><span class="n">transform_package_name</span><span class="p">(</span><span class="n">package_name</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">component_all_dependencies</span><span class="p">[</span><span class="n">component_name</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">transformed_package_name</span><span class="p">,</span> <span class="n">package_version</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_update_vulnerability_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dependency_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">]):</span>

        <span class="n">vulnerability_dict</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">package_name</span><span class="p">,</span> <span class="n">package_version</span> <span class="ow">in</span> <span class="n">dependency_list</span><span class="p">:</span>

            <span class="n">transformed_package_name</span> <span class="o">=</span> <span class="n">PipelineReportWriter</span><span class="o">.</span><span class="n">transform_package_name</span><span class="p">(</span><span class="n">package_name</span><span class="p">)</span>

            <span class="n">vulnerability_dict</span><span class="p">[(</span><span class="n">transformed_package_name</span><span class="p">,</span> <span class="n">package_version</span><span class="p">)]</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://pypi.org/pypi/</span><span class="si">{</span><span class="n">package_name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">package_version</span><span class="si">}</span><span class="s2">/json&quot;</span>

            <span class="k">try</span><span class="p">:</span>

                <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>

                    <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

                    <span class="k">if</span> <span class="s1">&#39;vulnerabilities&#39;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>

                        <span class="n">vulnerability_dict</span><span class="p">[(</span><span class="n">transformed_package_name</span><span class="p">,</span> <span class="n">package_version</span><span class="p">)]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;vulnerabilities&#39;</span><span class="p">]</span>

            <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">Timeout</span><span class="p">:</span>

                <span class="k">pass</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">vulnerability_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">vulnerability_dict</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_direct_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">component_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">direct_dependencies</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">component_direct_dependency_namelist</span><span class="p">[</span><span class="n">component_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">PipelineReportWriter</span><span class="o">.</span><span class="n">transform_package_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

                                                                     <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">direct_dependencies</span><span class="o">.</span><span class="n">keys</span><span class="p">())]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">write_report</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">report_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_set_component_dependencies</span><span class="p">()</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">report_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_write_headline</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_write_pipeline_info</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_write_pipeline_structure</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_write_dependencies</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_write_package_vulnerabilities</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_write_warnings</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_component_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component_all_dependencies</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

            <span class="c1"># self.component_direct_dependencies should contain everything from self.component_all_dependencies</span>

            <span class="c1">#   if it is direct, i.e., the name is in self.component_direct_dependency_namelist</span>

            <span class="c1"># self.component_transitive_dependencies should contain everything else</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">component_transitive_dependencies</span><span class="p">[</span><span class="n">component</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">component_direct_dependencies</span><span class="p">[</span><span class="n">component</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

            <span class="n">all_dependencies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component_all_dependencies</span><span class="p">[</span><span class="n">component</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">dependency_name</span><span class="p">,</span> <span class="n">dependency_version</span> <span class="ow">in</span> <span class="n">all_dependencies</span><span class="p">:</span>

                <span class="k">if</span> <span class="n">dependency_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component_direct_dependency_namelist</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="p">[]):</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">component_direct_dependencies</span><span class="p">[</span><span class="n">component</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">dependency_name</span><span class="p">,</span> <span class="n">dependency_version</span><span class="p">))</span>

                <span class="k">else</span><span class="p">:</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">component_transitive_dependencies</span><span class="p">[</span><span class="n">component</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">dependency_name</span><span class="p">,</span> <span class="n">dependency_version</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_write_headline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>

        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_REPORT_HEADLINE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pipeline_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_name</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_write_pipeline_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>

        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_INFO_HEADLINE</span><span class="p">)</span>

        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_info_text</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_write_pipeline_structure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>

        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_STRUCTURE_HEADLINE</span><span class="p">)</span>

        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_structure_text</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_write_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>

        <span class="k">for</span> <span class="n">component_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component_all_dependencies</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

            <span class="n">direct_dependencies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component_direct_dependencies</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">component_name</span><span class="p">,</span> <span class="nb">set</span><span class="p">())</span>

            <span class="n">transitive_dependencies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component_transitive_dependencies</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">component_name</span><span class="p">,</span> <span class="nb">set</span><span class="p">())</span>

            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_COMPONMENT_DEPENDENCIES_HEADLINE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">component_name</span><span class="o">=</span><span class="n">component_name</span><span class="p">))</span>

            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_COMPONENT_DIRECT_DEPENDENCIES_HEADLINE</span><span class="p">)</span>

            <span class="n">sorted_direct_dependencies</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">direct_dependencies</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

            <span class="k">for</span> <span class="n">dependency_name</span><span class="p">,</span> <span class="n">dependency_version</span> <span class="ow">in</span> <span class="n">sorted_direct_dependencies</span><span class="p">:</span>

                <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_COMPONENT_DIRECT_DEPENDENCY</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dependency_name</span><span class="o">=</span><span class="n">dependency_name</span><span class="p">,</span>

                                                                 <span class="n">dependency_version</span><span class="o">=</span><span class="n">dependency_version</span><span class="p">))</span>

            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_COMPONENT_TRANSITIVE_DEPENDENCIES_HEADLINE</span><span class="p">)</span>

            <span class="n">sorted_transitive_dependencies</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">transitive_dependencies</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

            <span class="k">for</span> <span class="n">dependency_name</span><span class="p">,</span> <span class="n">dependency_version</span> <span class="ow">in</span> <span class="n">sorted_transitive_dependencies</span><span class="p">:</span>

                <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_COMPONENT_TRANSITIVE_DEPENDENCY</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dependency_name</span><span class="o">=</span><span class="n">dependency_name</span><span class="p">,</span>

                                                                     <span class="n">dependency_version</span><span class="o">=</span><span class="n">dependency_version</span><span class="p">))</span>

            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_components_who_have_given_package</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">package_name</span><span class="p">,</span> <span class="n">package_version</span><span class="p">):</span>

        <span class="n">components</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component_all_dependencies</span><span class="p">:</span>

            <span class="n">dependencies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component_all_dependencies</span><span class="p">[</span><span class="n">component</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">package_name</span><span class="p">,</span> <span class="n">package_version</span><span class="p">)</span> <span class="ow">in</span> <span class="n">dependencies</span><span class="p">:</span>

                <span class="n">components</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">component</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">components</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_write_package_vulnerabilities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>

        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_PACKAGE_VULNERABILITIES_HEADLINE</span><span class="p">)</span>

        <span class="n">sorted_vulnerability_dict_items</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vulnerability_dict</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

        <span class="k">for</span> <span class="p">(</span><span class="n">package_name</span><span class="p">,</span> <span class="n">package_version</span><span class="p">),</span> <span class="n">vulnerabilities</span> <span class="ow">in</span> <span class="n">sorted_vulnerability_dict_items</span><span class="p">:</span>

            <span class="n">components</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_components_who_have_given_package</span><span class="p">(</span><span class="n">package_name</span><span class="p">,</span> <span class="n">package_version</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">vulnerabilities</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

                <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_PACKAGE_VULNERABILITY_CANNOT_BE_CHECKED</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">package_name</span><span class="o">=</span><span class="n">package_name</span><span class="p">,</span>

                                                                             <span class="n">package_version</span><span class="o">=</span><span class="n">package_version</span><span class="p">,</span>

                                                                             <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">))</span>

            <span class="k">elif</span> <span class="n">vulnerabilities</span> <span class="o">==</span> <span class="p">[]:</span>

                <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_PACKAGE_VULNERABILITY_NOT_KNOWN</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">package_name</span><span class="o">=</span><span class="n">package_name</span><span class="p">,</span>

                                                                     <span class="n">package_version</span><span class="o">=</span><span class="n">package_version</span><span class="p">,</span>

                                                                     <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">))</span>

            <span class="k">else</span><span class="p">:</span>

                <span class="k">for</span> <span class="n">vulnerability</span> <span class="ow">in</span> <span class="n">vulnerabilities</span><span class="p">:</span>

                    <span class="n">vulnerability_aliases</span> <span class="o">=</span> <span class="n">vulnerability</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;aliases&#39;</span><span class="p">,</span> <span class="s1">&#39;Vulnerability found with no alias. Check [PyPI repository](https://pypi.org/) for more details.&#39;</span><span class="p">)</span>

                    <span class="n">vulnerability_link</span> <span class="o">=</span> <span class="n">vulnerability</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;link&#39;</span><span class="p">,</span> <span class="s1">&#39;No link found&#39;</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">vulnerability_link</span> <span class="o">!=</span> <span class="s1">&#39;No link found&#39;</span><span class="p">:</span>

                        <span class="n">vulnerability_link</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">vulnerability_link</span><span class="si">}</span><span class="s2">](</span><span class="si">{</span><span class="n">vulnerability_link</span><span class="si">}</span><span class="s2">)&quot;</span>

                    <span class="n">vulnerability_details</span> <span class="o">=</span> <span class="n">vulnerability</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;details&#39;</span><span class="p">,</span> <span class="s1">&#39;No details found&#39;</span><span class="p">)</span>

                    <span class="n">vulnerability_fixed_in</span> <span class="o">=</span> <span class="n">vulnerability</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fixed_in&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>

                    <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_PACKAGE_VULNERABILITY</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">package_name</span><span class="o">=</span><span class="n">package_name</span><span class="p">,</span>

                                                               <span class="n">package_version</span><span class="o">=</span><span class="n">package_version</span><span class="p">,</span>

                                                               <span class="n">vulnerability_aliases</span><span class="o">=</span><span class="n">vulnerability_aliases</span><span class="p">,</span>

                                                               <span class="n">vulnerability_link</span><span class="o">=</span><span class="n">vulnerability_link</span><span class="p">,</span>

                                                               <span class="n">vulnerability_details</span><span class="o">=</span><span class="n">vulnerability_details</span><span class="p">,</span>

                                                               <span class="n">vulnerability_fixed_in</span><span class="o">=</span><span class="n">vulnerability_fixed_in</span><span class="p">,</span>

                                                               <span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">))</span>

        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">LPLR_REPORT_HEADLINE</span> <span class="o">=</span> <span class="s2">&quot;# Report on Local Pipeline Runner</span><span class="se">\n\n</span><span class="s2">&quot;</span>

<span class="n">LPLR_FOLDER_STRUCTURE_HEADLINE</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;## Folder structure</span>

<span class="s2">File sizes represent uncompressed sizes.</span>

<span class="s2">&quot;&quot;&quot;</span>

<span class="n">LPLR_FOLDER_STRUCTURE</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;```</span>

<span class="si">{file_name}</span>

<span class="si">{folder_structure}</span><span class="s2">```</span>

<span class="s2">&quot;&quot;&quot;</span>

<span class="n">LPLR_FOLDER_STRUCTURE_FOLDER_LINE</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{prefix}{connector}{folder}</span><span class="se">\n</span><span class="s2">&quot;</span>

<span class="n">LPLR_FOLDER_STRUCTURE_FILE_LINE</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{prefix}{connector}{file}</span><span class="s2"> (</span><span class="si">{size}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>

<span class="n">LPLR_FOLDER_STRUCTURE_MID_CONNECTOR_SYMBOL</span> <span class="o">=</span> <span class="s2">&quot;├── &quot;</span>

<span class="n">LPLR_FOLDER_STRUCTURE_LAST_CONNECTOR_SYMBOL</span> <span class="o">=</span> <span class="s2">&quot;└── &quot;</span>

<span class="n">LPLR_FOLDER_STRUCTURE_MID_PREFIX_SYMBOL</span> <span class="o">=</span> <span class="s2">&quot;│   &quot;</span>

<span class="n">LPLR_FOLDER_STRUCTURE_LAST_PREFIX_SYMBOL</span> <span class="o">=</span> <span class="s2">&quot;    &quot;</span>

<span class="n">LPLR_PYTHON_PACKAGES_ZIP_CONTENT_HEADLINE</span> <span class="o">=</span> <span class="s2">&quot;## PythonPackages.zip content</span><span class="se">\n\n</span><span class="s2">&quot;</span>

<span class="n">LPLR_PYTHON_PACKAGES_ZIP_CONTENT</span> <span class="o">=</span> <span class="s2">&quot;- </span><span class="si">{python_package}</span><span class="se">\n</span><span class="s2">&quot;</span>

<span class="n">LPLR_COMPONENT_INSTALLED_PACKAGES_HEADLINE</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;## Installed packages</span>

<span class="s2">&quot;&quot;&quot;</span>

<span class="n">LPLR_COMPONENT_INSTALLED_PACKAGES</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;### Component `</span><span class="si">{component}</span><span class="s2">`</span>

<span class="s2">| Package name | Package version | wheel name |</span>

<span class="s2">|--------------|-----------------|------------|</span>

<span class="s2">&quot;&quot;&quot;</span>

<span class="n">LPLR_COMPONENT_INSTALLED_PACKAGES_ROW</span> <span class="o">=</span> <span class="s2">&quot;| </span><span class="si">{package_name}</span><span class="s2"> | </span><span class="si">{package_version}</span><span class="s2"> | </span><span class="si">{wheel_name}</span><span class="s2"> |</span><span class="se">\n</span><span class="s2">&quot;</span>

<span class="n">LPLR_PAYLOAD_LENGTHS_HEADLINE</span> <span class="o">=</span> <span class="s2">&quot;## Payload counts</span><span class="se">\n\n</span><span class="s2">&quot;</span>

<span class="n">LPLR_PAYLOAD_LENGTHS</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;### Component `</span><span class="si">{component}</span><span class="s2">`</span>

<span class="s2">- Input payload count: </span><span class="si">{input_payload_length}</span>

<span class="s2">- Output payload count: </span><span class="si">{output_payload_length}</span>

<span class="s2">&quot;&quot;&quot;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">PipelineRunnerReportWriter</span><span class="p">(</span><span class="n">ReportWriter</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    PipelineRunnerReportWriter is responsible for generating a detailed report of a local pipeline execution.</span>

<span class="sd">    It builds folder structures from zip files, manages component payload counts, and adds installed packages information.</span>

<span class="sd">    Methods:</span>

<span class="sd">        set_path(report_path: Path):</span>

<span class="sd">            Sets the path where the report will be saved.</span>

<span class="sd">        set_package_zip_path(zip_path: Path):</span>

<span class="sd">            Sets the path to the package zip file and updates the folder tree.</span>

<span class="sd">        set_input_payload_length(component_name: str, length: int):</span>

<span class="sd">            Sets the input payload length for a component.</span>

<span class="sd">        set_output_payload_length(component_name: str, length: int):</span>

<span class="sd">            Sets the output payload length for a component.</span>

<span class="sd">        add_installed_packages(component_name: str, pip_report_file: Path):</span>

<span class="sd">            Adds installed packages for a component from a pip report file.</span>

<span class="sd">        add_warning(name, filename, line_number, warning_msg):</span>

<span class="sd">            Adds a warning to the report.</span>

<span class="sd">        write_report():</span>

<span class="sd">            Writes the report to the specified path.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">package_zip_path</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">zip_file_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">component_installed_packages</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># component_name -&gt; list[tuple(package_name, package_version, whl_name)]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">component_payload_length</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># component_name -&gt; [input_payload_length, output_payload_length]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">python_packages_zip_content</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="c1"># report text sections to fill</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">folder_tree_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">warnings_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_package_zip_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zip_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">package_zip_path</span> <span class="o">=</span> <span class="n">zip_path</span>

        <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">zip_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">zipf</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">zip_file_name</span> <span class="o">=</span> <span class="n">zipf</span><span class="o">.</span><span class="n">filename</span>

            <span class="n">zip_tree</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="k">for</span> <span class="n">item_name</span> <span class="ow">in</span> <span class="n">zipf</span><span class="o">.</span><span class="n">namelist</span><span class="p">():</span>

                <span class="n">zip_tree</span><span class="p">[</span><span class="n">item_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ZipTreeElement</span><span class="p">(</span><span class="n">full_name</span><span class="o">=</span><span class="n">item_name</span><span class="p">,</span> <span class="n">file_size</span><span class="o">=</span><span class="n">zipf</span><span class="o">.</span><span class="n">getinfo</span><span class="p">(</span><span class="n">item_name</span><span class="p">)</span><span class="o">.</span><span class="n">file_size</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_print_structure_recursively</span><span class="p">(</span><span class="n">zip_tree</span><span class="p">,</span> <span class="n">zipf</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_folder_and_file_list</span><span class="p">(</span><span class="n">item_names</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Given a list of item names, each item name is a file that either starts with a folder name, or not.</span>

<span class="sd">        This function separates the folder names and the standalone file names.</span>

<span class="sd">        E.g., [&quot;a/b/something.txt&quot;, &quot;c/another.txt&quot;, &quot;else.txt&quot;] -&gt; [&quot;a/&quot;, &quot;c/&quot;], [&quot;else.txt&quot;]</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">folder_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="n">file_names</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">item_names</span><span class="p">:</span>

            <span class="n">item_parts</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">item_parts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>

                <span class="k">if</span> <span class="n">item_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>

                    <span class="n">folder_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">item_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>

                <span class="k">if</span> <span class="n">item</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>

                    <span class="n">file_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">folder_names</span><span class="p">)),</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">file_names</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">format_size</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;Format file size in human-readable form.&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">unit</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;KB&#39;</span><span class="p">,</span> <span class="s1">&#39;MB&#39;</span><span class="p">]:</span>

            <span class="k">if</span> <span class="n">size</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">:</span>

                <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">unit</span><span class="si">}</span><span class="s2">&quot;</span>

            <span class="n">size</span> <span class="o">//=</span> <span class="mi">1000</span>

        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s2"> GB&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_print_structure_recursively</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zip_tree</span><span class="p">,</span> <span class="n">zipf</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>

        <span class="n">folder_names</span><span class="p">,</span> <span class="n">file_names</span> <span class="o">=</span> <span class="n">PipelineRunnerReportWriter</span><span class="o">.</span><span class="n">_get_folder_and_file_list</span><span class="p">(</span><span class="n">zip_tree</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="n">is_file_names_empty</span> <span class="o">=</span> <span class="n">file_names</span> <span class="o">==</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_print_folder_structure</span><span class="p">(</span><span class="n">zip_tree</span><span class="p">,</span> <span class="n">zipf</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">folder_names</span><span class="p">,</span> <span class="n">is_file_names_empty</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_print_file_structure</span><span class="p">(</span><span class="n">zip_tree</span><span class="p">,</span> <span class="n">zipf</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">file_names</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_print_folder_structure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zip_tree</span><span class="p">,</span> <span class="n">zipf</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">folder_names</span><span class="p">,</span> <span class="n">is_file_names_empty</span><span class="p">):</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">folder</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">folder_names</span><span class="p">):</span>

            <span class="n">is_last</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">folder_names</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="n">is_file_names_empty</span>

            <span class="n">connector</span> <span class="o">=</span> <span class="n">LPLR_FOLDER_STRUCTURE_LAST_CONNECTOR_SYMBOL</span> <span class="k">if</span> <span class="n">is_last</span> <span class="k">else</span> <span class="n">LPLR_FOLDER_STRUCTURE_MID_CONNECTOR_SYMBOL</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">folder_tree_text</span> <span class="o">+=</span> <span class="n">LPLR_FOLDER_STRUCTURE_FOLDER_LINE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">,</span>

                                                                              <span class="n">connector</span><span class="o">=</span><span class="n">connector</span><span class="p">,</span>

                                                                              <span class="n">folder</span><span class="o">=</span><span class="n">folder</span><span class="p">)</span>

            <span class="c1"># create a new tree where items start with the same folder name; but cut out the folder name</span>

            <span class="c1"># (going deeper in the recursion)</span>

            <span class="n">new_zip_tree_from_folder</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">zip_tree</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>

                    <span class="n">new_file_name</span> <span class="o">=</span> <span class="n">k</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>

                    <span class="n">new_zip_tree_from_folder</span><span class="p">[</span><span class="n">new_file_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>

            <span class="n">prefix_post</span> <span class="o">=</span> <span class="n">LPLR_FOLDER_STRUCTURE_LAST_PREFIX_SYMBOL</span> <span class="k">if</span> <span class="n">is_last</span> <span class="k">else</span> <span class="n">LPLR_FOLDER_STRUCTURE_MID_PREFIX_SYMBOL</span>

            <span class="n">new_prefix_from_folder</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">prefix_post</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_print_structure_recursively</span><span class="p">(</span><span class="n">new_zip_tree_from_folder</span><span class="p">,</span> <span class="n">zipf</span><span class="p">,</span> <span class="n">new_prefix_from_folder</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_print_file_structure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zip_tree</span><span class="p">,</span> <span class="n">zipf</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">file_names</span><span class="p">):</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">file_name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">file_names</span><span class="p">):</span>

            <span class="n">is_last</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">file_names</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

            <span class="n">size_str</span> <span class="o">=</span> <span class="n">PipelineRunnerReportWriter</span><span class="o">.</span><span class="n">format_size</span><span class="p">(</span><span class="n">zip_tree</span><span class="p">[</span><span class="n">file_name</span><span class="p">]</span><span class="o">.</span><span class="n">file_size</span><span class="p">)</span>

            <span class="n">connector</span> <span class="o">=</span> <span class="n">LPLR_FOLDER_STRUCTURE_LAST_CONNECTOR_SYMBOL</span> <span class="k">if</span> <span class="n">is_last</span> <span class="k">else</span> <span class="n">LPLR_FOLDER_STRUCTURE_MID_CONNECTOR_SYMBOL</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">folder_tree_text</span> <span class="o">+=</span> <span class="n">LPLR_FOLDER_STRUCTURE_FILE_LINE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">,</span>

                                                                            <span class="n">connector</span><span class="o">=</span><span class="n">connector</span><span class="p">,</span>

                                                                            <span class="n">file</span><span class="o">=</span><span class="n">file_name</span><span class="p">,</span>

                                                                            <span class="n">size</span><span class="o">=</span><span class="n">size_str</span><span class="p">)</span>

            <span class="c1"># zip files are handled similarly to folders:</span>

            <span class="c1"># create a new tree where items start with the same folder name; but cut out the folder name</span>

            <span class="c1"># (going deeper in the recursion)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">file_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.zip&#39;</span><span class="p">):</span>

                <span class="k">continue</span>

            <span class="n">full_name</span> <span class="o">=</span> <span class="n">zip_tree</span><span class="p">[</span><span class="n">file_name</span><span class="p">]</span><span class="o">.</span><span class="n">full_name</span>

            <span class="k">with</span> <span class="n">zipf</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">full_name</span><span class="p">)</span> <span class="k">as</span> <span class="n">nested_zip_file</span><span class="p">:</span>

                <span class="n">nested_zip_data</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">nested_zip_file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

                <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">nested_zip_data</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">nested_zipf</span><span class="p">:</span>

                    <span class="k">if</span> <span class="n">file_name</span> <span class="o">==</span> <span class="s2">&quot;PythonPackages.zip&quot;</span><span class="p">:</span>

                        <span class="bp">self</span><span class="o">.</span><span class="n">python_packages_zip_content</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">nested_zipf</span><span class="o">.</span><span class="n">namelist</span><span class="p">())))</span>

                    <span class="c1"># create a new tree where items start with the same folder name; but cut out the folder name</span>

                    <span class="n">new_zip_tree_from_zip</span> <span class="o">=</span> <span class="p">{}</span>

                    <span class="k">for</span> <span class="n">nested_item_name</span> <span class="ow">in</span> <span class="n">nested_zipf</span><span class="o">.</span><span class="n">namelist</span><span class="p">():</span>

                        <span class="n">new_zip_tree_from_zip</span><span class="p">[</span><span class="n">nested_item_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ZipTreeElement</span><span class="p">(</span><span class="n">nested_item_name</span><span class="p">,</span>

                                                                                 <span class="n">nested_zipf</span><span class="o">.</span><span class="n">getinfo</span><span class="p">(</span><span class="n">nested_item_name</span><span class="p">)</span><span class="o">.</span><span class="n">file_size</span><span class="p">)</span>

                    <span class="n">prefix_post</span> <span class="o">=</span> <span class="n">LPLR_FOLDER_STRUCTURE_LAST_PREFIX_SYMBOL</span> <span class="k">if</span> <span class="n">is_last</span> <span class="k">else</span> <span class="n">LPLR_FOLDER_STRUCTURE_MID_PREFIX_SYMBOL</span>

                    <span class="n">new_prefix_from_zip</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">prefix_post</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">_print_structure_recursively</span><span class="p">(</span><span class="n">new_zip_tree_from_zip</span><span class="p">,</span> <span class="n">nested_zipf</span><span class="p">,</span> <span class="n">new_prefix_from_zip</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_input_payload_length</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">component_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">component_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component_payload_length</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">component_payload_length</span><span class="p">[</span><span class="n">component_name</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">length</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">component_payload_length</span><span class="p">[</span><span class="n">component_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">length</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_output_payload_length</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">component_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">component_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component_payload_length</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">component_payload_length</span><span class="p">[</span><span class="n">component_name</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">length</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">component_payload_length</span><span class="p">[</span><span class="n">component_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">length</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_installed_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">component_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pip_report_file</span><span class="p">:</span> <span class="n">Path</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">pip_report_file</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>

            <span class="k">return</span>

        <span class="n">pip_report</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">pip_report_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>

            <span class="n">pip_report</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">component_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component_installed_packages</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">component_installed_packages</span><span class="p">[</span><span class="n">component_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">installed_packages</span> <span class="o">=</span> <span class="n">pip_report</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;install&quot;</span><span class="p">,</span> <span class="p">[])</span>

        <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">installed_packages</span><span class="p">:</span>

            <span class="n">package_url</span> <span class="o">=</span> <span class="n">package</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;download_info&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

            <span class="n">wheel_name</span> <span class="o">=</span> <span class="n">package_url</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">package_url</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.whl&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;n/a&quot;</span>

            <span class="n">metadata</span> <span class="o">=</span> <span class="n">package</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="p">{})</span>

            <span class="n">package_name</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;n/a&quot;</span><span class="p">)</span>

            <span class="n">package_version</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="s2">&quot;n/a&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">component_installed_packages</span><span class="p">[</span><span class="n">component_name</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">package_name</span><span class="p">,</span> <span class="n">package_version</span><span class="p">,</span> <span class="n">wheel_name</span><span class="p">))</span>

    <span class="c1"># check if one or more reports already exists; set the report path so a new report will have a new index</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_path_from_zip_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">package_zip_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

            <span class="k">return</span>

        <span class="n">workdir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">package_zip_path</span><span class="o">.</span><span class="n">parent</span>

        <span class="n">base_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">package_zip_path</span><span class="o">.</span><span class="n">stem</span>

        <span class="n">report_files</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">workdir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base_name</span><span class="si">}</span><span class="s2">_execution_report_*.md&quot;</span><span class="p">))</span>

        <span class="n">max_index</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">report_file</span> <span class="ow">in</span> <span class="n">report_files</span><span class="p">:</span>

            <span class="k">try</span><span class="p">:</span>

                <span class="n">index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">report_file</span><span class="o">.</span><span class="n">stem</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

                <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;</span> <span class="n">max_index</span><span class="p">:</span>

                    <span class="n">max_index</span> <span class="o">=</span> <span class="n">index</span>

            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>

                <span class="k">continue</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_path</span><span class="p">(</span><span class="n">workdir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base_name</span><span class="si">}</span><span class="s2">_execution_report_</span><span class="si">{</span><span class="n">max_index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">.md&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">write_report</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># if the report path is not set, set it from the zip path</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_set_path_from_zip_path</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">report_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

            <span class="k">return</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">report_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_write_headline</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_write_folder_structure</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_write_python_packages_zip_content</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_write_component_installed_packages</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_write_payload_lengths</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_write_warnings</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_write_headline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>

        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_REPORT_HEADLINE</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_write_folder_structure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>

        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_FOLDER_STRUCTURE_HEADLINE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">zip_file_name</span><span class="p">))</span>

        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_FOLDER_STRUCTURE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">zip_file_name</span><span class="p">,</span> <span class="n">folder_structure</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">folder_tree_text</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_write_python_packages_zip_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>

        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_PYTHON_PACKAGES_ZIP_CONTENT_HEADLINE</span><span class="p">)</span>

        <span class="n">sorted_zip_content</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">python_packages_zip_content</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">sorted_zip_content</span><span class="p">:</span>

            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_PYTHON_PACKAGES_ZIP_CONTENT</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">python_package</span><span class="o">=</span><span class="n">package</span><span class="p">))</span>

        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_write_component_installed_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>

        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_COMPONENT_INSTALLED_PACKAGES_HEADLINE</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component_installed_packages</span><span class="p">:</span>

            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_COMPONENT_INSTALLED_PACKAGES</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">))</span>

            <span class="n">sorted_installed_packages</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component_installed_packages</span><span class="p">[</span><span class="n">component</span><span class="p">],</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

            <span class="k">for</span> <span class="n">package_name</span><span class="p">,</span> <span class="n">package_version</span><span class="p">,</span> <span class="n">wheel_name</span> <span class="ow">in</span> <span class="n">sorted_installed_packages</span><span class="p">:</span>

                <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_COMPONENT_INSTALLED_PACKAGES_ROW</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">package_name</span><span class="o">=</span><span class="n">package_name</span><span class="p">,</span>

                                                                        <span class="n">package_version</span><span class="o">=</span><span class="n">package_version</span><span class="p">,</span>

                                                                        <span class="n">wheel_name</span><span class="o">=</span><span class="n">wheel_name</span><span class="p">))</span>

            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_write_payload_lengths</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>

        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_PAYLOAD_LENGTHS_HEADLINE</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component_payload_length</span><span class="p">:</span>

            <span class="n">input_payload_length</span><span class="p">,</span> <span class="n">output_payload_length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component_payload_length</span><span class="p">[</span><span class="n">component</span><span class="p">]</span>

            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_PAYLOAD_LENGTHS</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">,</span>

                                                   <span class="n">input_payload_length</span><span class="o">=</span><span class="n">input_payload_length</span><span class="p">,</span>

                                                   <span class="n">output_payload_length</span><span class="o">=</span><span class="n">output_payload_length</span><span class="p">))</span>
</code></pre></div>

</details>
<h2 id="variables">Variables</h2>
<div class="codehilite"><pre><span></span><code><span class="n">LPLR_COMPONENT_INSTALLED_PACKAGES</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">LPLR_COMPONENT_INSTALLED_PACKAGES_HEADLINE</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">LPLR_COMPONENT_INSTALLED_PACKAGES_ROW</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">LPLR_FOLDER_STRUCTURE</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">LPLR_FOLDER_STRUCTURE_FILE_LINE</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">LPLR_FOLDER_STRUCTURE_FOLDER_LINE</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">LPLR_FOLDER_STRUCTURE_HEADLINE</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">LPLR_FOLDER_STRUCTURE_LAST_CONNECTOR_SYMBOL</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">LPLR_FOLDER_STRUCTURE_LAST_PREFIX_SYMBOL</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">LPLR_FOLDER_STRUCTURE_MID_CONNECTOR_SYMBOL</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">LPLR_FOLDER_STRUCTURE_MID_PREFIX_SYMBOL</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">LPLR_PAYLOAD_LENGTHS</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">LPLR_PAYLOAD_LENGTHS_HEADLINE</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">LPLR_PYTHON_PACKAGES_ZIP_CONTENT</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">LPLR_PYTHON_PACKAGES_ZIP_CONTENT_HEADLINE</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">LPLR_REPORT_HEADLINE</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">PL_COMPONENT_DIRECT_DEPENDENCIES_HEADLINE</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">PL_COMPONENT_DIRECT_DEPENDENCY</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">PL_COMPONENT_TRANSITIVE_DEPENDENCIES_HEADLINE</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">PL_COMPONENT_TRANSITIVE_DEPENDENCY</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">PL_COMPONMENT_DEPENDENCIES_HEADLINE</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">PL_INFO</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">PL_INFO_HEADLINE</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">PL_PACKAGE_VULNERABILITIES_HEADLINE</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">PL_PACKAGE_VULNERABILITY</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">PL_PACKAGE_VULNERABILITY_CANNOT_BE_CHECKED</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">PL_PACKAGE_VULNERABILITY_NOT_KNOWN</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">PL_REPORT_HEADLINE</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">PL_STRUCTURE</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">PL_STRUCTURE_HEADLINE</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">WARNINGS_HEADLINE</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">WARNING_LINE</span>
</code></pre></div>

<h2 id="classes">Classes</h2>
<h3 id="pipelinereportwriter">PipelineReportWriter</h3>
<p>A class to generate a report for a dataflow pipeline, including pipeline structure, component dependencies,</p>
<p>and package vulnerabilities.</p>
<p>Methods:
    set_path(report_path: Path):
        Sets the path where the report will be saved.
    set_pipeline_config(pipeline_config: dict):
        Sets the pipeline configuration and updates the pipeline info and structure.
    add_full_dependency_set(component_name: str, dependency_set: set[tuple]):
        Adds a full set of dependencies for a component and updates the vulnerability dictionary.
    add_direct_dependencies(component_name: str, direct_dependencies: dict):
        Adds direct dependencies for a component.
    add_warning(name, filename, line_number, warning_msg):
        Adds a warning to the report.
    write_report():
        Writes the report to the specified path.</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PipelineReportWriter</span><span class="p">(</span>

<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="n">PipelineReportWriter</span><span class="p">(</span><span class="n">ReportWriter</span><span class="p">)</span><span class="o">:</span>

<span class="w">    </span><span class="s">&quot;&quot;&quot;</span>

<span class="w">    </span><span class="n">A</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">generate</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">report</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">dataflow</span><span class="w"> </span><span class="n">pipeline</span><span class="p">,</span><span class="w"> </span><span class="n">including</span><span class="w"> </span><span class="n">pipeline</span><span class="w"> </span><span class="n">structure</span><span class="p">,</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">dependencies</span><span class="p">,</span>

<span class="w">    </span><span class="n">and</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">vulnerabilities</span><span class="p">.</span>

<span class="w">    </span><span class="nl">Methods</span><span class="p">:</span>

<span class="w">        </span><span class="n">set_path</span><span class="p">(</span><span class="n">report_path</span><span class="o">:</span><span class="w"> </span><span class="n">Path</span><span class="p">)</span><span class="o">:</span>

<span class="w">            </span><span class="n">Sets</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">report</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">saved</span><span class="p">.</span>

<span class="w">        </span><span class="n">set_pipeline_config</span><span class="p">(</span><span class="n">pipeline_config</span><span class="o">:</span><span class="w"> </span><span class="n">dict</span><span class="p">)</span><span class="o">:</span>

<span class="w">            </span><span class="n">Sets</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pipeline</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">updates</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pipeline</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">structure</span><span class="p">.</span>

<span class="w">        </span><span class="n">add_full_dependency_set</span><span class="p">(</span><span class="n">component_name</span><span class="o">:</span><span class="w"> </span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="n">dependency_set</span><span class="o">:</span><span class="w"> </span><span class="n">set</span><span class="p">[</span><span class="n">tuple</span><span class="p">])</span><span class="o">:</span>

<span class="w">            </span><span class="n">Adds</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">full</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">dependencies</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">updates</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">vulnerability</span><span class="w"> </span><span class="n">dictionary</span><span class="p">.</span>

<span class="w">        </span><span class="n">add_direct_dependencies</span><span class="p">(</span><span class="n">component_name</span><span class="o">:</span><span class="w"> </span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="n">direct_dependencies</span><span class="o">:</span><span class="w"> </span><span class="n">dict</span><span class="p">)</span><span class="o">:</span>

<span class="w">            </span><span class="n">Adds</span><span class="w"> </span><span class="n">direct</span><span class="w"> </span><span class="n">dependencies</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">component</span><span class="p">.</span>

<span class="w">        </span><span class="n">add_warning</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="n">line_number</span><span class="p">,</span><span class="w"> </span><span class="n">warning_msg</span><span class="p">)</span><span class="o">:</span>

<span class="w">            </span><span class="n">Adds</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">report</span><span class="p">.</span>

<span class="w">        </span><span class="n">write_report</span><span class="p">()</span><span class="o">:</span>

<span class="w">            </span><span class="n">Writes</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">report</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">path</span><span class="p">.</span>

<span class="w">    </span><span class="s">&quot;&quot;&quot;</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="nf">__init__</span><span class="p">(</span><span class="nb">self</span><span class="p">)</span><span class="o">:</span>

<span class="w">        </span><span class="nb">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">()</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">pipeline_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">pipeline</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">json</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">pipeline_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Unnamed pipeline&quot;</span>

<span class="w">        </span><span class="cp"># dependency_names and package_names are transformed dependency names (lowercase, underscore instead of dash)</span>

<span class="w">        </span><span class="cp"># set from outside</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">component_direct_dependency_namelist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">dependency_names</span><span class="w"> </span><span class="p">(</span><span class="n">with</span><span class="w"> </span><span class="nb">NO</span><span class="w"> </span><span class="n">version</span><span class="p">)</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">component_all_dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">tuples</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="p">(</span><span class="n">dependency_name</span><span class="p">,</span><span class="w"> </span><span class="n">dependency_version</span><span class="p">)</span>

<span class="w">        </span><span class="cp"># collected before writing</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">component_direct_dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">dependency_names</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">component_transitive_dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">tuples</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="p">(</span><span class="n">dependency_name</span><span class="p">,</span><span class="w"> </span><span class="n">dependency_version</span><span class="p">)</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">vulnerability_dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">package_name</span><span class="p">,</span><span class="w"> </span><span class="n">package_version</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">vulnerabilities</span><span class="w"> </span><span class="p">(</span><span class="n">None</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">dictionaries</span><span class="p">)</span>

<span class="w">        </span><span class="cp"># report text sections to fill</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">pipeline_structure_text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">pipeline_info_text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">warnings_text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">set_pipeline_config</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span><span class="w"> </span><span class="n">pipeline_config</span><span class="o">:</span><span class="w"> </span><span class="n">dict</span><span class="p">)</span><span class="o">:</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">pipeline_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipeline_config</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">_set_pipeline_info</span><span class="p">()</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">_set_pipeline_structure</span><span class="p">()</span>

<span class="w">    </span><span class="p">@</span><span class="n">staticmethod</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_sort_pipeline_dag</span><span class="p">(</span><span class="n">pipeline_dag</span><span class="o">:</span><span class="w"> </span><span class="n">list</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">list</span><span class="o">:</span>

<span class="w">        </span><span class="s">&quot;&quot;&quot;</span>

<span class="w">        </span><span class="n">Sorts</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">pipeline</span><span class="w"> </span><span class="n">DAG</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">dataflow</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">Pipeline</span><span class="w"> </span><span class="n">Inputs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">Pipeline</span><span class="w"> </span><span class="n">Outputs</span><span class="p">.</span>

<span class="w">        </span><span class="n">Databus</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">privileged</span><span class="w"> </span><span class="n">source</span><span class="p">,</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">always</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">report</span><span class="p">.</span>

<span class="w">        </span><span class="nl">Args</span><span class="p">:</span>

<span class="w">            </span><span class="n">pipeline_dag</span><span class="w"> </span><span class="p">(</span><span class="n">list</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">pipeline</span><span class="w"> </span><span class="n">DAG</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">dictionaries</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="s">&quot;source&quot;</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="s">&quot;target&quot;</span><span class="w"> </span><span class="n">keys</span><span class="p">.</span>

<span class="w">        </span><span class="nl">Returns</span><span class="p">:</span>

<span class="w">            </span><span class="n">A</span><span class="w"> </span><span class="n">sorted</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">dictionaries</span><span class="w"> </span><span class="n">representing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pipeline</span><span class="w"> </span><span class="n">DAG</span><span class="p">.</span>

<span class="w">        </span><span class="s">&quot;&quot;&quot;</span>

<span class="w">        </span><span class="n">pipeline_dag</span><span class="p">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">lambda</span><span class="w"> </span><span class="n">x</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s">&quot;source&quot;</span><span class="p">],</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="s">&quot;target&quot;</span><span class="p">]))</span>

<span class="w">        </span><span class="n">sorted_dag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">edge</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">edge</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">pipeline_dag</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="s">&quot;Databus&quot;</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">edge</span><span class="p">[</span><span class="err">&#39;</span><span class="n">source</span><span class="err">&#39;</span><span class="p">]]</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">sorted_dag</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">[]</span><span class="o">:</span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">pipeline_dag</span>

<span class="w">        </span><span class="n">pipeline_dag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">edge</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">edge</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">pipeline_dag</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="s">&quot;Databus&quot;</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">edge</span><span class="p">[</span><span class="err">&#39;</span><span class="n">source</span><span class="err">&#39;</span><span class="p">]]</span>

<span class="w">        </span><span class="cp"># Extracts name of the target or source component from the edge</span>

<span class="w">        </span><span class="n">name_of_component</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lambda</span><span class="w"> </span><span class="n">edge</span><span class="p">,</span><span class="w"> </span><span class="n">target_or_source</span><span class="o">:</span><span class="w"> </span><span class="n">edge</span><span class="p">[</span><span class="n">target_or_source</span><span class="p">].</span><span class="n">rsplit</span><span class="p">(</span><span class="s">&quot;.&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">pipeline_dag</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span>

<span class="w">            </span><span class="n">sorted_targets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">name_of_component</span><span class="p">(</span><span class="n">edge</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;target&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">edge</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">sorted_dag</span><span class="p">]</span>

<span class="w">            </span><span class="n">sorted_dag</span><span class="p">.</span><span class="n">extend</span><span class="p">([</span>

<span class="w">                </span><span class="n">edge</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">edge</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">pipeline_dag</span>

<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="n">name_of_component</span><span class="p">(</span><span class="n">edge</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;source&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">sorted_targets</span>

<span class="w">            </span><span class="p">])</span>

<span class="w">            </span><span class="n">pipeline_dag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">edge</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">edge</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">pipeline_dag</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">edge</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">sorted_dag</span><span class="p">]</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">sorted_dag</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_set_pipeline_structure</span><span class="p">(</span><span class="nb">self</span><span class="p">)</span><span class="o">:</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">pipeline_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">pipeline_config</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;dataFlowPipelineInfo&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{}).</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;projectName&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;n/a&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">pipeline_structure_text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;```plantuml</span><span class="se">\n</span><span class="s">&quot;</span>

<span class="w">        </span><span class="n">components</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">pipeline_config</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;dataFlowPipeline&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{}).</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;components&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[])</span>

<span class="w">        </span><span class="n">variables</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">is_metric</span><span class="p">)</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">components</span><span class="o">:</span>

<span class="w">            </span><span class="n">input_variables</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">_input</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">_input</span><span class="p">[</span><span class="s">&quot;type&quot;</span><span class="p">],</span><span class="w"> </span><span class="n">False</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">_input</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">component</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;inputType&quot;</span><span class="p">)}</span>

<span class="w">            </span><span class="n">output_variables</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">_output</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">_output</span><span class="p">[</span><span class="s">&quot;type&quot;</span><span class="p">],</span><span class="w"> </span><span class="n">_output</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;metric&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">False</span><span class="p">))</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">_output</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">component</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;outputType&quot;</span><span class="p">)}</span>

<span class="w">            </span><span class="n">variables</span><span class="p">.</span><span class="n">update</span><span class="p">({</span><span class="o">**</span><span class="n">input_variables</span><span class="p">,</span><span class="w"> </span><span class="o">**</span><span class="n">output_variables</span><span class="p">})</span>

<span class="w">        </span><span class="n">pipeline_dag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">pipeline_config</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;dataFlowPipeline&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{}).</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;pipelineDag&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[])</span>

<span class="w">        </span><span class="n">sorted_pipeline_dag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PipelineReportWriter</span><span class="p">.</span><span class="n">_sort_pipeline_dag</span><span class="p">(</span><span class="n">pipeline_dag</span><span class="p">)</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">transition</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">sorted_pipeline_dag</span><span class="o">:</span>

<span class="w">            </span><span class="n">source_component_name</span><span class="p">,</span><span class="w"> </span><span class="n">source_variable_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">transition</span><span class="p">[</span><span class="s">&quot;source&quot;</span><span class="p">].</span><span class="n">rsplit</span><span class="p">(</span><span class="s">&quot;.&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>

<span class="w">            </span><span class="n">target_component_name</span><span class="p">,</span><span class="w"> </span><span class="n">target_variable_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">transition</span><span class="p">[</span><span class="s">&quot;target&quot;</span><span class="p">].</span><span class="n">rsplit</span><span class="p">(</span><span class="s">&quot;.&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>

<span class="w">            </span><span class="n">variable_name_to_show</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">source_variable_name</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">source_variable_name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">target_variable_name</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">f</span><span class="s">&quot;{source_variable_name} -&gt; {target_variable_name}&quot;</span>

<span class="w">            </span><span class="n">source_component_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">source_component_name</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;Databus&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AIIS&quot;</span><span class="p">)</span>

<span class="w">            </span><span class="n">target_component_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">target_component_name</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;Databus&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AIIS&quot;</span><span class="p">)</span>

<span class="w">            </span><span class="n">variable_type</span><span class="p">,</span><span class="w"> </span><span class="n">is_metric</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">variables</span><span class="p">[</span><span class="n">source_variable_name</span><span class="p">]</span>

<span class="w">            </span><span class="n">arrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;--&gt;&quot;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">is_metric</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s">&quot;-&gt;&quot;</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">metric</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">drawn</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">dashed</span><span class="w"> </span><span class="n">line</span>

<span class="w">            </span><span class="nb">self</span><span class="p">.</span><span class="n">pipeline_structure_text</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">PL_STRUCTURE</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">source_component</span><span class="o">=</span><span class="n">source_component_name</span><span class="p">,</span>

<span class="w">                                                                </span><span class="n">arrow</span><span class="o">=</span><span class="n">arrow</span><span class="p">,</span>

<span class="w">                                                                </span><span class="n">target_component</span><span class="o">=</span><span class="n">target_component_name</span><span class="p">,</span>

<span class="w">                                                                </span><span class="n">variable_name</span><span class="o">=</span><span class="n">variable_name_to_show</span><span class="p">,</span>

<span class="w">                                                                </span><span class="n">variable_type</span><span class="o">=</span><span class="n">variable_type</span><span class="p">)</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">pipeline_structure_text</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s">&quot;```</span><span class="se">\n\n</span><span class="s">&quot;</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_set_pipeline_info</span><span class="p">(</span><span class="nb">self</span><span class="p">)</span><span class="o">:</span>

<span class="w">        </span><span class="n">dataflow_pipeline_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">pipeline_config</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;dataFlowPipelineInfo&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{})</span>

<span class="w">        </span><span class="n">author</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataflow_pipeline_info</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;author&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;n/a&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="n">created_on</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataflow_pipeline_info</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;createdOn&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;n/a&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="n">pipeline_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataflow_pipeline_info</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;dataFlowPipelineVersion&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;n/a&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataflow_pipeline_info</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;n/a&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="n">package_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataflow_pipeline_info</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;packageId&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;n/a&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="n">project_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataflow_pipeline_info</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;projectName&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;n/a&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">pipeline_info_text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PL_INFO</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">author</span><span class="o">=</span><span class="n">author</span><span class="p">,</span>

<span class="w">                                                 </span><span class="n">created_on</span><span class="o">=</span><span class="n">created_on</span><span class="p">,</span>

<span class="w">                                                 </span><span class="n">pipeline_version</span><span class="o">=</span><span class="n">pipeline_version</span><span class="p">,</span>

<span class="w">                                                 </span><span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>

<span class="w">                                                 </span><span class="n">package_id</span><span class="o">=</span><span class="n">package_id</span><span class="p">,</span>

<span class="w">                                                 </span><span class="n">project_name</span><span class="o">=</span><span class="n">project_name</span><span class="p">)</span>

<span class="w">    </span><span class="cp"># Transform every dependency and package name for consistency; i.e.,</span>

<span class="w">    </span><span class="cp"># opencv-python-headless -&gt; opencv_python_headless; Django -&gt; django</span>

<span class="w">    </span><span class="p">@</span><span class="n">staticmethod</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">transform_package_name</span><span class="p">(</span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">str</span><span class="p">)</span><span class="o">:</span>

<span class="w">        </span><span class="n">new_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;-&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;_&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">new_name</span><span class="p">.</span><span class="n">lower</span><span class="p">()</span>

<span class="w">    </span><span class="cp"># A full dependency set is a set of (package_name, package_version) tuples</span>

<span class="w">    </span><span class="cp"># and contains all the dependencies installed for a component</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">add_full_dependency_set</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span><span class="w"> </span><span class="n">component_name</span><span class="o">:</span><span class="w"> </span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="n">dependency_set</span><span class="o">:</span><span class="w"> </span><span class="n">set</span><span class="p">[</span><span class="n">tuple</span><span class="p">])</span><span class="o">:</span>

<span class="w">        </span><span class="n">dependency_list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sorted</span><span class="p">(</span><span class="n">list</span><span class="p">(</span><span class="n">dependency_set</span><span class="p">),</span><span class="w"> </span><span class="n">key</span><span class="o">=</span><span class="n">lambda</span><span class="w"> </span><span class="n">x</span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">_expand_component_all_dependencies</span><span class="p">(</span><span class="n">component_name</span><span class="p">,</span><span class="w"> </span><span class="n">dependency_list</span><span class="p">)</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">_update_vulnerability_dict</span><span class="p">(</span><span class="n">dependency_list</span><span class="p">)</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_expand_component_all_dependencies</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span><span class="w"> </span><span class="n">component_name</span><span class="o">:</span><span class="w"> </span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="n">dependency_list</span><span class="o">:</span><span class="w"> </span><span class="n">list</span><span class="p">[</span><span class="n">tuple</span><span class="p">])</span><span class="o">:</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">component_name</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">component_all_dependencies</span><span class="o">:</span>

<span class="w">            </span><span class="nb">self</span><span class="p">.</span><span class="n">component_all_dependencies</span><span class="p">[</span><span class="n">component_name</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">set</span><span class="p">()</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">package_name</span><span class="p">,</span><span class="w"> </span><span class="n">package_version</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">dependency_list</span><span class="o">:</span>

<span class="w">            </span><span class="n">transformed_package_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PipelineReportWriter</span><span class="p">.</span><span class="n">transform_package_name</span><span class="p">(</span><span class="n">package_name</span><span class="p">)</span>

<span class="w">            </span><span class="nb">self</span><span class="p">.</span><span class="n">component_all_dependencies</span><span class="p">[</span><span class="n">component_name</span><span class="p">].</span><span class="n">add</span><span class="p">((</span><span class="n">transformed_package_name</span><span class="p">,</span><span class="w"> </span><span class="n">package_version</span><span class="p">))</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_update_vulnerability_dict</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span><span class="w"> </span><span class="n">dependency_list</span><span class="o">:</span><span class="w"> </span><span class="n">list</span><span class="p">[</span><span class="n">tuple</span><span class="p">])</span><span class="o">:</span>

<span class="w">        </span><span class="n">vulnerability_dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">package_name</span><span class="p">,</span><span class="w"> </span><span class="n">package_version</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">dependency_list</span><span class="o">:</span>

<span class="w">            </span><span class="n">transformed_package_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PipelineReportWriter</span><span class="p">.</span><span class="n">transform_package_name</span><span class="p">(</span><span class="n">package_name</span><span class="p">)</span>

<span class="w">            </span><span class="n">vulnerability_dict</span><span class="p">[(</span><span class="n">transformed_package_name</span><span class="p">,</span><span class="w"> </span><span class="n">package_version</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span>

<span class="w">            </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f</span><span class="s">&quot;https://pypi.org/pypi/{package_name}/{package_version}/json&quot;</span>

<span class="w">            </span><span class="nl">try</span><span class="p">:</span>

<span class="w">                </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">200</span><span class="o">:</span>

<span class="w">                    </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>

<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="err">&#39;</span><span class="n">vulnerabilities</span><span class="err">&#39;</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">data</span><span class="o">:</span>

<span class="w">                        </span><span class="n">vulnerability_dict</span><span class="p">[(</span><span class="n">transformed_package_name</span><span class="p">,</span><span class="w"> </span><span class="n">package_version</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">[</span><span class="err">&#39;</span><span class="n">vulnerabilities</span><span class="err">&#39;</span><span class="p">]</span>

<span class="w">            </span><span class="n">except</span><span class="w"> </span><span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">Timeout</span><span class="o">:</span>

<span class="w">                </span><span class="n">pass</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">vulnerability_dict</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">vulnerability_dict</span><span class="p">)</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">add_direct_dependencies</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span><span class="w"> </span><span class="n">component_name</span><span class="o">:</span><span class="w"> </span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="n">direct_dependencies</span><span class="o">:</span><span class="w"> </span><span class="n">dict</span><span class="p">)</span><span class="o">:</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">component_direct_dependency_namelist</span><span class="p">[</span><span class="n">component_name</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">PipelineReportWriter</span><span class="p">.</span><span class="n">transform_package_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

<span class="w">                                                                     </span><span class="k">for</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">list</span><span class="p">(</span><span class="n">direct_dependencies</span><span class="p">.</span><span class="n">keys</span><span class="p">())]</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">write_report</span><span class="p">(</span><span class="nb">self</span><span class="p">)</span><span class="o">:</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">report_path</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">None</span><span class="o">:</span>

<span class="w">            </span><span class="k">return</span>

<span class="w">        </span><span class="nb">self</span><span class="p">.</span><span class="n">_set_component_dependencies</span><span class="p">()</span>

<span class="w">        </span><span class="n">with</span><span class="w"> </span><span class="n">open</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">report_path</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;w&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">encoding</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">file</span><span class="o">:</span>

<span class="w">            </span><span class="nb">self</span><span class="p">.</span><span class="n">_write_headline</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="w">            </span><span class="nb">self</span><span class="p">.</span><span class="n">_write_pipeline_info</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="w">            </span><span class="nb">self</span><span class="p">.</span><span class="n">_write_pipeline_structure</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="w">            </span><span class="nb">self</span><span class="p">.</span><span class="n">_write_dependencies</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="w">            </span><span class="nb">self</span><span class="p">.</span><span class="n">_write_package_vulnerabilities</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="w">            </span><span class="nb">self</span><span class="p">.</span><span class="n">_write_warnings</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_set_component_dependencies</span><span class="p">(</span><span class="nb">self</span><span class="p">)</span><span class="o">:</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">component_all_dependencies</span><span class="p">.</span><span class="n">keys</span><span class="p">()</span><span class="o">:</span>

<span class="w">            </span><span class="cp"># self.component_direct_dependencies should contain everything from self.component_all_dependencies</span>

<span class="w">            </span><span class="cp">#   if it is direct, i.e., the name is in self.component_direct_dependency_namelist</span>

<span class="w">            </span><span class="cp"># self.component_transitive_dependencies should contain everything else</span>

<span class="w">            </span><span class="nb">self</span><span class="p">.</span><span class="n">component_transitive_dependencies</span><span class="p">[</span><span class="n">component</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">set</span><span class="p">()</span>

<span class="w">            </span><span class="nb">self</span><span class="p">.</span><span class="n">component_direct_dependencies</span><span class="p">[</span><span class="n">component</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">set</span><span class="p">()</span>

<span class="w">            </span><span class="n">all_dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">component_all_dependencies</span><span class="p">[</span><span class="n">component</span><span class="p">]</span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">dependency_name</span><span class="p">,</span><span class="w"> </span><span class="n">dependency_version</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">all_dependencies</span><span class="o">:</span>

<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="n">dependency_name</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">component_direct_dependency_namelist</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">component</span><span class="p">,</span><span class="w"> </span><span class="p">[])</span><span class="o">:</span>

<span class="w">                    </span><span class="nb">self</span><span class="p">.</span><span class="n">component_direct_dependencies</span><span class="p">[</span><span class="n">component</span><span class="p">].</span><span class="n">add</span><span class="p">((</span><span class="n">dependency_name</span><span class="p">,</span><span class="w"> </span><span class="n">dependency_version</span><span class="p">))</span>

<span class="w">                </span><span class="nl">else</span><span class="p">:</span>

<span class="w">                    </span><span class="nb">self</span><span class="p">.</span><span class="n">component_transitive_dependencies</span><span class="p">[</span><span class="n">component</span><span class="p">].</span><span class="n">add</span><span class="p">((</span><span class="n">dependency_name</span><span class="p">,</span><span class="w"> </span><span class="n">dependency_version</span><span class="p">))</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_write_headline</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">)</span><span class="o">:</span>

<span class="w">        </span><span class="n">file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_REPORT_HEADLINE</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">pipeline_name</span><span class="o">=</span><span class="nb">self</span><span class="p">.</span><span class="n">pipeline_name</span><span class="p">))</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_write_pipeline_info</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">)</span><span class="o">:</span>

<span class="w">        </span><span class="n">file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_INFO_HEADLINE</span><span class="p">)</span>

<span class="w">        </span><span class="n">file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">pipeline_info_text</span><span class="p">)</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_write_pipeline_structure</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">)</span><span class="o">:</span>

<span class="w">        </span><span class="n">file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_STRUCTURE_HEADLINE</span><span class="p">)</span>

<span class="w">        </span><span class="n">file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">pipeline_structure_text</span><span class="p">)</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_write_dependencies</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">)</span><span class="o">:</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">component_name</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">component_all_dependencies</span><span class="p">.</span><span class="n">keys</span><span class="p">()</span><span class="o">:</span>

<span class="w">            </span><span class="n">direct_dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">component_direct_dependencies</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">component_name</span><span class="p">,</span><span class="w"> </span><span class="n">set</span><span class="p">())</span>

<span class="w">            </span><span class="n">transitive_dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">component_transitive_dependencies</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">component_name</span><span class="p">,</span><span class="w"> </span><span class="n">set</span><span class="p">())</span>

<span class="w">            </span><span class="n">file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_COMPONMENT_DEPENDENCIES_HEADLINE</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">component_name</span><span class="o">=</span><span class="n">component_name</span><span class="p">))</span>

<span class="w">            </span><span class="n">file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_COMPONENT_DIRECT_DEPENDENCIES_HEADLINE</span><span class="p">)</span>

<span class="w">            </span><span class="n">sorted_direct_dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sorted</span><span class="p">(</span><span class="n">list</span><span class="p">(</span><span class="n">direct_dependencies</span><span class="p">),</span><span class="w"> </span><span class="n">key</span><span class="o">=</span><span class="n">lambda</span><span class="w"> </span><span class="n">x</span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">dependency_name</span><span class="p">,</span><span class="w"> </span><span class="n">dependency_version</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">sorted_direct_dependencies</span><span class="o">:</span>

<span class="w">                </span><span class="n">file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_COMPONENT_DIRECT_DEPENDENCY</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">dependency_name</span><span class="o">=</span><span class="n">dependency_name</span><span class="p">,</span>

<span class="w">                                                                 </span><span class="n">dependency_version</span><span class="o">=</span><span class="n">dependency_version</span><span class="p">))</span>

<span class="w">            </span><span class="n">file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>

<span class="w">            </span><span class="n">file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_COMPONENT_TRANSITIVE_DEPENDENCIES_HEADLINE</span><span class="p">)</span>

<span class="w">            </span><span class="n">sorted_transitive_dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sorted</span><span class="p">(</span><span class="n">list</span><span class="p">(</span><span class="n">transitive_dependencies</span><span class="p">),</span><span class="w"> </span><span class="n">key</span><span class="o">=</span><span class="n">lambda</span><span class="w"> </span><span class="n">x</span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">dependency_name</span><span class="p">,</span><span class="w"> </span><span class="n">dependency_version</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">sorted_transitive_dependencies</span><span class="o">:</span>

<span class="w">                </span><span class="n">file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_COMPONENT_TRANSITIVE_DEPENDENCY</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">dependency_name</span><span class="o">=</span><span class="n">dependency_name</span><span class="p">,</span>

<span class="w">                                                                     </span><span class="n">dependency_version</span><span class="o">=</span><span class="n">dependency_version</span><span class="p">))</span>

<span class="w">            </span><span class="n">file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_get_components_who_have_given_package</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span><span class="w"> </span><span class="n">package_name</span><span class="p">,</span><span class="w"> </span><span class="n">package_version</span><span class="p">)</span><span class="o">:</span>

<span class="w">        </span><span class="n">components</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">component_all_dependencies</span><span class="o">:</span>

<span class="w">            </span><span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">component_all_dependencies</span><span class="p">[</span><span class="n">component</span><span class="p">]</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">package_name</span><span class="p">,</span><span class="w"> </span><span class="n">package_version</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">dependencies</span><span class="o">:</span>

<span class="w">                </span><span class="n">components</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">component</span><span class="p">)</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">components</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_write_package_vulnerabilities</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">)</span><span class="o">:</span>

<span class="w">        </span><span class="n">file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_PACKAGE_VULNERABILITIES_HEADLINE</span><span class="p">)</span>

<span class="w">        </span><span class="n">sorted_vulnerability_dict_items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sorted</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">vulnerability_dict</span><span class="p">.</span><span class="n">items</span><span class="p">(),</span><span class="w"> </span><span class="n">key</span><span class="o">=</span><span class="n">lambda</span><span class="w"> </span><span class="n">x</span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">package_name</span><span class="p">,</span><span class="w"> </span><span class="n">package_version</span><span class="p">),</span><span class="w"> </span><span class="n">vulnerabilities</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">sorted_vulnerability_dict_items</span><span class="o">:</span>

<span class="w">            </span><span class="n">components</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">_get_components_who_have_given_package</span><span class="p">(</span><span class="n">package_name</span><span class="p">,</span><span class="w"> </span><span class="n">package_version</span><span class="p">))</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">vulnerabilities</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">None</span><span class="o">:</span>

<span class="w">                </span><span class="n">file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_PACKAGE_VULNERABILITY_CANNOT_BE_CHECKED</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">package_name</span><span class="o">=</span><span class="n">package_name</span><span class="p">,</span>

<span class="w">                                                                             </span><span class="n">package_version</span><span class="o">=</span><span class="n">package_version</span><span class="p">,</span>

<span class="w">                                                                             </span><span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">))</span>

<span class="w">            </span><span class="n">elif</span><span class="w"> </span><span class="n">vulnerabilities</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">[]</span><span class="o">:</span>

<span class="w">                </span><span class="n">file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_PACKAGE_VULNERABILITY_NOT_KNOWN</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">package_name</span><span class="o">=</span><span class="n">package_name</span><span class="p">,</span>

<span class="w">                                                                     </span><span class="n">package_version</span><span class="o">=</span><span class="n">package_version</span><span class="p">,</span>

<span class="w">                                                                     </span><span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">))</span>

<span class="w">            </span><span class="nl">else</span><span class="p">:</span>

<span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="n">vulnerability</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">vulnerabilities</span><span class="o">:</span>

<span class="w">                    </span><span class="n">vulnerability_aliases</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vulnerability</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="err">&#39;</span><span class="n">aliases</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Vulnerability</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">alias</span><span class="p">.</span><span class="w"> </span><span class="n">Check</span><span class="w"> </span><span class="p">[</span><span class="n">PyPI</span><span class="w"> </span><span class="n">repository</span><span class="p">](</span><span class="n">https</span><span class="o">:</span><span class="c1">//pypi.org/) for more details.&#39;)</span>

<span class="w">                    </span><span class="n">vulnerability_link</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vulnerability</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="err">&#39;</span><span class="n">link</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">No</span><span class="w"> </span><span class="n">link</span><span class="w"> </span><span class="n">found</span><span class="err">&#39;</span><span class="p">)</span>

<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="n">vulnerability_link</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="err">&#39;</span><span class="n">No</span><span class="w"> </span><span class="n">link</span><span class="w"> </span><span class="n">found</span><span class="err">&#39;</span><span class="o">:</span>

<span class="w">                        </span><span class="n">vulnerability_link</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f</span><span class="s">&quot;[{vulnerability_link}]({vulnerability_link})&quot;</span>

<span class="w">                    </span><span class="n">vulnerability_details</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vulnerability</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="err">&#39;</span><span class="n">details</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">No</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="n">found</span><span class="err">&#39;</span><span class="p">)</span>

<span class="w">                    </span><span class="n">vulnerability_fixed_in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vulnerability</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="err">&#39;</span><span class="n">fixed_in</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;&#39;</span><span class="p">)</span>

<span class="w">                    </span><span class="n">file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">PL_PACKAGE_VULNERABILITY</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">package_name</span><span class="o">=</span><span class="n">package_name</span><span class="p">,</span>

<span class="w">                                                               </span><span class="n">package_version</span><span class="o">=</span><span class="n">package_version</span><span class="p">,</span>

<span class="w">                                                               </span><span class="n">vulnerability_aliases</span><span class="o">=</span><span class="n">vulnerability_aliases</span><span class="p">,</span>

<span class="w">                                                               </span><span class="n">vulnerability_link</span><span class="o">=</span><span class="n">vulnerability_link</span><span class="p">,</span>

<span class="w">                                                               </span><span class="n">vulnerability_details</span><span class="o">=</span><span class="n">vulnerability_details</span><span class="p">,</span>

<span class="w">                                                               </span><span class="n">vulnerability_fixed_in</span><span class="o">=</span><span class="n">vulnerability_fixed_in</span><span class="p">,</span>

<span class="w">                                                               </span><span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">))</span>

<span class="w">        </span><span class="n">file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
</code></pre></div>

</details>
<hr />
<h4 id="ancestors-in-mro">Ancestors (in MRO)</h4>
<ul>
<li>simaticai.helpers.reporter.ReportWriter</li>
</ul>
<h4 id="static-methods">Static methods</h4>
<h4 id="transform_package_name">transform_package_name</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">transform_package_name</span><span class="p">(</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="err">@</span><span class="nx">staticmethod</span>

<span class="w">    </span><span class="nx">def</span><span class="w"> </span><span class="nx">transform_package_name</span><span class="p">(</span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">str</span><span class="p">):</span>

<span class="w">        </span><span class="nx">new_name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">name</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s">&quot;-&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;_&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">new_name</span><span class="p">.</span><span class="nx">lower</span><span class="p">()</span>
</code></pre></div>

</details>
<h4 id="methods">Methods</h4>
<h4 id="add_direct_dependencies">add_direct_dependencies</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_direct_dependencies</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">component_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">direct_dependencies</span><span class="p">:</span> <span class="nb">dict</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">add_direct_dependencies</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">component_name</span><span class="p">:</span><span class="w"> </span><span class="nf">str</span><span class="p">,</span><span class="w"> </span><span class="nl">direct_dependencies</span><span class="p">:</span><span class="w"> </span><span class="n">dict</span><span class="p">)</span><span class="err">:</span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">component_direct_dependency_namelist</span><span class="o">[</span><span class="n">component_name</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">PipelineReportWriter.transform_package_name(name)</span>

<span class="n">                                                                     for name in list(direct_dependencies.keys())</span><span class="o">]</span>
</code></pre></div>

</details>
<h4 id="add_full_dependency_set">add_full_dependency_set</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_full_dependency_set</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">component_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">dependency_set</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">tuple</span><span class="p">]</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">add_full_dependency_set</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">component_name</span><span class="p">:</span><span class="w"> </span><span class="nf">str</span><span class="p">,</span><span class="w"> </span><span class="nl">dependency_set</span><span class="p">:</span><span class="w"> </span><span class="k">set</span><span class="o">[</span><span class="n">tuple</span><span class="o">]</span><span class="p">)</span><span class="err">:</span>

<span class="w">        </span><span class="n">dependency_list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sorted</span><span class="p">(</span><span class="n">list</span><span class="p">(</span><span class="n">dependency_set</span><span class="p">),</span><span class="w"> </span><span class="k">key</span><span class="o">=</span><span class="n">lambda</span><span class="w"> </span><span class="nl">x</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="p">)</span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_expand_component_all_dependencies</span><span class="p">(</span><span class="n">component_name</span><span class="p">,</span><span class="w"> </span><span class="n">dependency_list</span><span class="p">)</span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_update_vulnerability_dict</span><span class="p">(</span><span class="n">dependency_list</span><span class="p">)</span>
</code></pre></div>

</details>
<h4 id="add_warning">add_warning</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_warning</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">,</span>
    <span class="n">line_number</span><span class="p">,</span>
    <span class="n">warning_msg</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code>    def add_warning(self, name, filename, line_number, warning_msg):

        self.warnings_text += WARNING_LINE.format(name=name, filename=filename, line_number=line_number, warning_msg=warning_msg)
</code></pre></div>

</details>
<h4 id="set_path">set_path</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_path</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">report_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code>    def set_path(self, report_path: Path):

        self.report_path = report_path
</code></pre></div>

</details>
<h4 id="set_pipeline_config">set_pipeline_config</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_pipeline_config</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">pipeline_config</span><span class="p">:</span> <span class="nb">dict</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code>    def set_pipeline_config(self, pipeline_config: dict):

        self.pipeline_config = pipeline_config

        self._set_pipeline_info()

        self._set_pipeline_structure()
</code></pre></div>

</details>
<h4 id="write_report">write_report</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">write_report</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="nx">def</span><span class="w"> </span><span class="nx">write_report</span><span class="p">(</span><span class="kp">self</span><span class="p">):</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="kp">self</span><span class="p">.</span><span class="nx">report_path</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">None</span><span class="p">:</span>

<span class="w">            </span><span class="k">return</span>

<span class="w">        </span><span class="kp">self</span><span class="p">.</span><span class="nx">_set_component_dependencies</span><span class="p">()</span>

<span class="w">        </span><span class="nx">with</span><span class="w"> </span><span class="nx">open</span><span class="p">(</span><span class="kp">self</span><span class="p">.</span><span class="nx">report_path</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;w&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">encoding</span><span class="p">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nx">file</span><span class="p">:</span>

<span class="w">            </span><span class="kp">self</span><span class="p">.</span><span class="nx">_write_headline</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span>

<span class="w">            </span><span class="kp">self</span><span class="p">.</span><span class="nx">_write_pipeline_info</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span>

<span class="w">            </span><span class="kp">self</span><span class="p">.</span><span class="nx">_write_pipeline_structure</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span>

<span class="w">            </span><span class="kp">self</span><span class="p">.</span><span class="nx">_write_dependencies</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span>

<span class="w">            </span><span class="kp">self</span><span class="p">.</span><span class="nx">_write_package_vulnerabilities</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span>

<span class="w">            </span><span class="kp">self</span><span class="p">.</span><span class="nx">_write_warnings</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span>
</code></pre></div>

</details>
<h3 id="pipelinerunnerreportwriter">PipelineRunnerReportWriter</h3>
<p>PipelineRunnerReportWriter is responsible for generating a detailed report of a local pipeline execution.</p>
<p>It builds folder structures from zip files, manages component payload counts, and adds installed packages information.</p>
<p>Methods:
    set_path(report_path: Path):
        Sets the path where the report will be saved.
    set_package_zip_path(zip_path: Path):
        Sets the path to the package zip file and updates the folder tree.
    set_input_payload_length(component_name: str, length: int):
        Sets the input payload length for a component.
    set_output_payload_length(component_name: str, length: int):
        Sets the output payload length for a component.
    add_installed_packages(component_name: str, pip_report_file: Path):
        Adds installed packages for a component from a pip report file.
    add_warning(name, filename, line_number, warning_msg):
        Adds a warning to the report.
    write_report():
        Writes the report to the specified path.</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PipelineRunnerReportWriter</span><span class="p">(</span>

<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="n">PipelineRunnerReportWriter</span><span class="p">(</span><span class="n">ReportWriter</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    PipelineRunnerReportWriter is responsible for generating a detailed report of a local pipeline execution.</span>

<span class="sd">    It builds folder structures from zip files, manages component payload counts, and adds installed packages information.</span>

<span class="sd">    Methods:</span>

<span class="sd">        set_path(report_path: Path):</span>

<span class="sd">            Sets the path where the report will be saved.</span>

<span class="sd">        set_package_zip_path(zip_path: Path):</span>

<span class="sd">            Sets the path to the package zip file and updates the folder tree.</span>

<span class="sd">        set_input_payload_length(component_name: str, length: int):</span>

<span class="sd">            Sets the input payload length for a component.</span>

<span class="sd">        set_output_payload_length(component_name: str, length: int):</span>

<span class="sd">            Sets the output payload length for a component.</span>

<span class="sd">        add_installed_packages(component_name: str, pip_report_file: Path):</span>

<span class="sd">            Adds installed packages for a component from a pip report file.</span>

<span class="sd">        add_warning(name, filename, line_number, warning_msg):</span>

<span class="sd">            Adds a warning to the report.</span>

<span class="sd">        write_report():</span>

<span class="sd">            Writes the report to the specified path.</span>

<span class="sd">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

<span class="w">        </span><span class="n">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>

<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">package_zip_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span>

<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">zip_file_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span>

<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">component_installed_packages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w">  </span><span class="c1"># component_name -&gt; list[tuple(package_name, package_version, whl_name)]</span>

<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">component_payload_length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w">  </span><span class="c1"># component_name -&gt; [input_payload_length, output_payload_length]</span>

<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">python_packages_zip_content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">set</span><span class="p">()</span>

<span class="w">        </span><span class="c1"># report text sections to fill</span>

<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">folder_tree_text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span>

<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">warnings_text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">set_package_zip_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">zip_path</span><span class="p">:</span><span class="w"> </span><span class="n">Path</span><span class="p">):</span>

<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">package_zip_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">zip_path</span>

<span class="w">        </span><span class="n">with</span><span class="w"> </span><span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">zip_path</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;r&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">zipf</span><span class="p">:</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">zip_file_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">zipf</span><span class="o">.</span><span class="n">filename</span>

<span class="w">            </span><span class="n">zip_tree</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">item_name</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">zipf</span><span class="o">.</span><span class="n">namelist</span><span class="p">():</span>

<span class="w">                </span><span class="n">zip_tree</span><span class="p">[</span><span class="n">item_name</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ZipTreeElement</span><span class="p">(</span><span class="n">full_name</span><span class="o">=</span><span class="n">item_name</span><span class="p">,</span><span class="w"> </span><span class="n">file_size</span><span class="o">=</span><span class="n">zipf</span><span class="o">.</span><span class="n">getinfo</span><span class="p">(</span><span class="n">item_name</span><span class="p">)</span><span class="o">.</span><span class="n">file_size</span><span class="p">)</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">_print_structure_recursively</span><span class="p">(</span><span class="n">zip_tree</span><span class="p">,</span><span class="w"> </span><span class="n">zipf</span><span class="p">)</span>

<span class="w">    </span><span class="err">@</span><span class="n">staticmethod</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_get_folder_and_file_list</span><span class="p">(</span><span class="n">item_names</span><span class="p">:</span><span class="w"> </span><span class="n">list</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tuple</span><span class="p">[</span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">list</span><span class="p">]:</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Given a list of item names, each item name is a file that either starts with a folder name, or not.</span>

<span class="sd">        This function separates the folder names and the standalone file names.</span>

<span class="sd">        E.g., [&quot;a/b/something.txt&quot;, &quot;c/another.txt&quot;, &quot;else.txt&quot;] -&gt; [&quot;a/&quot;, &quot;c/&quot;], [&quot;else.txt&quot;]</span>

<span class="sd">        &quot;&quot;&quot;</span>

<span class="w">        </span><span class="n">folder_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">set</span><span class="p">()</span>

<span class="w">        </span><span class="n">file_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">item_names</span><span class="p">:</span>

<span class="w">            </span><span class="n">item_parts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">item</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">item_parts</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span>

<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="n">item_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">:</span>

<span class="w">                    </span><span class="n">folder_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">item_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;/&#39;</span><span class="p">)</span>

<span class="w">            </span><span class="k">else</span><span class="p">:</span>

<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">:</span>

<span class="w">                    </span><span class="n">file_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">sorted</span><span class="p">(</span><span class="n">list</span><span class="p">(</span><span class="n">folder_names</span><span class="p">)),</span><span class="w"> </span><span class="n">sorted</span><span class="p">(</span><span class="n">file_names</span><span class="p">)</span>

<span class="w">    </span><span class="err">@</span><span class="n">staticmethod</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">format_size</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;Format file size in human-readable form.&quot;&quot;&quot;</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;KB&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;MB&#39;</span><span class="p">]:</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">:</span>

<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">f</span><span class="s2">&quot;{size} {unit}&quot;</span>

<span class="w">            </span><span class="n">size</span><span class="w"> </span><span class="o">//=</span><span class="w"> </span><span class="mi">1000</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">f</span><span class="s2">&quot;{size} GB&quot;</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_print_structure_recursively</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">zip_tree</span><span class="p">,</span><span class="w"> </span><span class="n">zipf</span><span class="p">,</span><span class="w"> </span><span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>

<span class="w">        </span><span class="n">folder_names</span><span class="p">,</span><span class="w"> </span><span class="n">file_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PipelineRunnerReportWriter</span><span class="o">.</span><span class="n">_get_folder_and_file_list</span><span class="p">(</span><span class="n">zip_tree</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

<span class="w">        </span><span class="n">is_file_names_empty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file_names</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">[]</span>

<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">_print_folder_structure</span><span class="p">(</span><span class="n">zip_tree</span><span class="p">,</span><span class="w"> </span><span class="n">zipf</span><span class="p">,</span><span class="w"> </span><span class="n">prefix</span><span class="p">,</span><span class="w"> </span><span class="n">folder_names</span><span class="p">,</span><span class="w"> </span><span class="n">is_file_names_empty</span><span class="p">)</span>

<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">_print_file_structure</span><span class="p">(</span><span class="n">zip_tree</span><span class="p">,</span><span class="w"> </span><span class="n">zipf</span><span class="p">,</span><span class="w"> </span><span class="n">prefix</span><span class="p">,</span><span class="w"> </span><span class="n">file_names</span><span class="p">)</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_print_folder_structure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">zip_tree</span><span class="p">,</span><span class="w"> </span><span class="n">zipf</span><span class="p">,</span><span class="w"> </span><span class="n">prefix</span><span class="p">,</span><span class="w"> </span><span class="n">folder_names</span><span class="p">,</span><span class="w"> </span><span class="n">is_file_names_empty</span><span class="p">):</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">folder</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">enumerate</span><span class="p">(</span><span class="n">folder_names</span><span class="p">):</span>

<span class="w">            </span><span class="n">is_last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">folder_names</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">is_file_names_empty</span>

<span class="w">            </span><span class="n">connector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LPLR_FOLDER_STRUCTURE_LAST_CONNECTOR_SYMBOL</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">is_last</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">LPLR_FOLDER_STRUCTURE_MID_CONNECTOR_SYMBOL</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">folder_tree_text</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">LPLR_FOLDER_STRUCTURE_FOLDER_LINE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">,</span>

<span class="w">                                                                              </span><span class="n">connector</span><span class="o">=</span><span class="n">connector</span><span class="p">,</span>

<span class="w">                                                                              </span><span class="n">folder</span><span class="o">=</span><span class="n">folder</span><span class="p">)</span>

<span class="w">            </span><span class="c1"># create a new tree where items start with the same folder name; but cut out the folder name</span>

<span class="w">            </span><span class="c1"># (going deeper in the recursion)</span>

<span class="w">            </span><span class="n">new_zip_tree_from_folder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">zip_tree</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="n">k</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>

<span class="w">                    </span><span class="n">new_file_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">k</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>

<span class="w">                    </span><span class="n">new_zip_tree_from_folder</span><span class="p">[</span><span class="n">new_file_name</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span>

<span class="w">            </span><span class="n">prefix_post</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LPLR_FOLDER_STRUCTURE_LAST_PREFIX_SYMBOL</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">is_last</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">LPLR_FOLDER_STRUCTURE_MID_PREFIX_SYMBOL</span>

<span class="w">            </span><span class="n">new_prefix_from_folder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">prefix_post</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">_print_structure_recursively</span><span class="p">(</span><span class="n">new_zip_tree_from_folder</span><span class="p">,</span><span class="w"> </span><span class="n">zipf</span><span class="p">,</span><span class="w"> </span><span class="n">new_prefix_from_folder</span><span class="p">)</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_print_file_structure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">zip_tree</span><span class="p">,</span><span class="w"> </span><span class="n">zipf</span><span class="p">,</span><span class="w"> </span><span class="n">prefix</span><span class="p">,</span><span class="w"> </span><span class="n">file_names</span><span class="p">):</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">file_name</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">enumerate</span><span class="p">(</span><span class="n">file_names</span><span class="p">):</span>

<span class="w">            </span><span class="n">is_last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">file_names</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>

<span class="w">            </span><span class="n">size_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PipelineRunnerReportWriter</span><span class="o">.</span><span class="n">format_size</span><span class="p">(</span><span class="n">zip_tree</span><span class="p">[</span><span class="n">file_name</span><span class="p">]</span><span class="o">.</span><span class="n">file_size</span><span class="p">)</span>

<span class="w">            </span><span class="n">connector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LPLR_FOLDER_STRUCTURE_LAST_CONNECTOR_SYMBOL</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">is_last</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">LPLR_FOLDER_STRUCTURE_MID_CONNECTOR_SYMBOL</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">folder_tree_text</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">LPLR_FOLDER_STRUCTURE_FILE_LINE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">,</span>

<span class="w">                                                                            </span><span class="n">connector</span><span class="o">=</span><span class="n">connector</span><span class="p">,</span>

<span class="w">                                                                            </span><span class="n">file</span><span class="o">=</span><span class="n">file_name</span><span class="p">,</span>

<span class="w">                                                                            </span><span class="n">size</span><span class="o">=</span><span class="n">size_str</span><span class="p">)</span>

<span class="w">            </span><span class="c1"># zip files are handled similarly to folders:</span>

<span class="w">            </span><span class="c1"># create a new tree where items start with the same folder name; but cut out the folder name</span>

<span class="w">            </span><span class="c1"># (going deeper in the recursion)</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">file_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.zip&#39;</span><span class="p">):</span>

<span class="w">                </span><span class="k">continue</span>

<span class="w">            </span><span class="n">full_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">zip_tree</span><span class="p">[</span><span class="n">file_name</span><span class="p">]</span><span class="o">.</span><span class="n">full_name</span>

<span class="w">            </span><span class="n">with</span><span class="w"> </span><span class="n">zipf</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">full_name</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">nested_zip_file</span><span class="p">:</span>

<span class="w">                </span><span class="n">nested_zip_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">nested_zip_file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

<span class="w">                </span><span class="n">with</span><span class="w"> </span><span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">nested_zip_data</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;r&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">nested_zipf</span><span class="p">:</span>

<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="n">file_name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;PythonPackages.zip&quot;</span><span class="p">:</span>

<span class="w">                        </span><span class="bp">self</span><span class="o">.</span><span class="n">python_packages_zip_content</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">sorted</span><span class="p">(</span><span class="n">list</span><span class="p">(</span><span class="n">nested_zipf</span><span class="o">.</span><span class="n">namelist</span><span class="p">())))</span>

<span class="w">                    </span><span class="c1"># create a new tree where items start with the same folder name; but cut out the folder name</span>

<span class="w">                    </span><span class="n">new_zip_tree_from_zip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>

<span class="w">                    </span><span class="k">for</span><span class="w"> </span><span class="n">nested_item_name</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">nested_zipf</span><span class="o">.</span><span class="n">namelist</span><span class="p">():</span>

<span class="w">                        </span><span class="n">new_zip_tree_from_zip</span><span class="p">[</span><span class="n">nested_item_name</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ZipTreeElement</span><span class="p">(</span><span class="n">nested_item_name</span><span class="p">,</span>

<span class="w">                                                                                 </span><span class="n">nested_zipf</span><span class="o">.</span><span class="n">getinfo</span><span class="p">(</span><span class="n">nested_item_name</span><span class="p">)</span><span class="o">.</span><span class="n">file_size</span><span class="p">)</span>

<span class="w">                    </span><span class="n">prefix_post</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LPLR_FOLDER_STRUCTURE_LAST_PREFIX_SYMBOL</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">is_last</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">LPLR_FOLDER_STRUCTURE_MID_PREFIX_SYMBOL</span>

<span class="w">                    </span><span class="n">new_prefix_from_zip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">prefix_post</span>

<span class="w">                    </span><span class="bp">self</span><span class="o">.</span><span class="n">_print_structure_recursively</span><span class="p">(</span><span class="n">new_zip_tree_from_zip</span><span class="p">,</span><span class="w"> </span><span class="n">nested_zipf</span><span class="p">,</span><span class="w"> </span><span class="n">new_prefix_from_zip</span><span class="p">)</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">set_input_payload_length</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">component_name</span><span class="p">:</span><span class="w"> </span><span class="nb">str</span><span class="p">,</span><span class="w"> </span><span class="n">length</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="p">):</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">component_name</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">component_payload_length</span><span class="p">:</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">component_payload_length</span><span class="p">[</span><span class="n">component_name</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">length</span>

<span class="w">        </span><span class="k">else</span><span class="p">:</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">component_payload_length</span><span class="p">[</span><span class="n">component_name</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">length</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">set_output_payload_length</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">component_name</span><span class="p">:</span><span class="w"> </span><span class="nb">str</span><span class="p">,</span><span class="w"> </span><span class="n">length</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="p">):</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">component_name</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">component_payload_length</span><span class="p">:</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">component_payload_length</span><span class="p">[</span><span class="n">component_name</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">length</span>

<span class="w">        </span><span class="k">else</span><span class="p">:</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">component_payload_length</span><span class="p">[</span><span class="n">component_name</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">length</span><span class="p">]</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">add_installed_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">component_name</span><span class="p">:</span><span class="w"> </span><span class="nb">str</span><span class="p">,</span><span class="w"> </span><span class="n">pip_report_file</span><span class="p">:</span><span class="w"> </span><span class="n">Path</span><span class="p">):</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">pip_report_file</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>

<span class="w">            </span><span class="k">return</span>

<span class="w">        </span><span class="n">pip_report</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>

<span class="w">        </span><span class="n">with</span><span class="w"> </span><span class="n">open</span><span class="p">(</span><span class="n">pip_report_file</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;r&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">file</span><span class="p">:</span>

<span class="w">            </span><span class="n">pip_report</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">component_name</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">component_installed_packages</span><span class="p">:</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">component_installed_packages</span><span class="p">[</span><span class="n">component_name</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>

<span class="w">        </span><span class="n">installed_packages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pip_report</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;install&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[])</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">installed_packages</span><span class="p">:</span>

<span class="w">            </span><span class="n">package_url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">package</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;download_info&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span>

<span class="w">            </span><span class="n">wheel_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">package_url</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">package_url</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.whl&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s2">&quot;n/a&quot;</span>

<span class="w">            </span><span class="n">metadata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">package</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{})</span>

<span class="w">            </span><span class="n">package_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;n/a&quot;</span><span class="p">)</span>

<span class="w">            </span><span class="n">package_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;version&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;n/a&quot;</span><span class="p">)</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">component_installed_packages</span><span class="p">[</span><span class="n">component_name</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">package_name</span><span class="p">,</span><span class="w"> </span><span class="n">package_version</span><span class="p">,</span><span class="w"> </span><span class="n">wheel_name</span><span class="p">))</span>

<span class="w">    </span><span class="c1"># check if one or more reports already exists; set the report path so a new report will have a new index</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_set_path_from_zip_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">package_zip_path</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">None</span><span class="p">:</span>

<span class="w">            </span><span class="k">return</span>

<span class="w">        </span><span class="n">workdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">package_zip_path</span><span class="o">.</span><span class="n">parent</span>

<span class="w">        </span><span class="n">base_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">package_zip_path</span><span class="o">.</span><span class="n">stem</span>

<span class="w">        </span><span class="n">report_files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="p">(</span><span class="n">workdir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;{base_name}_execution_report_*.md&quot;</span><span class="p">))</span>

<span class="w">        </span><span class="n">max_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">report_file</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">report_files</span><span class="p">:</span>

<span class="w">            </span><span class="n">try</span><span class="p">:</span>

<span class="w">                </span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="p">(</span><span class="n">report_file</span><span class="o">.</span><span class="n">stem</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">max_index</span><span class="p">:</span>

<span class="w">                    </span><span class="n">max_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">index</span>

<span class="w">            </span><span class="n">except</span><span class="w"> </span><span class="n">ValueError</span><span class="p">:</span>

<span class="w">                </span><span class="k">continue</span>

<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">set_path</span><span class="p">(</span><span class="n">workdir</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">f</span><span class="s2">&quot;{base_name}_execution_report_{max_index + 1}.md&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">write_report</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

<span class="w">        </span><span class="c1"># if the report path is not set, set it from the zip path</span>

<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">_set_path_from_zip_path</span><span class="p">()</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">report_path</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">None</span><span class="p">:</span>

<span class="w">            </span><span class="k">return</span>

<span class="w">        </span><span class="n">with</span><span class="w"> </span><span class="n">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">report_path</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;w&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">file</span><span class="p">:</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">_write_headline</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">_write_folder_structure</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">_write_python_packages_zip_content</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">_write_component_installed_packages</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">_write_payload_lengths</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">_write_warnings</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_write_headline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">):</span>

<span class="w">        </span><span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_REPORT_HEADLINE</span><span class="p">)</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_write_folder_structure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">):</span>

<span class="w">        </span><span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_FOLDER_STRUCTURE_HEADLINE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">zip_file_name</span><span class="p">))</span>

<span class="w">        </span><span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_FOLDER_STRUCTURE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">zip_file_name</span><span class="p">,</span><span class="w"> </span><span class="n">folder_structure</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">folder_tree_text</span><span class="p">))</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_write_python_packages_zip_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">):</span>

<span class="w">        </span><span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_PYTHON_PACKAGES_ZIP_CONTENT_HEADLINE</span><span class="p">)</span>

<span class="w">        </span><span class="n">sorted_zip_content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sorted</span><span class="p">(</span><span class="n">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">python_packages_zip_content</span><span class="p">))</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">sorted_zip_content</span><span class="p">:</span>

<span class="w">            </span><span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_PYTHON_PACKAGES_ZIP_CONTENT</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">python_package</span><span class="o">=</span><span class="n">package</span><span class="p">))</span>

<span class="w">        </span><span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_write_component_installed_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">):</span>

<span class="w">        </span><span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_COMPONENT_INSTALLED_PACKAGES_HEADLINE</span><span class="p">)</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">component_installed_packages</span><span class="p">:</span>

<span class="w">            </span><span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_COMPONENT_INSTALLED_PACKAGES</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">))</span>

<span class="w">            </span><span class="n">sorted_installed_packages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component_installed_packages</span><span class="p">[</span><span class="n">component</span><span class="p">],</span><span class="w"> </span><span class="n">key</span><span class="o">=</span><span class="n">lambda</span><span class="w"> </span><span class="n">x</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">package_name</span><span class="p">,</span><span class="w"> </span><span class="n">package_version</span><span class="p">,</span><span class="w"> </span><span class="n">wheel_name</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">sorted_installed_packages</span><span class="p">:</span>

<span class="w">                </span><span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_COMPONENT_INSTALLED_PACKAGES_ROW</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">package_name</span><span class="o">=</span><span class="n">package_name</span><span class="p">,</span>

<span class="w">                                                                        </span><span class="n">package_version</span><span class="o">=</span><span class="n">package_version</span><span class="p">,</span>

<span class="w">                                                                        </span><span class="n">wheel_name</span><span class="o">=</span><span class="n">wheel_name</span><span class="p">))</span>

<span class="w">            </span><span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">_write_payload_lengths</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">):</span>

<span class="w">        </span><span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_PAYLOAD_LENGTHS_HEADLINE</span><span class="p">)</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">component_payload_length</span><span class="p">:</span>

<span class="w">            </span><span class="n">input_payload_length</span><span class="p">,</span><span class="w"> </span><span class="n">output_payload_length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">component_payload_length</span><span class="p">[</span><span class="n">component</span><span class="p">]</span>

<span class="w">            </span><span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">LPLR_PAYLOAD_LENGTHS</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">,</span>

<span class="w">                                                   </span><span class="n">input_payload_length</span><span class="o">=</span><span class="n">input_payload_length</span><span class="p">,</span>

<span class="w">                                                   </span><span class="n">output_payload_length</span><span class="o">=</span><span class="n">output_payload_length</span><span class="p">))</span>
</code></pre></div>

</details>
<hr />
<h4 id="ancestors-in-mro_1">Ancestors (in MRO)</h4>
<ul>
<li>simaticai.helpers.reporter.ReportWriter</li>
</ul>
<h4 id="static-methods_1">Static methods</h4>
<h4 id="format_size">format_size</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">format_size</span><span class="p">(</span>
    <span class="n">size</span>
<span class="p">)</span>
</code></pre></div>

<p>Format file size in human-readable form.</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="nv">@staticmethod</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">format_size</span><span class="p">(</span><span class="k">size</span><span class="p">)</span><span class="err">:</span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot;Format file size in human-readable form.&quot;&quot;&quot;</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">[</span><span class="n">&#39;B&#39;, &#39;KB&#39;, &#39;MB&#39;</span><span class="o">]</span><span class="err">:</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="k">size</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="err">:</span>

<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">f</span><span class="ss">&quot;{size} {unit}&quot;</span>

<span class="w">            </span><span class="k">size</span><span class="w"> </span><span class="o">//=</span><span class="w"> </span><span class="mi">1000</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">f</span><span class="ss">&quot;{size} GB&quot;</span>
</code></pre></div>

</details>
<h4 id="methods_1">Methods</h4>
<h4 id="add_installed_packages">add_installed_packages</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_installed_packages</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">component_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">pip_report_file</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">add_installed_packages</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">component_name</span><span class="p">:</span><span class="w"> </span><span class="nf">str</span><span class="p">,</span><span class="w"> </span><span class="nl">pip_report_file</span><span class="p">:</span><span class="w"> </span><span class="k">Path</span><span class="p">)</span><span class="err">:</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">pip_report_file</span><span class="p">.</span><span class="n">is_file</span><span class="p">()</span><span class="err">:</span>

<span class="w">            </span><span class="k">return</span>

<span class="w">        </span><span class="n">pip_report</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{}</span>

<span class="w">        </span><span class="k">with</span><span class="w"> </span><span class="k">open</span><span class="p">(</span><span class="n">pip_report_file</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;r&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">file</span><span class="err">:</span>

<span class="w">            </span><span class="n">pip_report</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">json</span><span class="p">.</span><span class="k">load</span><span class="p">(</span><span class="k">file</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">component_name</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">component_installed_packages</span><span class="p">:</span>

<span class="w">            </span><span class="n">self</span><span class="p">.</span><span class="n">component_installed_packages</span><span class="o">[</span><span class="n">component_name</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">[]</span>

<span class="w">        </span><span class="n">installed_packages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pip_report</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="ss">&quot;install&quot;</span><span class="p">,</span><span class="w"> </span><span class="err">[]</span><span class="p">)</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nl">installed_packages</span><span class="p">:</span>

<span class="w">            </span><span class="n">package_url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">package</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="ss">&quot;download_info&quot;</span><span class="p">,</span><span class="w"> </span><span class="err">{}</span><span class="p">).</span><span class="k">get</span><span class="p">(</span><span class="ss">&quot;url&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;&quot;</span><span class="p">)</span>

<span class="w">            </span><span class="n">wheel_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">package_url</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="ss">&quot;/&quot;</span><span class="p">)</span><span class="o">[</span><span class="n">-1</span><span class="o">]</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">package_url</span><span class="p">.</span><span class="n">endswith</span><span class="p">(</span><span class="ss">&quot;.whl&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="ss">&quot;n/a&quot;</span>

<span class="w">            </span><span class="n">metadata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">package</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="ss">&quot;metadata&quot;</span><span class="p">,</span><span class="w"> </span><span class="err">{}</span><span class="p">)</span>

<span class="w">            </span><span class="n">package_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">metadata</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="ss">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;n/a&quot;</span><span class="p">)</span>

<span class="w">            </span><span class="n">package_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">metadata</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="ss">&quot;version&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;n/a&quot;</span><span class="p">)</span>

<span class="w">            </span><span class="n">self</span><span class="p">.</span><span class="n">component_installed_packages</span><span class="o">[</span><span class="n">component_name</span><span class="o">]</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="n">package_name</span><span class="p">,</span><span class="w"> </span><span class="n">package_version</span><span class="p">,</span><span class="w"> </span><span class="n">wheel_name</span><span class="p">))</span>
</code></pre></div>

</details>
<h4 id="add_warning_1">add_warning</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_warning</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">,</span>
    <span class="n">line_number</span><span class="p">,</span>
    <span class="n">warning_msg</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code>    def add_warning(self, name, filename, line_number, warning_msg):

        self.warnings_text += WARNING_LINE.format(name=name, filename=filename, line_number=line_number, warning_msg=warning_msg)
</code></pre></div>

</details>
<h4 id="set_input_payload_length">set_input_payload_length</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_input_payload_length</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">component_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">length</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">set_input_payload_length</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">component_name</span><span class="p">:</span><span class="w"> </span><span class="nf">str</span><span class="p">,</span><span class="w"> </span><span class="nl">length</span><span class="p">:</span><span class="w"> </span><span class="nc">int</span><span class="p">)</span><span class="err">:</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">component_name</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">component_payload_length</span><span class="p">:</span>

<span class="w">            </span><span class="n">self</span><span class="p">.</span><span class="n">component_payload_length</span><span class="o">[</span><span class="n">component_name</span><span class="o">][</span><span class="n">0</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">length</span>

<span class="w">        </span><span class="k">else</span><span class="err">:</span>

<span class="w">            </span><span class="n">self</span><span class="p">.</span><span class="n">component_payload_length</span><span class="o">[</span><span class="n">component_name</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">length, 0</span><span class="o">]</span>
</code></pre></div>

</details>
<h4 id="set_output_payload_length">set_output_payload_length</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_output_payload_length</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">component_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">length</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">set_output_payload_length</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">component_name</span><span class="p">:</span><span class="w"> </span><span class="nf">str</span><span class="p">,</span><span class="w"> </span><span class="nl">length</span><span class="p">:</span><span class="w"> </span><span class="nc">int</span><span class="p">)</span><span class="err">:</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">component_name</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">component_payload_length</span><span class="p">:</span>

<span class="w">            </span><span class="n">self</span><span class="p">.</span><span class="n">component_payload_length</span><span class="o">[</span><span class="n">component_name</span><span class="o">][</span><span class="n">1</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">length</span>

<span class="w">        </span><span class="k">else</span><span class="err">:</span>

<span class="w">            </span><span class="n">self</span><span class="p">.</span><span class="n">component_payload_length</span><span class="o">[</span><span class="n">component_name</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">0, length</span><span class="o">]</span>
</code></pre></div>

</details>
<h4 id="set_package_zip_path">set_package_zip_path</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_package_zip_path</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">zip_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">set_package_zip_path</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">zip_path</span><span class="p">:</span><span class="w"> </span><span class="k">Path</span><span class="p">)</span><span class="err">:</span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">package_zip_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">zip_path</span>

<span class="w">        </span><span class="k">with</span><span class="w"> </span><span class="n">zipfile</span><span class="p">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">zip_path</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;r&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nl">zipf</span><span class="p">:</span>

<span class="w">            </span><span class="n">self</span><span class="p">.</span><span class="n">zip_file_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">zipf</span><span class="p">.</span><span class="n">filename</span>

<span class="w">            </span><span class="n">zip_tree</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{}</span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">item_name</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">zipf</span><span class="p">.</span><span class="n">namelist</span><span class="p">()</span><span class="err">:</span>

<span class="w">                </span><span class="n">zip_tree</span><span class="o">[</span><span class="n">item_name</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ZipTreeElement</span><span class="p">(</span><span class="n">full_name</span><span class="o">=</span><span class="n">item_name</span><span class="p">,</span><span class="w"> </span><span class="n">file_size</span><span class="o">=</span><span class="n">zipf</span><span class="p">.</span><span class="n">getinfo</span><span class="p">(</span><span class="n">item_name</span><span class="p">).</span><span class="n">file_size</span><span class="p">)</span>

<span class="w">            </span><span class="n">self</span><span class="p">.</span><span class="n">_print_structure_recursively</span><span class="p">(</span><span class="n">zip_tree</span><span class="p">,</span><span class="w"> </span><span class="n">zipf</span><span class="p">)</span>
</code></pre></div>

</details>
<h4 id="set_path_1">set_path</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_path</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">report_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code>    def set_path(self, report_path: Path):

        self.report_path = report_path
</code></pre></div>

</details>
<h4 id="write_report_1">write_report</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">write_report</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">write_report</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

<span class="w">        </span><span class="c1"># if the report path is not set, set it from the zip path</span>

<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">_set_path_from_zip_path</span><span class="p">()</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">report_path</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">None</span><span class="p">:</span>

<span class="w">            </span><span class="k">return</span>

<span class="w">        </span><span class="n">with</span><span class="w"> </span><span class="n">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">report_path</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;w&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">file</span><span class="p">:</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">_write_headline</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">_write_folder_structure</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">_write_python_packages_zip_content</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">_write_component_installed_packages</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">_write_payload_lengths</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">_write_warnings</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</code></pre></div>

</details>
<h3 id="reportwriter">ReportWriter</h3>
<p>Base class for report writers.</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ReportWriter</span><span class="p">(</span>

<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nx">ReportWriter</span><span class="p">:</span>

<span class="w">    </span><span class="s">&quot;&quot;&quot;</span>

<span class="s">    Base class for report writers.</span>

<span class="s">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="nx">def</span><span class="w"> </span><span class="nx">__init__</span><span class="p">(</span><span class="kp">self</span><span class="p">):</span>

<span class="w">        </span><span class="kp">self</span><span class="p">.</span><span class="nx">report_path</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">None</span>

<span class="w">        </span><span class="kp">self</span><span class="p">.</span><span class="nx">warnings_text</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span>

<span class="w">    </span><span class="nx">def</span><span class="w"> </span><span class="nx">set_path</span><span class="p">(</span><span class="kp">self</span><span class="p">,</span><span class="w"> </span><span class="nx">report_path</span><span class="p">:</span><span class="w"> </span><span class="nx">Path</span><span class="p">):</span>

<span class="w">        </span><span class="kp">self</span><span class="p">.</span><span class="nx">report_path</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">report_path</span>

<span class="w">    </span><span class="nx">def</span><span class="w"> </span><span class="nx">add_warning</span><span class="p">(</span><span class="kp">self</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="nx">filename</span><span class="p">,</span><span class="w"> </span><span class="nx">line_number</span><span class="p">,</span><span class="w"> </span><span class="nx">warning_msg</span><span class="p">):</span>

<span class="w">        </span><span class="kp">self</span><span class="p">.</span><span class="nx">warnings_text</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">WARNING_LINE</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">name</span><span class="p">=</span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="nx">filename</span><span class="p">=</span><span class="nx">filename</span><span class="p">,</span><span class="w"> </span><span class="nx">line_number</span><span class="p">=</span><span class="nx">line_number</span><span class="p">,</span><span class="w"> </span><span class="nx">warning_msg</span><span class="p">=</span><span class="nx">warning_msg</span><span class="p">)</span>

<span class="w">    </span><span class="nx">def</span><span class="w"> </span><span class="nx">write_report</span><span class="p">(</span><span class="kp">self</span><span class="p">):</span>

<span class="w">        </span><span class="nx">raise</span><span class="w"> </span><span class="nx">NotImplementedError</span><span class="p">(</span><span class="s">&quot;Subclasses should implement this method&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="nx">def</span><span class="w"> </span><span class="nx">_write_warnings</span><span class="p">(</span><span class="kp">self</span><span class="p">,</span><span class="w"> </span><span class="nx">file</span><span class="p">):</span>

<span class="w">        </span><span class="nx">file</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">WARNINGS_HEADLINE</span><span class="p">)</span>

<span class="w">        </span><span class="nx">file</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="kp">self</span><span class="p">.</span><span class="nx">warnings_text</span><span class="p">)</span>
</code></pre></div>

</details>
<hr />
<h4 id="descendants">Descendants</h4>
<ul>
<li>simaticai.helpers.reporter.PipelineReportWriter</li>
<li>simaticai.helpers.reporter.PipelineRunnerReportWriter</li>
</ul>
<h4 id="methods_2">Methods</h4>
<h4 id="add_warning_2">add_warning</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_warning</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">,</span>
    <span class="n">line_number</span><span class="p">,</span>
    <span class="n">warning_msg</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code>    def add_warning(self, name, filename, line_number, warning_msg):

        self.warnings_text += WARNING_LINE.format(name=name, filename=filename, line_number=line_number, warning_msg=warning_msg)
</code></pre></div>

</details>
<h4 id="set_path_2">set_path</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_path</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">report_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code>    def set_path(self, report_path: Path):

        self.report_path = report_path
</code></pre></div>

</details>
<h4 id="write_report_2">write_report</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">write_report</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="nx">def</span><span class="w"> </span><span class="nx">write_report</span><span class="p">(</span><span class="kp">self</span><span class="p">):</span>

<span class="w">        </span><span class="nx">raise</span><span class="w"> </span><span class="nx">NotImplementedError</span><span class="p">(</span><span class="s">&quot;Subclasses should implement this method&quot;</span><span class="p">)</span>
</code></pre></div>

</details>
<h3 id="reportwriterhandler">ReportWriterHandler</h3>
<p>A handler that can be given to a logger, so the report writer can capture logged warning messages</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ReportWriterHandler</span><span class="p">(</span>
    <span class="n">report_writer</span><span class="p">:</span> <span class="n">simaticai</span><span class="o">.</span><span class="n">helpers</span><span class="o">.</span><span class="n">reporter</span><span class="o">.</span><span class="n">ReportWriter</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="n">ReportWriterHandler</span>(<span class="n">logging</span>.<span class="n">Handler</span>):

    <span class="s">&quot;&quot;&quot;</span>

<span class="s">    A handler that can be given to a logger, so the report writer can capture logged warning messages</span>

<span class="s">    &quot;&quot;&quot;</span>

    <span class="n">def</span> <span class="n">__init__</span>(<span class="nb">self</span>, <span class="n">report_writer:</span> <span class="n">ReportWriter</span>):

        <span class="n">super</span>().<span class="n">__init__</span>()

        <span class="nb">self</span>.<span class="n">report_writer</span> = <span class="n">report_writer</span>

    <span class="n">def</span> <span class="nb">emit</span>(<span class="nb">self</span>, <span class="n">record</span>):

        <span class="k">if</span> <span class="n">record</span>.<span class="n">levelno</span> == <span class="n">logging</span>.<span class="n">WARNING:</span>

            <span class="nb">self</span>.<span class="n">report_writer</span>.<span class="n">add_warning</span>(<span class="n">record</span>.<span class="nb">name</span>, <span class="n">record</span>.<span class="nb">filename</span>, <span class="n">record</span>.<span class="n">lineno</span>, <span class="n">record</span>.<span class="n">getMessage</span>())
</code></pre></div>

</details>
<hr />
<h4 id="ancestors-in-mro_2">Ancestors (in MRO)</h4>
<ul>
<li>logging.Handler</li>
<li>logging.Filterer</li>
</ul>
<h4 id="instance-variables">Instance variables</h4>
<div class="codehilite"><pre><span></span><code><span class="n">name</span>
</code></pre></div>

<h4 id="methods_3">Methods</h4>
<h4 id="acquire">acquire</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">acquire</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span>
</code></pre></div>

<p>Acquire the I/O thread lock.</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="nv">def</span><span class="w"> </span><span class="nv">acquire</span><span class="ss">(</span><span class="nv">self</span><span class="ss">)</span>:

<span class="w">        </span><span class="s2">&quot;&quot;</span><span class="err">&quot;</span>

<span class="err">        Acquire the I/O thread lock.</span>

<span class="w">        </span><span class="s2">&quot;&quot;</span><span class="err">&quot;</span>

<span class="err">        if self.lock:</span>

<span class="err">            self.lock.acquire()</span>
</code></pre></div>

</details>
<h4 id="addfilter">addFilter</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">addFilter</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="nb">filter</span>
<span class="p">)</span>
</code></pre></div>

<p>Add the specified filter to this handler.</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="nv">def</span><span class="w"> </span><span class="nv">addFilter</span><span class="ss">(</span><span class="nv">self</span>,<span class="w"> </span><span class="nv">filter</span><span class="ss">)</span>:

<span class="w">        </span><span class="s2">&quot;&quot;</span><span class="err">&quot;</span>

<span class="err">        Add the specified filter to this handler.</span>

<span class="w">        </span><span class="s2">&quot;&quot;</span><span class="err">&quot;</span>

<span class="err">        if not (filter in self.filters):</span>

<span class="err">            self.filters.append(filter)</span>
</code></pre></div>

</details>
<h4 id="close">close</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span>
</code></pre></div>

<p>Tidy up any resources used by the handler.</p>
<p>This version removes the handler from an internal map of handlers,
_handlers, which is used for handler lookup by name. Subclasses
should ensure that this gets called from overridden close()
methods.</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code>    def close(self):

        &quot;&quot;&quot;

        Tidy up any resources used by the handler.

        This version removes the handler from an internal map of handlers,

        _handlers, which is used for handler lookup by name. Subclasses

        should ensure that this gets called from overridden close()

        methods.

        &quot;&quot;&quot;

        #get the module data lock, as we&#39;re updating a shared structure.

        _acquireLock()

        try:    #unlikely to raise an exception, but you never know...

            self._closed = True

            if self._name and self._name in _handlers:

                del _handlers[self._name]

        finally:

            _releaseLock()
</code></pre></div>

</details>
<h4 id="createlock">createLock</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">createLock</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span>
</code></pre></div>

<p>Acquire a thread lock for serializing access to the underlying I/O.</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">createLock</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="o">:</span>

<span class="w">        </span><span class="s">&quot;&quot;&quot;</span>

<span class="w">        </span><span class="n">Acquire</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">thread</span><span class="w"> </span><span class="n">lock</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">serializing</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">underlying</span><span class="w"> </span><span class="n">I</span><span class="o">/</span><span class="n">O</span><span class="p">.</span>

<span class="w">        </span><span class="s">&quot;&quot;&quot;</span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">threading</span><span class="p">.</span><span class="n">RLock</span><span class="p">()</span>

<span class="w">        </span><span class="n">_register_at_fork_reinit_lock</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
</code></pre></div>

</details>
<h4 id="emit">emit</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">emit</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">record</span>
<span class="p">)</span>
</code></pre></div>

<p>Do whatever it takes to actually log the specified logging record.</p>
<p>This version is intended to be implemented by subclasses and so
raises a NotImplementedError.</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code>    def emit(self, record):

        if record.levelno == logging.WARNING:

            self.report_writer.add_warning(record.name, record.filename, record.lineno, record.getMessage())
</code></pre></div>

</details>
<h4 id="filter">filter</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">filter</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">record</span>
<span class="p">)</span>
</code></pre></div>

<p>Determine if a record is loggable by consulting all the filters.</p>
<p>The default is to allow the record to be logged; any filter can veto
this and the record is then dropped. Returns a zero value if a record
is to be dropped, else non-zero.</p>
<p>.. versionchanged:: 3.2</p>
<p>Allow filters to be just callables.</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="nv">def</span><span class="w"> </span><span class="nv">filter</span><span class="ss">(</span><span class="nv">self</span>,<span class="w"> </span><span class="nv">record</span><span class="ss">)</span>:

<span class="w">        </span><span class="s2">&quot;&quot;</span><span class="err">&quot;</span>

<span class="err">        Determine if a record is loggable by consulting all the filters.</span>

<span class="err">        The default is to allow the record to be logged; any filter can veto</span>

<span class="err">        this and the record is then dropped. Returns a zero value if a record</span>

<span class="err">        is to be dropped, else non-zero.</span>

<span class="err">        .. versionchanged:: 3.2</span>

<span class="err">           Allow filters to be just callables.</span>

<span class="w">        </span><span class="s2">&quot;&quot;</span><span class="err">&quot;</span>

<span class="err">        rv = True</span>

<span class="err">        for f in self.filters:</span>

<span class="err">            if hasattr(f, &#39;filter&#39;):</span>

<span class="err">                result = f.filter(record)</span>

<span class="err">            else:</span>

<span class="err">                result = f(record) # assume callable - will raise if not</span>

<span class="err">            if not result:</span>

<span class="err">                rv = False</span>

<span class="err">                break</span>

<span class="err">        return rv</span>
</code></pre></div>

</details>
<h4 id="flush">flush</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">flush</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span>
</code></pre></div>

<p>Ensure all logging output has been flushed.</p>
<p>This version does nothing and is intended to be implemented by
subclasses.</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="nx">def</span><span class="w"> </span><span class="nx">flush</span><span class="p">(</span><span class="kp">self</span><span class="p">):</span>

<span class="w">        </span><span class="s">&quot;&quot;&quot;</span>

<span class="s">        Ensure all logging output has been flushed.</span>

<span class="s">        This version does nothing and is intended to be implemented by</span>

<span class="s">        subclasses.</span>

<span class="s">        &quot;&quot;&quot;</span>

<span class="w">        </span><span class="nx">pass</span>
</code></pre></div>

</details>
<h4 id="format">format</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">format</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">record</span>
<span class="p">)</span>
</code></pre></div>

<p>Format the specified record.</p>
<p>If a formatter is set, use it. Otherwise, use the default formatter
for the module.</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code>    def format(self, record):

        &quot;&quot;&quot;

        Format the specified record.

        If a formatter is set, use it. Otherwise, use the default formatter

        for the module.

        &quot;&quot;&quot;

        if self.formatter:

            fmt = self.formatter

        else:

            fmt = _defaultFormatter

        return fmt.format(record)
</code></pre></div>

</details>
<h4 id="get_name">get_name</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_name</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code>    def get_name(self):

        return self._name
</code></pre></div>

</details>
<h4 id="handle">handle</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">handle</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">record</span>
<span class="p">)</span>
</code></pre></div>

<p>Conditionally emit the specified logging record.</p>
<p>Emission depends on filters which may have been added to the handler.
Wrap the actual emission of the record with acquisition/release of
the I/O thread lock. Returns whether the filter passed the record for
emission.</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="nv">def</span><span class="w"> </span><span class="nv">handle</span><span class="ss">(</span><span class="nv">self</span>,<span class="w"> </span><span class="nv">record</span><span class="ss">)</span>:

<span class="w">        </span><span class="s2">&quot;&quot;</span><span class="err">&quot;</span>

<span class="err">        Conditionally emit the specified logging record.</span>

<span class="err">        Emission depends on filters which may have been added to the handler.</span>

<span class="err">        Wrap the actual emission of the record with acquisition/release of</span>

<span class="err">        the I/O thread lock. Returns whether the filter passed the record for</span>

<span class="err">        emission.</span>

<span class="w">        </span><span class="s2">&quot;&quot;</span><span class="err">&quot;</span>

<span class="err">        rv = self.filter(record)</span>

<span class="err">        if rv:</span>

<span class="err">            self.acquire()</span>

<span class="err">            try:</span>

<span class="err">                self.emit(record)</span>

<span class="err">            finally:</span>

<span class="err">                self.release()</span>

<span class="err">        return rv</span>
</code></pre></div>

</details>
<h4 id="handleerror">handleError</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">handleError</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">record</span>
<span class="p">)</span>
</code></pre></div>

<p>Handle errors which occur during an emit() call.</p>
<p>This method should be called from handlers when an exception is
encountered during an emit() call. If raiseExceptions is false,
exceptions get silently ignored. This is what is mostly wanted
for a logging system - most users will not care about errors in
the logging system, they are more interested in application errors.
You could, however, replace this with a custom handler if you wish.
The record which was being processed is passed in to this method.</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code>    def handleError(self, record):

        &quot;&quot;&quot;

        Handle errors which occur during an emit() call.

        This method should be called from handlers when an exception is

        encountered during an emit() call. If raiseExceptions is false,

        exceptions get silently ignored. This is what is mostly wanted

        for a logging system - most users will not care about errors in

        the logging system, they are more interested in application errors.

        You could, however, replace this with a custom handler if you wish.

        The record which was being processed is passed in to this method.

        &quot;&quot;&quot;

        if raiseExceptions and sys.stderr:  # see issue 13807

            t, v, tb = sys.exc_info()

            try:

                sys.stderr.write(&#39;--- Logging error ---\n&#39;)

                traceback.print_exception(t, v, tb, None, sys.stderr)

                sys.stderr.write(&#39;Call stack:\n&#39;)

                # Walk the stack frame up until we&#39;re out of logging,

                # so as to print the calling context.

                frame = tb.tb_frame

                while (frame and os.path.dirname(frame.f_code.co_filename) ==

                       __path__[0]):

                    frame = frame.f_back

                if frame:

                    traceback.print_stack(frame, file=sys.stderr)

                else:

                    # couldn&#39;t find the right stack frame, for some reason

                    sys.stderr.write(&#39;Logged from file %s, line %s\n&#39; % (

                                     record.filename, record.lineno))

                # Issue 18671: output logging message and arguments

                try:

                    sys.stderr.write(&#39;Message: %r\n&#39;

                                     &#39;Arguments: %s\n&#39; % (record.msg,

                                                          record.args))

                except RecursionError:  # See issue 36272

                    raise

                except Exception:

                    sys.stderr.write(&#39;Unable to print the message and arguments&#39;

                                     &#39; - possible formatting error.\nUse the&#39;

                                     &#39; traceback above to help find the error.\n&#39;

                                    )

            except OSError: #pragma: no cover

                pass    # see issue 5971

            finally:

                del t, v, tb
</code></pre></div>

</details>
<h4 id="release">release</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">release</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span>
</code></pre></div>

<p>Release the I/O thread lock.</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="nv">def</span><span class="w"> </span><span class="nv">release</span><span class="ss">(</span><span class="nv">self</span><span class="ss">)</span>:

<span class="w">        </span><span class="s2">&quot;&quot;</span><span class="err">&quot;</span>

<span class="err">        Release the I/O thread lock.</span>

<span class="w">        </span><span class="s2">&quot;&quot;</span><span class="err">&quot;</span>

<span class="err">        if self.lock:</span>

<span class="err">            self.lock.release()</span>
</code></pre></div>

</details>
<h4 id="removefilter">removeFilter</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">removeFilter</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="nb">filter</span>
<span class="p">)</span>
</code></pre></div>

<p>Remove the specified filter from this handler.</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="nv">def</span><span class="w"> </span><span class="nv">removeFilter</span><span class="ss">(</span><span class="nv">self</span>,<span class="w"> </span><span class="nv">filter</span><span class="ss">)</span>:

<span class="w">        </span><span class="s2">&quot;&quot;</span><span class="err">&quot;</span>

<span class="err">        Remove the specified filter from this handler.</span>

<span class="w">        </span><span class="s2">&quot;&quot;</span><span class="err">&quot;</span>

<span class="err">        if filter in self.filters:</span>

<span class="err">            self.filters.remove(filter)</span>
</code></pre></div>

</details>
<h4 id="setformatter">setFormatter</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">setFormatter</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">fmt</span>
<span class="p">)</span>
</code></pre></div>

<p>Set the formatter for this handler.</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="nv">def</span><span class="w"> </span><span class="nv">setFormatter</span><span class="ss">(</span><span class="nv">self</span>,<span class="w"> </span><span class="nv">fmt</span><span class="ss">)</span>:

<span class="w">        </span><span class="s2">&quot;&quot;</span><span class="err">&quot;</span>

<span class="err">        Set the formatter for this handler.</span>

<span class="w">        </span><span class="s2">&quot;&quot;</span><span class="err">&quot;</span>

<span class="err">        self.formatter = fmt</span>
</code></pre></div>

</details>
<h4 id="setlevel">setLevel</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">setLevel</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">level</span>
<span class="p">)</span>
</code></pre></div>

<p>Set the logging level of this handler.  level must be an int or a str.</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code>    def setLevel(self, level):

        &quot;&quot;&quot;

        Set the logging level of this handler.  level must be an int or a str.

        &quot;&quot;&quot;

        self.level = _checkLevel(level)
</code></pre></div>

</details>
<h4 id="set_name">set_name</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_name</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">set_name</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="err">:</span>

<span class="w">        </span><span class="n">_acquireLock</span><span class="p">()</span>

<span class="w">        </span><span class="k">try</span><span class="err">:</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">_name</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nl">_handlers</span><span class="p">:</span>

<span class="w">                </span><span class="n">del</span><span class="w"> </span><span class="n">_handlers</span><span class="o">[</span><span class="n">self._name</span><span class="o">]</span>

<span class="w">            </span><span class="n">self</span><span class="p">.</span><span class="n">_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nl">name</span><span class="p">:</span>

<span class="w">                </span><span class="n">_handlers</span><span class="o">[</span><span class="n">name</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span>

<span class="w">        </span><span class="nl">finally</span><span class="p">:</span>

<span class="w">            </span><span class="n">_releaseLock</span><span class="p">()</span>
</code></pre></div>

</details>
<h3 id="ziptreeelement">ZipTreeElement</h3>
<p>A class to represent a file or folder in a zip file. During the recursive traversal of the zip file,</p>
<p>the full name and file size are stored in this class.</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ZipTreeElement</span><span class="p">(</span>
    <span class="n">full_name</span><span class="p">,</span>
    <span class="n">file_size</span>
<span class="p">)</span>
</code></pre></div>

<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="n">ZipTreeElement:</span>

    <span class="s">&quot;&quot;&quot;</span>

<span class="s">    A class to represent a file or folder in a zip file. During the recursive traversal of the zip file,</span>

<span class="s">    the full name and file size are stored in this class.</span>

<span class="s">    &quot;&quot;&quot;</span>

    <span class="n">def</span> <span class="n">__init__</span>(<span class="nb">self</span>, <span class="n">full_name</span>, <span class="n">file_size</span>):

        <span class="nb">self</span>.<span class="n">full_name</span> = <span class="n">full_name</span>

        <span class="nb">self</span>.<span class="n">file_size</span> = <span class="n">file_size</span>
</code></pre></div>

</details>
<hr />





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="pep508.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Pep508" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Pep508
            </div>
          </div>
        </a>
      
      
        
        <a href="tempfiles.html" class="md-footer__link md-footer__link--next" aria-label="Next: Tempfiles" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Tempfiles
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright (C) Siemens AG 2021. All Rights Reserved.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.48f2be22.min.js"></script>
      
    
  </body>
</html>